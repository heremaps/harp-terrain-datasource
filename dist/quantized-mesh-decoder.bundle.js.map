{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@here/harp-geoutils/lib/coordinates/GeoCoordinates.js","webpack:///./node_modules/@here/harp-geoutils/lib/math/MathUtils.js","webpack:///./node_modules/@here/harp-geoutils/lib/math/OrientedBox3Like.js","webpack:///./node_modules/@here/harp-utils/index.js","webpack:///./node_modules/@here/harp-geoutils/lib/coordinates/GeoBox.js","webpack:///./node_modules/@here/harp-geoutils/lib/math/Box3Like.js","webpack:///./node_modules/@here/harp-geoutils/lib/projection/Projection.js","webpack:///./node_modules/@here/harp-geoutils/index.js","webpack:///./node_modules/@here/harp-geoutils/lib/projection/EarthConstants.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/TileKey.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/TilingScheme.js","webpack:///./node_modules/@here/harp-datasource-protocol/index.js","webpack:///./node_modules/@here/harp-mapview-decoder/lib/WorkerService.js","webpack:///./node_modules/@here/harp-utils/lib/Logger/ILogger.js","webpack:///./node_modules/@here/harp-geoutils/lib/projection/MercatorProjection.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/QuadTreeSubdivisionScheme.js","webpack:///./node_modules/@here/harp-utils/lib/Logger/ConsoleChannel.js","webpack:///./node_modules/@here/harp-utils/lib/Logger/Logger.js","webpack:///./node_modules/@here/harp-utils/lib/Logger/WorkerChannel.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/Expr.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/InterpolatedProperty.js","webpack:///./node_modules/@here/harp-geoutils/lib/projection/EquirectangularProjection.js","webpack:///./node_modules/@here/harp-geoutils/lib/projection/WebMercatorProjection.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/FlatTileBoundingBoxGenerator.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/HalfQuadTreeSubdivisionScheme.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/SubTiles.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/TileKeyUtils.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/TileTreeTraverse.js","webpack:///external \"THREE\"","webpack:///./node_modules/@here/harp-datasource-protocol/lib/InterpolatedPropertyDefs.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/TechniqueParams.js","webpack:///./node_modules/@here/quantized-mesh-decoder/src/index.js","webpack:///./node_modules/@here/harp-terrain-datasource/src/quantized-mesh/tile-decoder.js","webpack:///./src/quantized-mesh-decoder-worker.js","webpack:///./node_modules/@here/harp-terrain-datasource/src/quantized-mesh/tile-decoder-worker.js","webpack:///./node_modules/@here/harp-mapview-decoder/index-worker.js","webpack:///./node_modules/@here/harp-mapview-decoder/lib/ThemedTileDecoder.js","webpack:///./node_modules/@here/harp-datasource-protocol/index-decoder.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/StyleSetEvaluator.js","webpack:///./node_modules/@here/harp-utils/lib/GroupedPriorityList.js","webpack:///./node_modules/@here/harp-utils/lib/Logger/index.js","webpack:///./node_modules/@here/harp-utils/lib/Logger/LoggerManager.js","webpack:///./node_modules/@here/harp-utils/lib/Logger/LoggerManagerImpl.js","webpack:///./node_modules/@here/harp-utils/lib/Logger/MultiChannel.js","webpack:///./node_modules/@here/harp-utils/lib/Math2D.js","webpack:///./node_modules/@here/harp-utils/lib/MathUtils.js","webpack:///./node_modules/@here/harp-utils/lib/Mixins.js","webpack:///./node_modules/@here/harp-utils/lib/assert.js","webpack:///./node_modules/@here/harp-utils/lib/PerformanceTimer.js","webpack:///./node_modules/@here/harp-utils/lib/OptionsUtils.js","webpack:///./node_modules/@here/harp-utils/lib/UrlResolver.js","webpack:///./node_modules/@here/harp-utils/lib/UrlUtils.js","webpack:///./node_modules/@here/harp-utils/lib/Functions.js","webpack:///./node_modules/@here/harp-geoutils/lib/coordinates/GeoCoordinatesLike.js","webpack:///./node_modules/@here/harp-geoutils/lib/projection/IdentityProjection.js","webpack:///./node_modules/@here/harp-geoutils/lib/projection/SphereProjection.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/QuadTree.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/HereTilingScheme.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/WebMercatorTilingScheme.js","webpack:///./node_modules/@here/harp-geoutils/lib/tiling/MercatorTilingScheme.js","webpack:///./node_modules/@here/harp-geoutils/lib/math/Vector3Like.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/Extruder.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/Outliner.js","webpack:///./node_modules/@here/harp-mapview-decoder/lib/TileDecoderService.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/Techniques.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/WorkerServiceProtocol.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/WorkerTilerProtocol.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/WorkerDecoderProtocol.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/DecodedTile.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/TileInfo.js","webpack:///./node_modules/@here/harp-datasource-protocol/lib/ThemeVisitor.js","webpack:///./node_modules/@here/harp-mapview-decoder/lib/TilerService.js","webpack:///./node_modules/@here/harp-mapview-decoder/lib/WorkerServiceManager.js","webpack:///./node_modules/geojson-vt/src/simplify.js","webpack:///./node_modules/geojson-vt/src/feature.js","webpack:///./node_modules/geojson-vt/src/convert.js","webpack:///./node_modules/geojson-vt/src/clip.js","webpack:///./node_modules/geojson-vt/src/wrap.js","webpack:///./node_modules/geojson-vt/src/transform.js","webpack:///./node_modules/geojson-vt/src/tile.js","webpack:///./node_modules/geojson-vt/src/index.js"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","defineProperty","exports","RAD2DEG","Math","PI","DEG2RAD","GeoCoordinates","latitude","longitude","altitude","this","isNaN","wrapped","other","MathUtils","normalizeAngleDeg","a","angleDistanceDeg","b","d","newEmptyBox3","min","x","Infinity","y","z","max","newVector3","v","undefined","degToRad","degrees","radToDeg","radians","clamp","interpolateAnglesDeg","p0","p1","t","isOrientedBox3Like","obb","position","xAxis","yAxis","zAxis","extents","__export","m","p","GeoCoordinates_1","GeoBox","southWest","northEast","south","north","west","east","minAltitude","altitudeSpan","latitudeSpan","longitudeSpan","maxAltitude","width","point","containsHelper","isFlat","isSameAltitude","isWithinAltitudeRange","isBox3Like","box3","ProjectionType","EarthConstants","EQUATORIAL_CIRCUMFERENCE","EQUATORIAL_RADIUS","MIN_ELEVATION","MAX_ELEVATION","powerOfTwo","TileKey","row","column","level","quadkey","length","i","mask","parseInt","charAt","fromRowColumnLevel","quadKey64","quadKey","result","m_mortonCode","quadkey64","fromMortonCode","m_hereTile","pow","coordX","coordY","totalWidth","totalHeight","floor","rowsAtLevel","columnsAtLevel","mortonCode","Error","delta","changedLevelBy","toString","col","qnr","sub","subQuad","fromQuadKey","child","fromHereTile","msb","FlatTileBoundingBoxGenerator_1","TileKeyUtils_1","TileTreeTraverse_1","TilingScheme","subdivisionScheme","projection","boundingBoxGenerator","FlatTileBoundingBoxGenerator","tileTreeTraverse","TileTreeTraverse","tileKey","subTiles","geoPoint","TileKeyUtils","geoCoordinatesToTileKey","geoBox","geoRectangleToTileKeys","getGeoBox","getWorldBox","harp_datasource_protocol_1","logger","LoggerManager","instance","create","enabled","WorkerService","serviceId","m_pendingRequests","Map","onMessage","message","data","service","WorkerServiceProtocol","isRequestMessage","request","requestEntry","messageId","responseSent","set","tryHandleRequest","then","response","doSendResponse","type","ServiceMessageName","Response","transferList","catch","error","tryHandleMessage","err","self","addEventListener","isInitializedMessage","Initialized","postMessage","cancelAllPendingRequests","removeEventListener","handleMessage","handleRequest","Promise","reject","delete","forEach","LogLevel","LoggerOptions","GeoBox_1","Box3Like_1","MathUtils_1","OrientedBox3Like_1","EarthConstants_1","Projection_1","MercatorProjection","Planar","val","MAXIMUM_LATITUDE","log","tan","latitudeProject","latitudeClamp","atan","exp","worldPoint","cosh","geoPointLike","latitudeClampProject","latitudeInRadians","fromRadians","unprojectLatitude","worldCenter","projectPoint","center","worldNorth","worldSouth","worldYCenter","Number","EPSILON","worldBox","minGeo","unprojectPoint","maxGeo","fromCoordinates","mercatorProjection","quadTreeSubdivisionScheme","ConsoleChannel","optionalParams","console","debug","info","trace","warn","ILogger_1","Logger","name","m_channel","options","Trace","update","prefix","Debug","Info","Log","Warn","WORKERCHANNEL_MSG_TYPE","WorkerChannel","workerMessage","Expr","kind","code","Parser","parse","Env","_name","MapEnv","entries","parent","super","lookup","obj","unmap","VarExpr","env","NumberLiteralExpr","StringLiteralExpr","HasAttributeExpr","attribute","ContainsExpr","elements","evaluate","e","NotExpr","expr","BinaryExpr","op","left","right","indexOf","startsWith","endsWith","LogicalExpr","Character","Token","isSpace","codepoint","Tab","Lf","Cr","Space","isNumber","_0","_9","isLetter","A","Z","isIdentChar","isLetterOrNumber","_","Dollar","Dot","LBracket","RBracket","tokenSpell","token","Eof","Identifier","String","Comma","LParen","RParen","Exclaim","TildeEqual","CaretEqual","DollarEqual","EqualEqual","ExclaimEqual","Less","Greater","LessEqual","GreaterEqual","BarBar","AmpAmp","Lexer","m_token","m_index","m_char","m_text","yylex","codePointAt","yyinp","ch","SingleQuote","DoubleQuote","start","substring","Equal","Caret","Tilde","Bar","Amp","getEqualityOp","getRelationalOp","lex","next","parseLogicalOr","text","yyexpect","parseFloat","parseUnary","parsePrimary","push","parseRelational","parseEquality","parseLogicalAnd","harp_geoutils_1","three_1","interpolants","DiscreteInterpolant","LinearInterpolant","CubicInterpolant","isInterpolatedPropertyDefinition","values","Array","zoomLevels","isInterpolatedProperty","interpolationMode","getPropertyValue","nChannels","isMultiChannel","interpolant","resultBuffer","slice","EquirectangularProjection","_worldPoint","geoToWorldScale","worldToGeoScale","latitudeSpanInRadians","longitudeSpanInRadians","sizeX","sizeY","equirectangularProjection","MercatorProjection_1","WebMercatorProjection","sy","sin","r","projectBox","webMercatorProjection","tilingScheme","minElevation","maxElevation","m_tilingScheme","m_worldBox","worldExtent","m_worldDimensions","levelDimensionX","getLevelDimensionX","levelDimensionY","getLevelDimensionY","originX","originY","unprojectBox","halfQuadTreeSubdivisionScheme","TileKey_1","SubTiles","m_tileKey","m_level","m_count","m_mask","m_shift","Iterator","index","m_parent","skip","parentKey","subLevel","cx","cy","worldSizeX","worldSizeY","wrap","lower","upper","minVal","maxVal","southWestLongitude","longitudeInRadians","southWestLatitude","northEastLongitude","northEastLatitude","minTileKey","maxTileKey","columnCount","minColumn","maxColumn","minRow","maxRow","keys","SubTiles_1","m_subdivisionScheme","subTileMask","getSubdivisionX","getSubdivisionY","it","iterator","THREE","InterpolationMode","TextureCoordinateType","PoiStackMode","isTextureBuffer","buffer","QUANTIZED_MESH_HEADER","Float64Array","BYTES_PER_ELEMENT","Float32Array","decodeZigZag","decodeIndex","indicesCount","bytesPerIndex","encoded","indices","Uint16Array","Uint32Array","highest","decodeWaterMaskExtension","extensionDataView","byteOffset","byteLength","DECODING_STEPS","DEFAULT_OPTIONS","maxDecodingStep","decode","userOptions","assign","view","DataView","header","headerEndPosition","dataView","bytesCount","getFloat64","getFloat32","decodeHeader","vertexData","vertexDataEndPosition","vertexCount","getUint32","bytesPerArrayElement","elementArrayLength","uArrayStartPosition","vArrayStartPosition","heightArrayStartPosition","u","height","getUint16","decodeVertexData","triangleIndices","triangleIndicesEndPosition","triangleCount","triangleIndicesCount","decodeTriangleIndices","westIndices","southIndices","eastIndices","northIndices","edgeIndicesEndPosition","westVertexCount","southVertexCount","eastVertexCount","northVertexCount","decodeEdgeIndices","extensions","indicesEndPosition","extensionsEndPosition","extensionId","getUint8","Uint8Array","extensionLength","extensionView","vertexNormals","waterMask","decodeExtensions","QUANTIZED_MESH_TILE_DECODER_ID","resolve","positionAttributeArray","positionArray","filter","item","decodedTile","constructPositionArray","uvArray","constructUvArray","vertexAttributes","itemCount","metadata","array","verityTile","techniques","geometries","importScripts","WorkerServiceManager","TileDecoderService","QuantizedMeshTileDecoder","getInstance","register","serviceType","factory","index_decoder_1","ThemedTileDecoder","m_storageLevelOffset","m_styleSetEvaluator","decodeThemedTile","styleSet","languages","StyleSetEvaluator","storageLevelOffset","harp_utils_1","Expr_1","InterpolatedProperty_1","InterpolatedPropertyDefs_1","createInterpolatedProperty","prop","findIndex","splice","removeDuplicatePropertyValues","propKeys","propValues","interpolation","Discrete","replace","channels","j","m_renderOrderBiasGroups","m_techniques","techniqueRenderOrder","cloneStyle","style","styles","map","subStyle","computeDefaultRenderOrder","renderOrderBiasGroup","renderOrderBiasGroupOrder","renderOrderBiasRange","renderOrder","minRange","maxRange","abs","currStyle","technique","styleStack","processStyle","_index","when","_whenExpr","JSON","stringify","cleanupStyle","pop","createTechnique","final","addAttributes","transient","renderOrderBiasProperty","labelProperty","label","secondaryRenderOrder","attr","getOwnPropertyNames","addTechniqueToIndex","PriorityListGroup","priority","GroupedPriorityList","groups","element","getGroup","group","foundIndex","normalizedPriority","clear","otherGroup","findGroup","concat","clone","priorityList","sort","fun","n","LoggerManagerImpl_1","m_instance","LoggerManagerImpl","ConsoleChannel_1","Logger_1","WorkerChannel_1","m_loggers","channel","document","find","loggerName","found","config","MultiChannel","Math2D","distSquared","ax","ay","bx","by","Box","w","h","computeSquaredLineLength","line","squaredLineLength","xDiff","yDiff","distToSegmentSquared","px","py","l0x","l0y","l1x","l1y","lineLengthSuared","smoothStep","edge0","edge1","smootherStep","lerp","inMin","inMax","outMin","outMax","min2","max2","isClamped","lowerBound","upperBound","easeInOutCubic","startValue","endValue","time","applyMixins","derivedCtor","baseCtors","baseCtor","applyMixinsWithoutProperties","descriptor","getOwnPropertyDescriptor","assert","condition","assertExists","PerformanceTimer","nowFunc","performance","now","Date","getTime","getNowFunc","getOptionValue","candidate","mergeWithOptions","parameters","optionValue","customDefaultUrlResolver","defaultUrlResolver","url","setDefaultUrlResolver","resolver","composeUrlResolvers","resolvers","originalUrl","reduce","resolveReferenceUrl","parentUrl","childUrl","absoluteUrlWithOriginRe","test","getUrlOrigin","substr","baseUrl","RegExp","idx","lastIndexOf","parsed","getUrlHostAndProtocol","protocol","host","urlOriginRe","match","chainCallbacks","f1","f2","args","apply","isGeoCoordinatesLike","identityProjection","getLongitudeQuadrant","oneOverPI","quadrantIndex","lengthOfVector3","sqrt","makeBox3","halfEquatorialRadius","minLongitude","maxLongitude","minLongitudeQuadrant","maxLongitudeQuadrant","xMin","cos","xMax","yMin","yMax","cosMaxLongitude","sinMaxLongitude","xCenter","xExtent","yCenter","yExtent","minLatitude","maxLatutide","zMax","zMin","zCenter","zExtent","sphereProjection","Spherical","_minElevation","radius","worldpoint","cosLatitude","project","parallelRadiusSq","parallelRadius","atan2","bounds","mid","midX","midY","cosSouth","sinSouth","cosWest","sinWest","cosNorth","sinNorth","cosEast","sinEast","cosMidX","sinMidX","cosMidY","sinMidY","minY","maxY","rMax","rMin","minZ","_worldBox","scale","QuadTree","accept","visitTileKey","subTileKey","getSubTileKeys","EquirectangularProjection_1","HalfQuadTreeSubdivisionScheme_1","TilingScheme_1","hereTilingScheme","WebMercatorProjection_1","QuadTreeSubdivisionScheme_1","webMercatorTilingScheme","mercatorTilingScheme","isVector3Like","addExtrudedWalls","indexBuffer","vertexOffset","vertexStride","contour","contourEdges","boundaryWalls","nSegments","vFootprint0","vRoof0","vFootprint1","vRoof1","currEdgeStart","Vector2","currEdgeGoal","prevEdgeStart","prevEdgeGoal","addPolygonEdges","polygonContour","polygonContourEdges","isExtruded","addFootprintEdges","wallEdgeSlope","prevEdgeIdx","v0x","v0y","v1x","v1y","normalize","dot","vFoot0","WorkerService_1","m_decoder","connect","decoder","WorkerDecoderProtocol","isDecodeTileRequest","handleDecodeTileRequest","isTileInfoRequest","handleTileInfoRequest","isConfigurationMessage","handleConfigurationMessage","getProjection","decodeTile","geom","ArrayBuffer","addBuffersToTransferList","getTileInfo","tileInfo","configure","TechniqueParams_1","isExtrudedLineTechnique","isStandardExtrudedLineTechnique","shading","isExtrudedPolygonTechnique","isStandardTechnique","isTerrainTechnique","TEXTURE_PROPERTY_KEYS","isCirclesTechnique","isSquaresTechnique","isPoiTechnique","isLineMarkerTechnique","isDashedLineTechnique","isLineTechnique","isSolidLineTechnique","isSegmentsTechnique","isBasicExtrudedLineTechnique","isFillTechnique","isTextTechnique","isShaderTechnique","needsVertexNormals","textureCoordinateType","texturePropertyKey","textureProperty","Requests","WORKER_SERVICE_MANAGER_SERVICE_ID","Request","isResponseMessage","WorkerTilerProtocol","isRegisterIndexRequest","RegisterIndex","isTileRequest","TileRequest","RequestController","abortController","AbortController","signal","abort","DecoderMessageName","Configuration","DecodeTileRequest","TileInfoRequest","getArrayConstructor","GeometryType","projectionName","getProjectionName","FeatureGroup","storeExtendedTags","startSize","featureIds","numFeatures","numPositions","techniqueIndex","textIndex","positionIndex","positions","layerIndex","classIndex","typeIndex","LineFeatureGroup","arguments","userData","getNumBytes","segmentIds","segmentStartOffsets","segmentEndOffsets","PolygonFeatureGroup","groupNumRings","outerRingStartIndex","innerRingIsOuterContour","innerRingStartIndex","ExtendedTileInfo","textCatalog","techniqueCatalog","setupTime","numBytes","pointGroup","lineGroup","polygonGroup","layerCatalog","classCatalog","typeCatalog","str","finishFeatureGroup","featureGroup","featureGroupFinished","finish","featureGroupSize","tileInfoFinished","getFeatureName","useAbbreviation","useIsoCode","abbreviation","isoCode","lang","ExtendedTileInfoWriter","techniqueIndexMap","stringMap","layerMap","classMap","typeMap","infoTileTechniqueIndex","storedTechnique","featureId","isPolygonGroup","textTechnique","textLabel","stringIndex","addText","addLayer","addClass","addType","points","l","segmentId","startOffset","endOffset","isOuterRing","addStringValue","catalog","ExtendedTileInfoVisitor","handler","visitAllPointFeatures","visitAllLineFeatures","visitAllPolygonFeatures","numFeaturesFound","numPointFeatures","pointFeatures","visitPointFeature","numLineFeatures","lineFeatures","visitLineFeature","numPolygonFeatures","polygonsFeatures","visitPolygonFeature","featureIndex","acceptPoint","getTag","lines","positionsStart","numPointValues","acceptLine","acceptPolygon","polygons","ringStart","numRings","polygonAccessor","setup","reset","ringIndex","pointsStart","ThemeVisitor","theme","visitFunc","visit","styleSetName","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","done","geojsonvt","TilerService","m_tileIndexMap","handleRegisterIndexRequest","handleTileRequest","tileIndex","getTile","id","json","input","fetch","ok","statusText","default","maxZoom","indexMaxZoom","indexMaxPoints","tolerance","extent","lineMetrics","promoteId","generateId","m_factories","m_services","m_service","workerServiceDescriptor","CreateService","targetServiceId","targetServiceType","DestroyService","destroy","getSqSegDist","dx","dy","createFeature","tags","feature","geometry","minX","maxX","calcLineBBox","calcBBox","convertFeature","features","geojson","coords","coordinates","properties","convertPoint","convertLine","convertLines","polygon","out","projectX","projectY","ring","isPolygon","x0","y0","size","last","simplify","first","sqTolerance","maxSqDist","minPosToMid","posToMid","end","rings","y2","clip","k1","k2","axis","minAll","maxAll","clipped","newGeometry","clipPoints","clipLine","clipLines","newGeom","trackMetrics","segLen","newSlice","intersect","intersectX","intersectY","len","az","exited","addPoint","shiftFeatureCoords","offset","newFeatures","shiftCoords","newPolygon","k","newPoints","transformTile","tile","transformed","z2","tx","ty","transformPoint","round","createTile","numPoints","numSimplified","source","addFeature","simplified","addLine","tileFeature","isOuter","clockwise","area","rewind","GeoJSONVT","dest","src","extend","convert","tiles","tileCoords","timeEnd","stats","total","merged","splitTile","toID","cz","stack","tl","bl","tr","br","k3","k4","z0"],"mappings":"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","file":"quantized-mesh-decoder.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 32);\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst RAD2DEG = 180.0 / Math.PI;\nconst DEG2RAD = Math.PI / 180.0;\n/**\n * `GeoCoordinates` is used to represent geo positions.\n */\nclass GeoCoordinates {\n    /**\n     * Creates a `GeoCoordinates` from the given latitude, longitude, and optional altitude.\n     *\n     * @param latitude Latitude in degrees.\n     * @param longitude Longitude in degrees.\n     * @param altitude Altitude in meters.\n     */\n    constructor(latitude, longitude, altitude) {\n        this.latitude = latitude;\n        this.longitude = longitude;\n        this.altitude = altitude;\n    }\n    /**\n     * Returns a `GeoCoordinates` from the given latitude, longitude, and optional altitude.\n     *\n     * @param latitude Latitude in degrees.\n     * @param longitude Longitude in degrees.\n     * @param altitude Altitude in meters.\n     */\n    static fromDegrees(latitude, longitude, altitude) {\n        return new GeoCoordinates(latitude, longitude, altitude);\n    }\n    /**\n     * Returns a `GeoCoordinates` from the given latitude, longitude, and optional altitude.\n     *\n     * @param latitude Latitude in radians.\n     * @param longitude Longitude in radians.\n     * @param altitude Altitude in meters.\n     */\n    static fromRadians(latitude, longitude, altitude) {\n        return new GeoCoordinates(latitude * RAD2DEG, longitude * RAD2DEG, altitude);\n    }\n    /**\n     * Returns the latitude in radians.\n     */\n    get latitudeInRadians() {\n        return this.latitude * DEG2RAD;\n    }\n    /**\n     * Returns the longitude in radians.\n     */\n    get longitudeInRadians() {\n        return this.longitude * DEG2RAD;\n    }\n    /**\n     * Returns the latitude in degrees.\n     * @deprecated Use the [[latitude]] property instead.\n     */\n    get latitudeInDegrees() {\n        return this.latitude;\n    } // compat api\n    /**\n     * Returns the longitude in degrees.\n     * @deprecated Use the [[longitude]] property instead.\n     */\n    get longitudeInDegrees() {\n        return this.longitude;\n    } // compat api\n    /**\n     * Returns `true` if this `GeoCoordinates` is valid; returns `false` otherwise.\n     */\n    isValid() {\n        return !isNaN(this.latitude) && !isNaN(this.longitude);\n    }\n    /**\n     * Returns the normalized `GeoCoordinates`.\n     */\n    normalized() {\n        let { latitude, longitude } = this;\n        if (isNaN(latitude) || isNaN(longitude)) {\n            return this;\n        }\n        if (latitude > 90) {\n            let wrapped = (latitude + 90) % 360;\n            if (wrapped >= 180) {\n                longitude += 180;\n                wrapped = 360 - wrapped;\n            }\n            latitude = wrapped - 90;\n        }\n        if (latitude < -90) {\n            let wrapped = (latitude - 90) % 360;\n            if (wrapped <= -180) {\n                longitude += 180;\n                wrapped = -360 - wrapped;\n            }\n            latitude = wrapped + 90;\n        }\n        if (longitude < -180 || longitude > 180) {\n            longitude = ((longitude + 180) % 360) - 180;\n        }\n        if (latitude === this.latitude && longitude === this.longitude) {\n            return this;\n        }\n        return new GeoCoordinates(latitude, longitude, this.altitude);\n    }\n    /**\n     * Returns `true` if this `GeoCoordinates` is equal to the other.\n     *\n     * @param other GeoCoordinatesLike to compare to.\n     */\n    equals(other) {\n        return (this.latitude === other.latitude &&\n            this.longitude === other.longitude &&\n            this.altitude === other.altitude);\n    }\n    /**\n     * Copy values from the other.\n     *\n     * @param other GeoCoordinatesLike to copy all values from.\n     */\n    copy(other) {\n        this.latitude = other.latitude;\n        this.longitude = other.longitude;\n        this.altitude = other.altitude;\n        return this;\n    }\n    /**\n     * Clones this `GeoCoordinates`.\n     * @deprecated\n     */\n    clone() {\n        return new GeoCoordinates(this.latitude, this.longitude, this.altitude);\n    }\n}\nexports.GeoCoordinates = GeoCoordinates;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\nvar MathUtils;\n(function (MathUtils) {\n    /**\n     * Creates a new empty bounding box.\n     */\n    function newEmptyBox3() {\n        return {\n            min: { x: Infinity, y: Infinity, z: Infinity },\n            max: { x: -Infinity, y: -Infinity, z: -Infinity }\n        };\n    }\n    MathUtils.newEmptyBox3 = newEmptyBox3;\n    /**\n     * Set the components of the given [Vector3Like] instance.\n     *\n     * @param x The x component.\n     * @param y The y component.\n     * @param z The z component.\n     * @param v The [Vector3Like]\n     */\n    function newVector3(x, y, z, v) {\n        if (v === undefined) {\n            return { x, y, z };\n        }\n        v.x = x;\n        v.y = y;\n        v.z = z;\n        return v;\n    }\n    MathUtils.newVector3 = newVector3;\n    /**\n     * Converts an angle measured in degrees to an equivalent value in radians.\n     *\n     * @param degrees Value in degrees.\n     * @returns Value in radians.\n     */\n    function degToRad(degrees) {\n        return degrees * DEG2RAD;\n    }\n    MathUtils.degToRad = degToRad;\n    /**\n     * Converts an angle measured in radians to an equivalent value in degrees.\n     *\n     * @param degrees Value in radians.\n     * @returns Value in degrees.\n     */\n    function radToDeg(radians) {\n        return radians * RAD2DEG;\n    }\n    MathUtils.radToDeg = radToDeg;\n    /**\n     * Ensures that input value fits in a given range.\n     *\n     * @param value The value to be clamped.\n     * @param min Minimum value.\n     * @param max Maximum value.\n     * @returns Clamped value.\n     */\n    function clamp(value, min, max) {\n        return value < min ? min : value > max ? max : value;\n    }\n    MathUtils.clamp = clamp;\n    /**\n     * Normalize angle in degrees to range `[0, 360)`.\n     *\n     * @param a Angle in degrees.\n     * @returns Angle in degrees in range `[0, 360)`.\n     */\n    function normalizeAngleDeg(a) {\n        a = a % 360;\n        if (a < 0) {\n            a = a + 360;\n        }\n        return a;\n    }\n    MathUtils.normalizeAngleDeg = normalizeAngleDeg;\n    /**\n     * Return the minimal delta between angles `a` and `b` given in degrees.\n     *\n     * Equivalent to `a - b` in coordinate space with exception vector direction can be reversed\n     * that if `abs(a-b) > 180` because trip is shorter in 'other' direction.\n     *\n     * Useful when interpolating between `b` and `a` in angle space.\n     *\n     * @param a Start angle in degrees.\n     * @param b End angle in degrees.\n     * @returns Angle that that satisfies condition `a - b - d = 0` in angle space.\n     */\n    function angleDistanceDeg(a, b) {\n        a = normalizeAngleDeg(a);\n        b = normalizeAngleDeg(b);\n        const d = a - b;\n        if (d > 180) {\n            return d - 360;\n        }\n        else if (d <= -180) {\n            return d + 360;\n        }\n        else {\n            return d;\n        }\n    }\n    MathUtils.angleDistanceDeg = angleDistanceDeg;\n    /**\n     * Interpolate linearly between two angles given in degrees.\n     *\n     * @param p0 Angle from in degrees\n     * @param p1 Angle to in degrees\n     * @param t Interpolation factor (alpha), in range `0-1`.\n     */\n    function interpolateAnglesDeg(p0, p1, t) {\n        // hand crafted version,\n        // see stack for maybe better versions:\n        //    https://stackoverflow.com/questions/2708476/rotation-interpolation\n        const d = angleDistanceDeg(p1, p0);\n        const r = (p0 + d * t) % 360;\n        return r;\n    }\n    MathUtils.interpolateAnglesDeg = interpolateAnglesDeg;\n})(MathUtils = exports.MathUtils || (exports.MathUtils = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Returns true if the given object implements the interface [[OrientedBox3Like]].\n *\n * @param object The object.\n */\nfunction isOrientedBox3Like(object) {\n    const obb = object;\n    return (obb.position !== undefined &&\n        obb.xAxis !== undefined &&\n        obb.yAxis !== undefined &&\n        obb.zAxis !== undefined &&\n        obb.extents !== undefined);\n}\nexports.isOrientedBox3Like = isOrientedBox3Like;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/GroupedPriorityList\"));\n__export(require(\"./lib/Logger\"));\n__export(require(\"./lib/Math2D\"));\n__export(require(\"./lib/MathUtils\"));\n__export(require(\"./lib/Mixins\"));\n__export(require(\"./lib/assert\"));\n__export(require(\"./lib/PerformanceTimer\"));\n__export(require(\"./lib/OptionsUtils\"));\n__export(require(\"./lib/UrlResolver\"));\n__export(require(\"./lib/UrlUtils\"));\n__export(require(\"./lib/Functions\"));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GeoCoordinates_1 = require(\"./GeoCoordinates\");\nconst DEG2RAD = Math.PI / 180;\n/**\n * `GeoBox` is used to represent a bounding box in geo coordinates.\n */\nclass GeoBox {\n    /**\n     * Constructs a new `GeoBox` with the given geo coordinates.\n     *\n     * @param southWest The south west position in geo coordinates.\n     * @param northEast The north east position in geo coordinates.\n     */\n    constructor(southWest, northEast) {\n        this.southWest = southWest;\n        this.northEast = northEast;\n    }\n    /**\n     * Returns a `GeoBox` with the given geo coordinates.\n     *\n     * @param southWest The south west position in geo coordinates.\n     * @param northEast The north east position in geo coordinates.\n     */\n    static fromCoordinates(southWest, northEast) {\n        return new GeoBox(southWest, northEast);\n    }\n    /**\n     * Returns the minimum altitude or `undefined`.\n     */\n    get minAltitude() {\n        if (this.southWest.altitude === undefined || this.northEast.altitude === undefined) {\n            return undefined;\n        }\n        return Math.min(this.southWest.altitude, this.northEast.altitude);\n    }\n    /**\n     * Returns the maximum altitude or `undefined`.\n     */\n    get maxAltitude() {\n        if (this.southWest.altitude === undefined || this.northEast.altitude === undefined) {\n            return undefined;\n        }\n        return Math.max(this.southWest.altitude, this.northEast.altitude);\n    }\n    /**\n     * Returns the south latitude in degrees of this `GeoBox`.\n     */\n    get south() {\n        return this.southWest.latitude;\n    }\n    /**\n     * Returns the north altitude in degrees of this `GeoBox`.\n     */\n    get north() {\n        return this.northEast.latitude;\n    }\n    /**\n     * Returns the west longitude in degrees of this `GeoBox`.\n     */\n    get west() {\n        return this.southWest.longitude;\n    }\n    /**\n     * Returns the east longitude in degrees of this `GeoBox`.\n     */\n    get east() {\n        return this.northEast.longitude;\n    }\n    /**\n     * Returns the center of this `GeoBox`.\n     */\n    get center() {\n        const latitude = (this.south + this.north) * 0.5;\n        const { west, east } = this;\n        const { minAltitude, altitudeSpan } = this;\n        let altitude;\n        if (minAltitude !== undefined && altitudeSpan !== undefined) {\n            altitude = minAltitude + altitudeSpan * 0.5;\n        }\n        if (west < east) {\n            return new GeoCoordinates_1.GeoCoordinates(latitude, (west + east) * 0.5, altitude);\n        }\n        let longitude = (360 + east + west) * 0.5;\n        if (longitude > 360) {\n            longitude -= 360;\n        }\n        return new GeoCoordinates_1.GeoCoordinates(latitude, longitude, altitude);\n    }\n    /**\n     * Returns the latitude span in radians.\n     */\n    get latitudeSpanInRadians() {\n        return this.latitudeSpan * DEG2RAD;\n    }\n    /**\n     * Returns the longitude span in radians.\n     */\n    get longitudeSpanInRadians() {\n        return this.longitudeSpan * DEG2RAD;\n    }\n    /**\n     * Returns the latitude span in degrees.\n     */\n    get latitudeSpan() {\n        return this.north - this.south;\n    }\n    get altitudeSpan() {\n        if (this.maxAltitude === undefined || this.minAltitude === undefined) {\n            return undefined;\n        }\n        return this.maxAltitude - this.minAltitude;\n    }\n    /**\n     * Returns the longitude span in degrees.\n     */\n    get longitudeSpan() {\n        let width = this.northEast.longitude - this.southWest.longitude;\n        if (width < 0) {\n            width += 360;\n        }\n        return width;\n    }\n    /**\n     * Returns the latitude span in degrees.\n     * @deprecated Use [[latitudeSpan]] instead.\n     */\n    get latitudeSpanInDegrees() {\n        return this.latitudeSpan;\n    }\n    /**\n     * Returns the longitude span in degrees.\n     * @deprecated Use [[longitudeSpan]] instead.\n     */\n    get longitudeSpanInDegrees() {\n        return this.longitudeSpan;\n    }\n    /**\n     * Returns `true` if the given geo coordinates are contained in this `GeoBox`.\n     *\n     * @param point The geo coordinates.\n     */\n    contains(point) {\n        if (point.altitude === undefined ||\n            this.minAltitude === undefined ||\n            this.maxAltitude === undefined) {\n            return this.containsHelper(point);\n        }\n        const isFlat = this.minAltitude === this.maxAltitude;\n        const isSameAltitude = this.minAltitude === point.altitude;\n        const isWithinAltitudeRange = this.minAltitude <= point.altitude && this.maxAltitude > point.altitude;\n        // If box is flat, we should check the altitude and containment,\n        // otherwise we should check also altitude difference where we consider\n        // point to be inside if alt is from [m_minAltitude, m_maxAltitude) range!\n        if (isFlat ? isSameAltitude : isWithinAltitudeRange) {\n            return this.containsHelper(point);\n        }\n        return false;\n    }\n    /**\n     * Clones this `GeoBox` instance.\n     */\n    clone() {\n        return new GeoBox(this.southWest, this.northEast);\n    }\n    /**\n     * Update the bounding box by considering a given point.\n     *\n     * @param point The point that may expand the bounding box.\n     */\n    growToContain(point) {\n        this.southWest.latitude = Math.min(this.southWest.latitude, point.latitude);\n        this.southWest.longitude = Math.min(this.southWest.longitude, point.longitude);\n        this.southWest.altitude =\n            this.southWest.altitude !== undefined && point.altitude !== undefined\n                ? Math.min(this.southWest.altitude, point.altitude)\n                : this.southWest.altitude !== undefined\n                    ? this.southWest.altitude\n                    : point.altitude !== undefined\n                        ? point.altitude\n                        : undefined;\n        this.northEast.latitude = Math.max(this.northEast.latitude, point.latitude);\n        this.northEast.longitude = Math.max(this.northEast.longitude, point.longitude);\n        this.northEast.altitude =\n            this.northEast.altitude !== undefined && point.altitude !== undefined\n                ? Math.max(this.northEast.altitude, point.altitude)\n                : this.northEast.altitude !== undefined\n                    ? this.northEast.altitude\n                    : point.altitude !== undefined\n                        ? point.altitude\n                        : undefined;\n    }\n    containsHelper(point) {\n        if (point.latitude < this.southWest.latitude || point.latitude >= this.northEast.latitude) {\n            return false;\n        }\n        const { west, east } = this;\n        if (east > west) {\n            return point.longitude >= west && point.longitude < east;\n        }\n        return point.longitude > east || point.longitude <= west;\n    }\n}\nexports.GeoBox = GeoBox;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Returns true if the given object implements the [[Box3Like]] interface.\n *\n * @param object A valid object.\n */\nfunction isBox3Like(object) {\n    const box3 = object;\n    return box3.min !== undefined && box3.max !== undefined;\n}\nexports.isBox3Like = isBox3Like;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The type of projection.\n */\nvar ProjectionType;\n(function (ProjectionType) {\n    /**\n     * A type of [Projection] with zero curvature.\n     */\n    ProjectionType[ProjectionType[\"Planar\"] = 0] = \"Planar\";\n    /**\n     * A spherical [Projection].\n     */\n    ProjectionType[ProjectionType[\"Spherical\"] = 1] = \"Spherical\";\n})(ProjectionType = exports.ProjectionType || (exports.ProjectionType = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/coordinates/GeoBox\"));\n__export(require(\"./lib/coordinates/GeoCoordinatesLike\"));\n__export(require(\"./lib/coordinates/GeoCoordinates\"));\n__export(require(\"./lib/projection/EarthConstants\"));\n__export(require(\"./lib/projection/EquirectangularProjection\"));\n__export(require(\"./lib/projection/IdentityProjection\"));\n__export(require(\"./lib/projection/Projection\"));\n__export(require(\"./lib/projection/MercatorProjection\"));\n__export(require(\"./lib/projection/WebMercatorProjection\"));\n__export(require(\"./lib/projection/SphereProjection\"));\n__export(require(\"./lib/tiling/FlatTileBoundingBoxGenerator\"));\n__export(require(\"./lib/tiling/HalfQuadTreeSubdivisionScheme\"));\n__export(require(\"./lib/tiling/QuadTreeSubdivisionScheme\"));\n__export(require(\"./lib/tiling/QuadTree\"));\n__export(require(\"./lib/tiling/SubTiles\"));\n__export(require(\"./lib/tiling/TileKey\"));\n__export(require(\"./lib/tiling/TileKeyUtils\"));\n__export(require(\"./lib/tiling/TileTreeTraverse\"));\n__export(require(\"./lib/tiling/TilingScheme\"));\n__export(require(\"./lib/tiling/HereTilingScheme\"));\n__export(require(\"./lib/tiling/WebMercatorTilingScheme\"));\n__export(require(\"./lib/tiling/MercatorTilingScheme\"));\n__export(require(\"./lib/math/Vector3Like\"));\n__export(require(\"./lib/math/Box3Like\"));\n__export(require(\"./lib/math/OrientedBox3Like\"));\n__export(require(\"./lib/math/MathUtils\"));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass EarthConstants {\n}\n/** The equatorial circumference in meters. */\nEarthConstants.EQUATORIAL_CIRCUMFERENCE = 40075016.6855784861531768177614;\n/** The equatorial radius in meters. */\nEarthConstants.EQUATORIAL_RADIUS = 6378137.0;\n/** The lowest point on earth (Dead Sea) in meters. */\nEarthConstants.MIN_ELEVATION = -433.0;\n/** The highest point on earth (Mt. Everest) in meters. */\nEarthConstants.MAX_ELEVATION = 8848.0;\nexports.EarthConstants = EarthConstants;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @hidden */\nconst powerOfTwo = [\n    0x1,\n    0x2,\n    0x4,\n    0x8,\n    0x10,\n    0x20,\n    0x40,\n    0x80,\n    0x100,\n    0x200,\n    0x400,\n    0x800,\n    0x1000,\n    0x2000,\n    0x4000,\n    0x8000,\n    0x10000,\n    0x20000,\n    0x40000,\n    0x80000,\n    0x100000,\n    0x200000,\n    0x400000,\n    0x800000,\n    0x1000000,\n    0x2000000,\n    0x4000000,\n    0x8000000,\n    0x10000000,\n    0x20000000,\n    0x40000000,\n    0x80000000,\n    0x100000000,\n    0x200000000,\n    0x400000000,\n    0x800000000,\n    0x1000000000,\n    0x2000000000,\n    0x4000000000,\n    0x8000000000,\n    0x10000000000,\n    0x20000000000,\n    0x40000000000,\n    0x80000000000,\n    0x100000000000,\n    0x200000000000,\n    0x400000000000,\n    0x800000000000,\n    0x1000000000000,\n    0x2000000000000,\n    0x4000000000000,\n    0x8000000000000,\n    0x10000000000000 // Math.pow(2, 52), highest bit that can be set correctly.\n];\n/**\n * The `TileKey` instances are used to address a tile in a quadtree.\n *\n * A tile key is defined by a row, a column, and a level. The tree has a root at level 0, with one\n * single tile. On every level, each tile is divided into four children (therefore the name\n * quadtree).\n *\n * Within each [[level]], any particular tile is addressed with [[row]] and [[column]]. The number\n * of rows and columns in each level is 2 to the power of the level. This means: On level 0, only\n * one tile exists, [[columnsAtLevel]]() and [[rowsAtLevel]]() are both 1. On level 1, 4 tiles\n * exist, in 2 rows and 2 columns. On level 2 we have 16 tiles, in 4 rows and 4 columns. And so on.\n *\n * A tile key is usually created using [[fromRowColumnLevel]]() method.\n *\n * `TileKey` instances are immutable, all members return new instances of `TileKey` and do not\n * modify the original object.\n *\n * Utility functions like [[parent]](), [[changedLevelBy]](), and [[changedLevelTo]]() allow for\n * easy vertical navigation of the tree. The number of available rows and columns in the tile's\n * level is given with [[rowCount]]() and [[columnCount]]().\n *\n * Tile keys can be created from and converted into various alternative formats:\n *\n *  - [[toQuadKey]]() / [[fromQuadKey]]() - string representation 4-based\n *  - [[toHereTile]]() / [[fromHereTile]]() - string representation 10-based\n *  - [[mortonCode]]() / [[fromMortonCode]]() - number representation\n *\n * Note - as JavaScript's number type can hold 53 bits in its mantissa, only levels up to 26 can be\n * represented in the number representation returned by [[mortonCode]]().\n */\nclass TileKey {\n    /**\n     * Constructs a new immutable instance of a `TileKey`.\n     *\n     * For the better readability, [[TileKey.fromRowColumnLevel]] should be preferred.\n     *\n     * Note - row and column must not be greater than the maximum rows/columns for the given level.\n     *\n     * @param row Represents the row in the quadtree.\n     * @param column Represents the column in the quadtree.\n     * @param level Represents the level in the quadtree.\n     */\n    constructor(row, column, level) {\n        this.row = row;\n        this.column = column;\n        this.level = level;\n    }\n    /**\n     * Creates a tile key.\n     *\n     * @param row The requested row. Must be less than 2 to the power of level.\n     * @param column The requested column. Must be less than 2 to the power of level.\n     * @param level The requested level.\n     */\n    static fromRowColumnLevel(row, column, level) {\n        return new TileKey(row, column, level);\n    }\n    /**\n     * Creates a tile key from a quad string.\n     *\n     * The quad string can be created with [[toQuadKey]].\n     *\n     * @param quadkey The quadkey to convert.\n     * @returns A new instance of `TileKey`.\n     */\n    static fromQuadKey(quadkey) {\n        const level = quadkey.length;\n        let row = 0;\n        let column = 0;\n        // tslint:disable:no-bitwise\n        for (let i = 0; i < quadkey.length; ++i) {\n            const mask = 1 << i;\n            const d = parseInt(quadkey.charAt(level - i - 1), 10);\n            if (d & 0x1) {\n                column |= mask;\n            }\n            if (d & 0x2) {\n                row |= mask;\n            }\n        }\n        // tslint:enable:no-bitwise\n        return TileKey.fromRowColumnLevel(row, column, level);\n    }\n    /**\n     * Creates a tile key from a numeric Morton code representation.\n     *\n     * You can convert a tile key into a numeric Morton code with [[mortonCode]].\n     *\n     * @param quadKey64 The Morton code to be converted.\n     * @returns A new instance of [[TileKey]].\n     */\n    static fromMortonCode(quadKey64) {\n        let level = 0;\n        let row = 0;\n        let column = 0;\n        let quadKey = quadKey64;\n        // tslint:disable:no-bitwise\n        while (quadKey > 1) {\n            const mask = 1 << level;\n            if (quadKey & 0x1) {\n                column |= mask;\n            }\n            if (quadKey & 0x2) {\n                row |= mask;\n            }\n            level++;\n            quadKey = (quadKey - (quadKey & 0x3)) / 4;\n        }\n        // tslint:enable:no-bitwise\n        const result = TileKey.fromRowColumnLevel(row, column, level);\n        result.m_mortonCode = quadKey64;\n        return result;\n    }\n    /**\n     * Creates a tile key from a heretile code string.\n     *\n     * The string can be created with [[toHereTile]].\n     *\n     * @param quadkey64 The string representation of the HERE tile key.\n     * @returns A new instance of `TileKey`.\n     */\n    static fromHereTile(quadkey64) {\n        const result = TileKey.fromMortonCode(parseInt(quadkey64, 10));\n        result.m_hereTile = quadkey64;\n        return result;\n    }\n    /**\n     * Returns the number of available columns at a given level.\n     *\n     * This is 2 to the power of the level.\n     *\n     * @param level The level for which to return the number of columns.\n     * @returns The available columns at the given level.\n     */\n    static columnsAtLevel(level) {\n        return Math.pow(2, level);\n    }\n    /**\n     * Returns the number of available rows at a given level.\n     *\n     * This is 2 to the power of the level.\n     *\n     * @param level The level for which to return the number of rows.\n     * @returns The available rows at the given level.\n     */\n    static rowsAtLevel(level) {\n        return Math.pow(2, level);\n    }\n    /**\n     * Returns the closest matching `TileKey` in a cartesian coordinate system.\n     *\n     * @param level The level for the tile key.\n     * @param coordX The X coordinate.\n     * @param coordY The Y coordinate.\n     * @param totalWidth The maximum X coordinate.\n     * @param totalHeight The maximum Y coordinate.\n     * @returns A new tile key at the given level that includes the given coordinates.\n     */\n    static atCoords(level, coordX, coordY, totalWidth, totalHeight) {\n        return TileKey.fromRowColumnLevel(Math.floor(coordY / (totalHeight / TileKey.rowsAtLevel(level))), Math.floor(coordX / (totalWidth / TileKey.columnsAtLevel(level))), level);\n    }\n    /**\n     * Computes the Morton code of the parent tile key of the given Morton code.\n     *\n     * Note: The parent key of the root key is the root key itself.\n     *\n     * @param mortonCode A Morton code, for example, obtained from [[mortonCode]].\n     * @returns The Morton code of the parent tile.\n     */\n    static parentMortonCode(mortonCode) {\n        return Math.floor(mortonCode / 4);\n    }\n    /**\n     * Returns a tile key representing the parent of the tile addressed by this tile key.\n     *\n     * Throws an exception is this tile is already the root.\n     */\n    parent() {\n        if (this.level === 0) {\n            throw new Error(\"Cannot get the parent of the root tile key\");\n        }\n        // tslint:disable-next-line:no-bitwise\n        return TileKey.fromRowColumnLevel(this.row >>> 1, this.column >>> 1, this.level - 1);\n    }\n    /**\n     * Returns a new tile key at a level that differs from this tile's level by delta.\n     *\n     * Equivalent to `changedLevelTo(level() + delta)`.\n     *\n     * Note - root key is returned if `delta` is smaller than the level of this tile key.\n     *\n     * @param delta The numeric difference between the current level and the requested level.\n     */\n    changedLevelBy(delta) {\n        const level = Math.max(0, this.level + delta);\n        let row = this.row;\n        let column = this.column;\n        // tslint:disable:no-bitwise\n        if (delta >= 0) {\n            row <<= delta;\n            column <<= delta;\n        }\n        else {\n            row >>>= -delta;\n            column >>>= -delta;\n        }\n        // tslint:enable:no-bitwise\n        return TileKey.fromRowColumnLevel(row, column, level);\n    }\n    /**\n     * Returns a new tile key at the requested level.\n     *\n     * If the requested level is smaller than the tile's level, then the key of an ancestor of this\n     * tile is returned. If the requested level is larger than the tile's level, then the key of\n     * first child or grandchild of this tile is returned, for example, the child with the lowest\n     * row and column number. If the requested level equals this tile's level, then the tile key\n     * itself is returned. If the requested level is negative, the root tile key is returned.\n     *\n     * @param level The requested level.\n     */\n    changedLevelTo(level) {\n        return this.changedLevelBy(level - this.level);\n    }\n    /**\n     * Converts the tile key to a numeric code representation.\n     *\n     * You can create a tile key from a numeric Morton code with [[fromMortonCode]].\n     *\n     * Note - only levels <= 26 are supported.\n     */\n    mortonCode() {\n        if (this.m_mortonCode === undefined) {\n            let column = this.column;\n            let row = this.row;\n            // tslint:disable:no-bitwise\n            let result = powerOfTwo[this.level << 1];\n            for (let i = 0; i < this.level; ++i) {\n                if (column & 0x1) {\n                    result += powerOfTwo[2 * i];\n                }\n                if (row & 0x1) {\n                    result += powerOfTwo[2 * i + 1];\n                }\n                column >>>= 1;\n                row >>>= 1;\n            }\n            // tslint:enable:no-bitwise\n            this.m_mortonCode = result;\n        }\n        return this.m_mortonCode;\n    }\n    /**\n     * Converts the tile key into a string for using in REST API calls.\n     *\n     * The string is a quadkey Morton code representation as a string.\n     *\n     * You can convert back from a quadkey string with [[fromHereTile]].\n     */\n    toHereTile() {\n        if (this.m_hereTile === undefined) {\n            this.m_hereTile = this.mortonCode().toString();\n        }\n        return this.m_hereTile;\n    }\n    /**\n     * Converts the tile key into a string for using in REST API calls.\n     *\n     * If the tile is the root tile, the quadkey is '-'. Otherwise the string is a number to the\n     * base of 4, but without the leading 1, with the following properties:\n     *  1. the number of digits equals the level.\n     *  2. removing the last digit gives the parent tile's quadkey string, i.e. appending 0,1,2,3\n     *     to a quadkey string gives the tiles's children.\n     *\n     * You can convert back from a quadkey string with [[fromQuadKey]].\n     */\n    toQuadKey() {\n        let result = \"\";\n        // tslint:disable:no-bitwise\n        for (let i = this.level; i > 0; --i) {\n            const mask = 1 << (i - 1);\n            const col = (this.column & mask) !== 0;\n            const row = (this.row & mask) !== 0;\n            if (col && row) {\n                result += \"3\";\n            }\n            else if (row) {\n                result += \"2\";\n            }\n            else if (col) {\n                result += \"1\";\n            }\n            else {\n                result += \"0\";\n            }\n        }\n        // tslint:enable:no-bitwise\n        return result;\n    }\n    /**\n     * Equality operator.\n     *\n     * @param qnr The tile key to compare to.\n     * @returns `true` if this tile key has identical row, column and level, `false` otherwise.\n     */\n    equals(qnr) {\n        return this.row === qnr.row && this.column === qnr.column && this.level === qnr.level;\n    }\n    /**\n     * Returns the absolute quadkey that is constructed from its sub quadkey.\n     *\n     * @param sub The sub key.\n     * @returns The absolute tile key in the quadtree.\n     */\n    addedSubKey(sub) {\n        const subQuad = TileKey.fromQuadKey(sub.length === 0 ? \"-\" : sub);\n        const child = this.changedLevelBy(subQuad.level);\n        return TileKey.fromRowColumnLevel(child.row + subQuad.row, child.column + subQuad.column, child.level);\n    }\n    /**\n     * Returns the absolute quadkey that is constructed from its sub HERE tile key.\n     *\n     * @param sub The sub HERE key.\n     * @returns The absolute tile key in the quadtree.\n     */\n    addedSubHereTile(sub) {\n        const subQuad = TileKey.fromHereTile(sub);\n        const child = this.changedLevelBy(subQuad.level);\n        return TileKey.fromRowColumnLevel(child.row + subQuad.row, child.column + subQuad.column, child.level);\n    }\n    /**\n     * Returns a sub quadkey that is relative to its parent.\n     *\n     * This function can be used to generate sub keys that are relative to a parent that is delta\n     * levels up in the quadtree.\n     *\n     * This function can be used to create shortened keys for quads on lower levels if the parent is\n     * known.\n     *\n     * Note - the sub quadkeys fit in a 16-bit unsigned integer if the `delta` is smaller than 8. If\n     * `delta` is smaller than 16, the sub quadkey fits into an unsigned 32-bit integer.\n     *\n     * Deltas larger than 16 are not supported.\n     *\n     * @param delta The number of levels relative to its parent quadkey. Must be greater or equal to\n     * 0 and smaller than 16.\n     * @returns The quadkey relative to its parent that is `delta` levels up the tree.\n     */\n    getSubHereTile(delta) {\n        const key = this.mortonCode();\n        // tslint:disable-next-line:no-bitwise\n        const msb = 1 << (delta * 2);\n        const mask = msb - 1;\n        // tslint:disable-next-line:no-bitwise\n        const result = (key & mask) | msb;\n        return result.toString();\n    }\n    /**\n     * Returns the number of available rows in the tile's [[level]].\n     *\n     * This is 2 to the power of the level.\n     */\n    rowCount() {\n        return TileKey.rowsAtLevel(this.level);\n    }\n    /**\n     * Returns the number of available columns in the tile's [[level]].\n     *\n     * This is 2 to the power of the level.\n     */\n    columnCount() {\n        return TileKey.columnsAtLevel(this.level);\n    }\n}\nexports.TileKey = TileKey;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst FlatTileBoundingBoxGenerator_1 = require(\"./FlatTileBoundingBoxGenerator\");\nconst TileKeyUtils_1 = require(\"./TileKeyUtils\");\nconst TileTreeTraverse_1 = require(\"./TileTreeTraverse\");\n/**\n * The `TilingScheme` represents how the data is tiled.\n */\nclass TilingScheme {\n    /**\n     * Constructs a new `TilingScheme` with the given subdivision scheme and projection.\n     *\n     * @param subdivisionScheme The subdivision scheme used by this `TilingScheme`.\n     * @param projection The projection used by this `TilingScheme`.\n     */\n    constructor(subdivisionScheme, projection) {\n        this.subdivisionScheme = subdivisionScheme;\n        this.projection = projection;\n        this.boundingBoxGenerator = new FlatTileBoundingBoxGenerator_1.FlatTileBoundingBoxGenerator(this);\n        this.tileTreeTraverse = new TileTreeTraverse_1.TileTreeTraverse(subdivisionScheme);\n    }\n    /**\n     * Returns the sub tile keys of the given tile.\n     *\n     * @param tileKey The [[TileKey]].\n     * @returns The list of the sub tile keys.\n     */\n    getSubTileKeys(tileKey) {\n        return this.tileTreeTraverse.subTiles(tileKey);\n    }\n    /**\n     * Gets the [[TileKey]] from the given geo position and level.\n     *\n     * @param geoPoint The position in geo coordinates.\n     * @param level The level of the resulting `TileKey`.\n     */\n    getTileKey(geoPoint, level) {\n        return TileKeyUtils_1.TileKeyUtils.geoCoordinatesToTileKey(this, geoPoint, level);\n    }\n    /**\n     * Gets the list of [[TileKey]]s contained in the given [[GeoBox]].\n     *\n     * @param geoBox The bounding box in geo coordinates.\n     * @param level The level of the resulting `TileKey`.\n     */\n    getTileKeys(geoBox, level) {\n        return TileKeyUtils_1.TileKeyUtils.geoRectangleToTileKeys(this, geoBox, level);\n    }\n    /**\n     * Returns the bounding box in geo coordinates for the given [[TileKey]].\n     *\n     * @param tileKey The `TileKey`.\n     */\n    getGeoBox(tileKey) {\n        return this.boundingBoxGenerator.getGeoBox(tileKey);\n    }\n    /**\n     * Returns the bounding box in world coordinates.\n     *\n     * @param tileKey The `TileKey`.\n     * @param result The optional object that will contain the resulting bounding box.\n     */\n    getWorldBox(tileKey, result) {\n        return this.boundingBoxGenerator.getWorldBox(tileKey, result);\n    }\n}\nexports.TilingScheme = TilingScheme;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/Techniques\"));\n__export(require(\"./lib/TechniqueParams\"));\n__export(require(\"./lib/InterpolatedProperty\"));\n__export(require(\"./lib/InterpolatedPropertyDefs\"));\n__export(require(\"./lib/WorkerServiceProtocol\"));\n__export(require(\"./lib/WorkerTilerProtocol\"));\n__export(require(\"./lib/WorkerDecoderProtocol\"));\n__export(require(\"./lib/DecodedTile\"));\n__export(require(\"./lib/TileInfo\"));\n__export(require(\"./lib/ThemeVisitor\"));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_datasource_protocol_1 = require(\"@here/harp-datasource-protocol\");\nconst harp_utils_1 = require(\"@here/harp-utils\");\nconst logger = harp_utils_1.LoggerManager.instance.create(\"WorkerService\", { enabled: false });\n/**\n * Worker Service communication helper.\n *\n * Listens to Web Worker messages from [[ConcurrentWorkerSet]] and implements:\n *  - worker service initialization\n *  - request/response scheme\n *  - error handling.\n *\n * This class should be subclassed to provide concrete like [[TileDecoderService]].\n *\n * Communication peer for [[ConcurrentWorkerSet]].\n */\nclass WorkerService {\n    /**\n     * Sets up the `WorkerService` with the specified name, and starts processing messages.\n     *\n     * @param serviceId The service id.\n     */\n    constructor(serviceId) {\n        this.serviceId = serviceId;\n        this.m_pendingRequests = new Map();\n        /**\n         * Central message handler for this service.\n         *\n         * Responsible for filtering message target and managing request/response sequence.\n         *\n         * @param message Message to be dispatched.\n         */\n        this.onMessage = (message) => {\n            if (typeof message.data.service !== \"string\" || message.data.service !== this.serviceId) {\n                return;\n            }\n            try {\n                if (harp_datasource_protocol_1.WorkerServiceProtocol.isRequestMessage(message.data)) {\n                    const request = message.data;\n                    const requestEntry = {\n                        service: request.service,\n                        messageId: request.messageId,\n                        responseSent: false\n                    };\n                    this.m_pendingRequests.set(request.messageId, requestEntry);\n                    this.tryHandleRequest(request.request)\n                        .then(response => {\n                        this.doSendResponse(requestEntry, {\n                            service: this.serviceId,\n                            type: harp_datasource_protocol_1.WorkerServiceProtocol.ServiceMessageName.Response,\n                            messageId: request.messageId,\n                            response: response.response\n                        }, response.transferList);\n                    })\n                        .catch(error => {\n                        this.doSendResponse(requestEntry, {\n                            service: this.serviceId,\n                            type: harp_datasource_protocol_1.WorkerServiceProtocol.ServiceMessageName.Response,\n                            messageId: request.messageId,\n                            error: error.toString()\n                        });\n                    });\n                }\n                else {\n                    this.tryHandleMessage(message.data);\n                }\n            }\n            catch (err) {\n                logger.error(`[${this.serviceId}]: Unhandled exception when handling ${message.type}`);\n            }\n        };\n        self.addEventListener(\"message\", this.onMessage);\n        const isInitializedMessage = {\n            service: serviceId,\n            type: harp_datasource_protocol_1.WorkerServiceProtocol.ServiceMessageName.Initialized\n        };\n        self.postMessage(isInitializedMessage);\n    }\n    /**\n     * Destroy the `WorkerService`. Cancels all pending requests ad removes itself from the message\n     * queue.\n     */\n    destroy() {\n        this.cancelAllPendingRequests();\n        self.removeEventListener(\"message\", this.onMessage);\n    }\n    /**\n     * Message handler to be overridden by implementation.\n     *\n     * @param message `MessageEvent.data` as received by `WorkerService`.\n     */\n    handleMessage(message) {\n        logger.error(`[${this.serviceId}]: Invalid message ${message.type}`);\n    }\n    /**\n     * Call request handler to be overridden by implementation.\n     *\n     * @param request [[RequestMessage.request]] as received by `WorkerService`.\n     */\n    handleRequest(request) {\n        throw new Error(`ServiceAdapter[${this.serviceId}]: Invalid request '${request.type}'`);\n    }\n    /**\n     * Safety belt over [[handleMessage]] for correct exception handling & logging.\n     */\n    tryHandleMessage(message) {\n        try {\n            this.handleMessage(message);\n        }\n        catch (error) {\n            logger.error(`[${this.serviceId}]: Failed, handling message ${message.type}`);\n        }\n    }\n    /**\n     * Safety belt over [[handleRequest]] for correct exception handling in promise chain.\n     */\n    tryHandleRequest(request) {\n        try {\n            return this.handleRequest(request);\n        }\n        catch (error) {\n            // we don't log exceptions here as they are propagated to client as responses\n            logger.error(`[${this.serviceId}]: Failure`, error);\n            return Promise.reject(error);\n        }\n    }\n    doSendResponse(requestEntry, response, transferList) {\n        if (requestEntry.responseSent) {\n            return;\n        }\n        self.postMessage(response, transferList);\n        requestEntry.responseSent = true;\n        this.m_pendingRequests.delete(requestEntry.messageId);\n    }\n    cancelAllPendingRequests() {\n        this.m_pendingRequests.forEach(requestEntry => {\n            this.doSendResponse(requestEntry, {\n                service: this.serviceId,\n                type: harp_datasource_protocol_1.WorkerServiceProtocol.ServiceMessageName.Response,\n                messageId: requestEntry.messageId,\n                error: \"cancelled\"\n            });\n        });\n    }\n}\nexports.WorkerService = WorkerService;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Enum log levels\n */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Trace\"] = 0] = \"Trace\";\n    LogLevel[LogLevel[\"Debug\"] = 1] = \"Debug\";\n    LogLevel[LogLevel[\"Log\"] = 2] = \"Log\";\n    LogLevel[LogLevel[\"Info\"] = 3] = \"Info\";\n    LogLevel[LogLevel[\"Warn\"] = 4] = \"Warn\";\n    LogLevel[LogLevel[\"Error\"] = 5] = \"Error\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n/**\n * Logger options to configure logger\n */\nclass LoggerOptions {\n}\nexports.LoggerOptions = LoggerOptions;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GeoBox_1 = require(\"../coordinates/GeoBox\");\nconst GeoCoordinates_1 = require(\"../coordinates/GeoCoordinates\");\nconst Box3Like_1 = require(\"../math/Box3Like\");\nconst MathUtils_1 = require(\"../math/MathUtils\");\nconst OrientedBox3Like_1 = require(\"../math/OrientedBox3Like\");\nconst EarthConstants_1 = require(\"./EarthConstants\");\nconst Projection_1 = require(\"./Projection\");\nclass MercatorProjection {\n    constructor() {\n        this.type = Projection_1.ProjectionType.Planar;\n    }\n    static clamp(val, min, max) {\n        return Math.min(Math.max(min, val), max);\n    }\n    static latitudeClamp(latitude) {\n        return MercatorProjection.clamp(latitude, -MercatorProjection.MAXIMUM_LATITUDE, MercatorProjection.MAXIMUM_LATITUDE);\n    }\n    static latitudeProject(latitude) {\n        return Math.log(Math.tan(Math.PI * 0.25 + latitude * 0.5)) / Math.PI;\n    }\n    static latitudeClampProject(latitude) {\n        return MercatorProjection.latitudeProject(MercatorProjection.latitudeClamp(latitude));\n    }\n    static unprojectLatitude(y) {\n        return 2.0 * Math.atan(Math.exp(Math.PI * y)) - Math.PI * 0.5;\n    }\n    getScaleFactor(worldPoint) {\n        return Math.cosh(2 * Math.PI * (worldPoint.y / EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE - 0.5));\n    }\n    worldExtent(minAltitude, maxAltitude, result) {\n        if (!result) {\n            result = MathUtils_1.MathUtils.newEmptyBox3();\n        }\n        result.min.x = 0;\n        result.min.y = 0;\n        result.min.z = minAltitude;\n        result.max.x = EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        result.max.y = EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        result.max.z = maxAltitude;\n        return result;\n    }\n    projectPoint(geoPointLike, result) {\n        let geoPoint;\n        if (geoPointLike instanceof GeoCoordinates_1.GeoCoordinates) {\n            geoPoint = geoPointLike;\n        }\n        else {\n            geoPoint = new GeoCoordinates_1.GeoCoordinates(geoPointLike.latitude, geoPointLike.longitude, geoPointLike.altitude);\n        }\n        if (!result) {\n            // tslint:disable-next-line:no-object-literal-type-assertion\n            result = { x: 0, y: 0, z: 0 };\n        }\n        result.x = ((geoPoint.longitude + 180) / 360) * EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        result.y =\n            (MercatorProjection.latitudeClampProject(geoPoint.latitudeInRadians) * 0.5 + 0.5) *\n                EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        result.z = geoPoint.altitude || 0;\n        return result;\n    }\n    unprojectPoint(worldPoint) {\n        const geoPoint = GeoCoordinates_1.GeoCoordinates.fromRadians(MercatorProjection.unprojectLatitude((worldPoint.y / EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE - 0.5) * 2.0), (worldPoint.x / EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE) * 2 * Math.PI - Math.PI, worldPoint.z);\n        return geoPoint;\n    }\n    projectBox(geoBox, result) {\n        const worldCenter = this.projectPoint(geoBox.center);\n        const worldNorth = (MercatorProjection.latitudeClampProject(geoBox.northEast.latitudeInRadians) * 0.5 +\n            0.5) *\n            EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        const worldSouth = (MercatorProjection.latitudeClampProject(geoBox.southWest.latitudeInRadians) * 0.5 +\n            0.5) *\n            EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        const worldYCenter = (worldNorth + worldSouth) * 0.5;\n        worldCenter.y = worldYCenter;\n        const latitudeSpan = worldNorth - worldSouth;\n        const longitudeSpan = (geoBox.longitudeSpan / 360) * EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        if (!result) {\n            result = MathUtils_1.MathUtils.newEmptyBox3();\n        }\n        if (Box3Like_1.isBox3Like(result)) {\n            result.min.x = worldCenter.x - longitudeSpan * 0.5;\n            result.min.y = worldCenter.y - latitudeSpan * 0.5;\n            result.max.x = worldCenter.x + longitudeSpan * 0.5;\n            result.max.y = worldCenter.y + latitudeSpan * 0.5;\n            const altitudeSpan = geoBox.altitudeSpan;\n            if (altitudeSpan !== undefined) {\n                result.min.z = worldCenter.z - altitudeSpan * 0.5;\n                result.max.z = worldCenter.z + altitudeSpan * 0.5;\n            }\n            else {\n                result.min.z = 0;\n                result.max.z = 0;\n            }\n        }\n        else if (OrientedBox3Like_1.isOrientedBox3Like(result)) {\n            MathUtils_1.MathUtils.newVector3(1, 0, 0, result.xAxis);\n            MathUtils_1.MathUtils.newVector3(0, 1, 0, result.yAxis);\n            MathUtils_1.MathUtils.newVector3(0, 0, 1, result.zAxis);\n            result.position.x = worldCenter.x;\n            result.position.y = worldCenter.y;\n            result.position.z = worldCenter.z;\n            result.extents.x = longitudeSpan * 0.5;\n            result.extents.y = latitudeSpan * 0.5;\n            result.extents.z = Math.max(Number.EPSILON, (geoBox.altitudeSpan || 0) * 0.5);\n        }\n        else {\n            throw new Error(\"invalid bounding box\");\n        }\n        return result;\n    }\n    unprojectBox(worldBox) {\n        const minGeo = this.unprojectPoint(worldBox.min);\n        const maxGeo = this.unprojectPoint(worldBox.max);\n        const geoBox = GeoBox_1.GeoBox.fromCoordinates(minGeo, maxGeo);\n        return geoBox;\n    }\n    groundDistance(worldPoint) {\n        return worldPoint.z;\n    }\n    scalePointToSurface(worldPoint) {\n        worldPoint.z = 0;\n        return worldPoint;\n    }\n}\nMercatorProjection.MAXIMUM_LATITUDE = 1.4844222297453323;\nexports.MercatorProjection = MercatorProjection;\n/**\n * Mercator [[Projection]] used to convert geo coordinates to world coordinates and vice versa.\n */\nexports.mercatorProjection = new MercatorProjection();\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass QuadTreeSubdivisionScheme {\n    getSubdivisionX() {\n        return 2;\n    }\n    getSubdivisionY() {\n        return 2;\n    }\n    getLevelDimensionX(level) {\n        // tslint:disable-next-line:no-bitwise\n        return 1 << level;\n    }\n    getLevelDimensionY(level) {\n        // tslint:disable-next-line:no-bitwise\n        return 1 << level;\n    }\n}\n/**\n * [[SubdivisionScheme]] representing a quadtree.\n */\nexports.quadTreeSubdivisionScheme = new QuadTreeSubdivisionScheme();\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Class for the default console channel.\n */\nclass ConsoleChannel {\n    error(message, ...optionalParams) {\n        // tslint:disable-next-line:no-console\n        console.error(message, ...optionalParams);\n    }\n    debug(message, ...optionalParams) {\n        // tslint:disable-next-line:no-console\n        console.debug(message, ...optionalParams);\n    }\n    info(message, ...optionalParams) {\n        // tslint:disable-next-line:no-console\n        console.info(message, ...optionalParams);\n    }\n    log(message, ...optionalParams) {\n        // tslint:disable-next-line:no-console\n        console.log(message, ...optionalParams);\n    }\n    trace(message, ...optionalParams) {\n        // tslint:disable-next-line:no-console\n        console.trace(message, ...optionalParams);\n    }\n    warn(message, ...optionalParams) {\n        // tslint:disable-next-line:no-console\n        console.warn(message, ...optionalParams);\n    }\n}\nexports.ConsoleChannel = ConsoleChannel;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ILogger_1 = require(\"./ILogger\");\n/**\n * Logger class.\n */\nclass Logger {\n    constructor(name, m_channel, options) {\n        this.name = name;\n        this.m_channel = m_channel;\n        this.enabled = true;\n        this.level = ILogger_1.LogLevel.Trace;\n        if (options !== undefined) {\n            this.update(options);\n        }\n    }\n    error(message, ...optionalParams) {\n        if (this.enabled && this.level <= ILogger_1.LogLevel.Error) {\n            this.m_channel.error(this.prefix, message, ...optionalParams);\n        }\n    }\n    debug(message, ...optionalParams) {\n        if (this.enabled && this.level <= ILogger_1.LogLevel.Debug) {\n            this.m_channel.debug(this.prefix, message, ...optionalParams);\n        }\n    }\n    info(message, ...optionalParams) {\n        if (this.enabled && this.level <= ILogger_1.LogLevel.Info) {\n            this.m_channel.info(this.prefix, message, ...optionalParams);\n        }\n    }\n    log(message, ...optionalParams) {\n        if (this.enabled && this.level <= ILogger_1.LogLevel.Log) {\n            this.m_channel.log(this.prefix, message, ...optionalParams);\n        }\n    }\n    trace(message, ...optionalParams) {\n        if (this.enabled && this.level <= ILogger_1.LogLevel.Trace) {\n            this.m_channel.trace(this.prefix, message, ...optionalParams);\n        }\n    }\n    warn(message, ...optionalParams) {\n        if (this.enabled && this.level <= ILogger_1.LogLevel.Warn) {\n            this.m_channel.warn(this.prefix, message, ...optionalParams);\n        }\n    }\n    update(options) {\n        this.enabled = options.enabled === undefined ? this.enabled : options.enabled;\n        this.level = options.level === undefined ? this.level : options.level;\n    }\n    get prefix() {\n        return this.name + \":\";\n    }\n}\nexports.Logger = Logger;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ILogger_1 = require(\"./ILogger\");\nexports.WORKERCHANNEL_MSG_TYPE = \"worker-channel-message\";\n/**\n * The class for the worker channel.\n */\nclass WorkerChannel {\n    error(message, ...optionalParams) {\n        const workerMessage = {\n            message: [message, ...optionalParams],\n            type: exports.WORKERCHANNEL_MSG_TYPE,\n            level: ILogger_1.LogLevel.Error\n        };\n        self.postMessage(workerMessage);\n    }\n    debug(message, ...optionalParams) {\n        const workerMessage = {\n            message: [message, ...optionalParams],\n            type: exports.WORKERCHANNEL_MSG_TYPE,\n            level: ILogger_1.LogLevel.Debug\n        };\n        self.postMessage(workerMessage);\n    }\n    info(message, ...optionalParams) {\n        const workerMessage = {\n            message: [message, ...optionalParams],\n            type: exports.WORKERCHANNEL_MSG_TYPE,\n            level: ILogger_1.LogLevel.Info\n        };\n        self.postMessage(workerMessage);\n    }\n    log(message, ...optionalParams) {\n        const workerMessage = {\n            message: [message, ...optionalParams],\n            type: exports.WORKERCHANNEL_MSG_TYPE,\n            level: ILogger_1.LogLevel.Log\n        };\n        self.postMessage(workerMessage);\n    }\n    trace(message, ...optionalParams) {\n        const workerMessage = {\n            message: [message, ...optionalParams],\n            type: exports.WORKERCHANNEL_MSG_TYPE,\n            level: ILogger_1.LogLevel.Trace\n        };\n        self.postMessage(workerMessage);\n    }\n    warn(message, ...optionalParams) {\n        const workerMessage = {\n            message: [message, ...optionalParams],\n            type: exports.WORKERCHANNEL_MSG_TYPE,\n            level: ILogger_1.LogLevel.Warn\n        };\n        self.postMessage(workerMessage);\n    }\n}\nexports.WorkerChannel = WorkerChannel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * Abstract class defining a shape of a [[Theme]]'s expression\n */\nclass Expr {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    /**\n     * Returns a parsed expression.\n     * @param code String which describes the type of expression to be parsed, for example \"var\".\n     */\n    static parse(code) {\n        const parser = new Parser(code);\n        const expr = parser.parse();\n        return expr;\n    }\n}\nexports.Expr = Expr;\n/**\n * @hidden\n */\nclass Env {\n    /**\n     * Returns property in [[Env]] by name.\n     *\n     * @param name Name of property.\n     */\n    lookup(_name) {\n        return undefined;\n    }\n    /**\n     * Return an object containing all properties of this environment. (Here: empty object).\n     */\n    unmap() {\n        return {};\n    }\n}\nexports.Env = Env;\n/**\n * Adds access to map specific environment properties.\n */\nclass MapEnv extends Env {\n    constructor(entries, parent) {\n        super();\n        this.entries = entries;\n        this.parent = parent;\n    }\n    /**\n     * Returns property in [[Env]] by name.\n     *\n     * @param name Name of property.\n     */\n    lookup(name) {\n        const value = this.entries[name];\n        if (value !== undefined) {\n            return value;\n        }\n        return this.parent ? this.parent.lookup(name) : undefined;\n    }\n    /**\n     * Return an object containing all properties of this environment, takes care of the parent\n     * object.\n     */\n    unmap() {\n        const obj = this.parent ? this.parent.unmap() : {};\n        for (const key in this.entries) {\n            if (this.entries.hasOwnProperty(key)) {\n                obj[key] = this.entries[key];\n            }\n        }\n        return obj;\n    }\n}\nexports.MapEnv = MapEnv;\n/**\n * Var expression.\n */\nclass VarExpr extends Expr {\n    constructor(name) {\n        super(\"var\");\n        this.name = name;\n    }\n    evaluate(env) {\n        const value = env.lookup(this.name);\n        return value;\n    }\n}\n/**\n * Number literal expression.\n */\nclass NumberLiteralExpr extends Expr {\n    constructor(value) {\n        super(\"number\");\n        this.value = value;\n    }\n    evaluate() {\n        return this.value;\n    }\n}\n/**\n * String literal expression.\n */\nclass StringLiteralExpr extends Expr {\n    constructor(value) {\n        super(\"string\");\n        this.value = value;\n    }\n    evaluate() {\n        return this.value;\n    }\n}\n/**\n * A has expression with an attribute, for example `has(ref)`.\n */\nclass HasAttributeExpr extends Expr {\n    constructor(attribute) {\n        super(\"has\");\n        this.attribute = attribute;\n    }\n    evaluate(env) {\n        return env.lookup(this.attribute) !== undefined;\n    }\n}\n/**\n * A contains expression.\n */\nclass ContainsExpr extends Expr {\n    constructor(value, elements) {\n        super(\"in\");\n        this.value = value;\n        this.elements = elements;\n    }\n    evaluate(env) {\n        const value = this.value.evaluate(env);\n        for (const e of this.elements) {\n            const element = e.evaluate(env);\n            if (value === element) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n/**\n * A `not` expression.\n */\nclass NotExpr extends Expr {\n    constructor(expr) {\n        super(\"!\");\n        this.expr = expr;\n    }\n    evaluate(env) {\n        return !this.expr.evaluate(env);\n    }\n}\n/**\n * A binary operator expression\n */\nclass BinaryExpr extends Expr {\n    constructor(op, left, right) {\n        super(op);\n        this.op = op;\n        this.left = left;\n        this.right = right;\n    }\n    evaluate(env) {\n        const left = this.left.evaluate(env);\n        const right = this.right.evaluate(env);\n        switch (this.op) {\n            case \"~=\": {\n                if (typeof left === \"string\" && typeof right === \"string\") {\n                    return left.indexOf(right) !== -1;\n                }\n                return false;\n            }\n            case \"^=\": {\n                if (typeof left === \"string\" && typeof right === \"string\") {\n                    return left.startsWith(right);\n                }\n                return false;\n            }\n            case \"$=\": {\n                if (typeof left === \"string\" && typeof right === \"string\") {\n                    return left.endsWith(right);\n                }\n                return false;\n            }\n            case \"==\":\n                return left === right;\n            case \"!=\":\n                return left !== right;\n            case \"<\":\n                return left !== undefined && right !== undefined ? left < right : undefined;\n            case \">\":\n                return left !== undefined && right !== undefined ? left > right : undefined;\n            case \"<=\":\n                return left !== undefined && right !== undefined ? left <= right : undefined;\n            case \">=\":\n                return left !== undefined && right !== undefined ? left >= right : undefined;\n        }\n        throw new Error(`invalid relational op ${this.op}`);\n    }\n}\n/**\n * Logical expression.\n */\nclass LogicalExpr extends Expr {\n    constructor(op, left, right) {\n        super(op);\n        this.op = op;\n        this.left = left;\n        this.right = right;\n    }\n    evaluate(env) {\n        const value = this.left.evaluate(env);\n        switch (this.op) {\n            case \"||\":\n                return value || this.right.evaluate(env);\n            case \"&&\":\n                return value && this.right.evaluate(env);\n        } // switch\n        throw new Error(`invalid logical op ${this.op}`);\n    }\n}\n/**\n * Character value\n */\nvar Character;\n(function (Character) {\n    Character[Character[\"Tab\"] = 9] = \"Tab\";\n    Character[Character[\"Lf\"] = 10] = \"Lf\";\n    Character[Character[\"Cr\"] = 13] = \"Cr\";\n    Character[Character[\"Space\"] = 32] = \"Space\";\n    Character[Character[\"LParen\"] = 40] = \"LParen\";\n    Character[Character[\"RParen\"] = 41] = \"RParen\";\n    Character[Character[\"Comma\"] = 44] = \"Comma\";\n    Character[Character[\"Dot\"] = 46] = \"Dot\";\n    Character[Character[\"LBracket\"] = 91] = \"LBracket\";\n    Character[Character[\"Backslash\"] = 92] = \"Backslash\";\n    Character[Character[\"RBracket\"] = 93] = \"RBracket\";\n    Character[Character[\"_0\"] = 48] = \"_0\";\n    Character[Character[\"_9\"] = 57] = \"_9\";\n    Character[Character[\"_\"] = 95] = \"_\";\n    Character[Character[\"A\"] = 64] = \"A\";\n    Character[Character[\"Z\"] = 90] = \"Z\";\n    Character[Character[\"a\"] = 97] = \"a\";\n    Character[Character[\"z\"] = 122] = \"z\";\n    Character[Character[\"DoubleQuote\"] = 34] = \"DoubleQuote\";\n    Character[Character[\"SingleQuote\"] = 39] = \"SingleQuote\";\n    Character[Character[\"Exclaim\"] = 33] = \"Exclaim\";\n    Character[Character[\"Equal\"] = 61] = \"Equal\";\n    Character[Character[\"Caret\"] = 94] = \"Caret\";\n    Character[Character[\"Tilde\"] = 126] = \"Tilde\";\n    Character[Character[\"Dollar\"] = 36] = \"Dollar\";\n    Character[Character[\"Less\"] = 60] = \"Less\";\n    Character[Character[\"Greater\"] = 62] = \"Greater\";\n    Character[Character[\"Bar\"] = 124] = \"Bar\";\n    Character[Character[\"Amp\"] = 38] = \"Amp\";\n})(Character || (Character = {}));\n/**\n * Check if a codepoint is a whitespace character.\n */\nfunction isSpace(codepoint) {\n    switch (codepoint) {\n        case Character.Tab:\n        case Character.Lf:\n        case Character.Cr:\n        case Character.Space:\n            return true;\n        default:\n            return false;\n    } // switch\n}\n/**\n * Check if codepoint is a digit character.\n */\nfunction isNumber(codepoint) {\n    return codepoint >= Character._0 && codepoint <= Character._9;\n}\n/**\n * Check if codepoint is a letter character.\n */\nfunction isLetter(codepoint) {\n    return ((codepoint >= Character.a && codepoint <= Character.z) ||\n        (codepoint >= Character.A && codepoint <= Character.Z));\n}\n/**\n * Check if codepoint is either a digit or a letter character.\n */\nfunction isLetterOrNumber(codepoint) {\n    return isLetter(codepoint) || isNumber(codepoint);\n}\n/**\n * Check if codepoint is an identification character: underscore, dollar sign, dot or bracket.\n */\nfunction isIdentChar(codepoint) {\n    return (isLetterOrNumber(codepoint) ||\n        codepoint === Character._ ||\n        codepoint === Character.Dollar ||\n        codepoint === Character.Dot ||\n        codepoint === Character.LBracket ||\n        codepoint === Character.RBracket);\n}\n/**\n * Tokens used in theme grammar.\n */\nvar Token;\n(function (Token) {\n    Token[Token[\"Eof\"] = 0] = \"Eof\";\n    Token[Token[\"Error\"] = 1] = \"Error\";\n    Token[Token[\"Identifier\"] = 2] = \"Identifier\";\n    Token[Token[\"Number\"] = 3] = \"Number\";\n    Token[Token[\"String\"] = 4] = \"String\";\n    Token[Token[\"Comma\"] = 5] = \"Comma\";\n    Token[Token[\"LParen\"] = 6] = \"LParen\";\n    Token[Token[\"RParen\"] = 7] = \"RParen\";\n    Token[Token[\"LBracket\"] = 8] = \"LBracket\";\n    Token[Token[\"RBracket\"] = 9] = \"RBracket\";\n    Token[Token[\"Exclaim\"] = 10] = \"Exclaim\";\n    Token[Token[\"TildeEqual\"] = 11] = \"TildeEqual\";\n    Token[Token[\"CaretEqual\"] = 12] = \"CaretEqual\";\n    Token[Token[\"DollarEqual\"] = 13] = \"DollarEqual\";\n    Token[Token[\"EqualEqual\"] = 14] = \"EqualEqual\";\n    Token[Token[\"ExclaimEqual\"] = 15] = \"ExclaimEqual\";\n    Token[Token[\"Less\"] = 16] = \"Less\";\n    Token[Token[\"Greater\"] = 17] = \"Greater\";\n    Token[Token[\"LessEqual\"] = 18] = \"LessEqual\";\n    Token[Token[\"GreaterEqual\"] = 19] = \"GreaterEqual\";\n    Token[Token[\"BarBar\"] = 20] = \"BarBar\";\n    Token[Token[\"AmpAmp\"] = 21] = \"AmpAmp\";\n})(Token || (Token = {}));\n/**\n * Maps a token to its string name.\n */\nfunction tokenSpell(token) {\n    switch (token) {\n        case Token.Eof:\n            return \"eof\";\n        case Token.Error:\n            return \"error\";\n        case Token.Identifier:\n            return \"identifier\";\n        case Token.Number:\n            return \"number\";\n        case Token.String:\n            return \"string\";\n        case Token.Comma:\n            return \",\";\n        case Token.LParen:\n            return \"(\";\n        case Token.RParen:\n            return \")\";\n        case Token.LBracket:\n            return \"[\";\n        case Token.RBracket:\n            return \"]\";\n        case Token.Exclaim:\n            return \"!\";\n        case Token.TildeEqual:\n            return \"~=\";\n        case Token.CaretEqual:\n            return \"^=\";\n        case Token.DollarEqual:\n            return \"$=\";\n        case Token.EqualEqual:\n            return \"==\";\n        case Token.ExclaimEqual:\n            return \"!=\";\n        case Token.Less:\n            return \"<\";\n        case Token.Greater:\n            return \">\";\n        case Token.LessEqual:\n            return \"<=\";\n        case Token.GreaterEqual:\n            return \">=\";\n        case Token.BarBar:\n            return \"||\";\n        case Token.AmpAmp:\n            return \"&&\";\n        default:\n            throw new Error(`invalid token ${token}`);\n    }\n}\n/**\n * Lexer class implementation.\n */\nclass Lexer {\n    constructor(code) {\n        this.code = code;\n        this.m_token = Token.Error;\n        this.m_index = 0;\n        this.m_char = Character.Lf;\n    }\n    /**\n     * Single lexer token.\n     */\n    token() {\n        return this.m_token;\n    }\n    /**\n     * Parsed text.\n     */\n    text() {\n        return this.m_text || \"\";\n    }\n    /**\n     * Go to the next token.\n     */\n    next() {\n        this.m_token = this.yylex();\n        if (this.m_token === Token.Error) {\n            throw new Error(`unexpected character ${this.m_char}`);\n        }\n        return this.m_token;\n    }\n    yyinp() {\n        this.m_char = this.code.codePointAt(this.m_index++) || 0;\n    }\n    yylex() {\n        this.m_text = undefined;\n        while (isSpace(this.m_char)) {\n            this.yyinp();\n        }\n        if (this.m_char === 0) {\n            return Token.Eof;\n        }\n        const ch = this.m_char;\n        this.yyinp();\n        switch (ch) {\n            case Character.LParen:\n                return Token.LParen;\n            case Character.RParen:\n                return Token.RParen;\n            case Character.LBracket:\n                return Token.LBracket;\n            case Character.RBracket:\n                return Token.RBracket;\n            case Character.Comma:\n                return Token.Comma;\n            case Character.SingleQuote:\n            case Character.DoubleQuote: {\n                const start = this.m_index - 1;\n                while (this.m_char && this.m_char !== ch) {\n                    // ### TODO handle escape sequences\n                    this.yyinp();\n                }\n                if (this.m_char !== ch) {\n                    throw new Error(\"Unfinished string literal\");\n                }\n                this.yyinp();\n                this.m_text = this.code.substring(start, this.m_index - 2);\n                return Token.String;\n            }\n            case Character.Exclaim:\n                if (this.m_char === Character.Equal) {\n                    this.yyinp();\n                    return Token.ExclaimEqual;\n                }\n                return Token.Exclaim;\n            case Character.Caret:\n                if (this.m_char === Character.Equal) {\n                    this.yyinp();\n                    return Token.CaretEqual;\n                }\n                return Token.Error;\n            case Character.Tilde:\n                if (this.m_char === Character.Equal) {\n                    this.yyinp();\n                    return Token.TildeEqual;\n                }\n                return Token.Error;\n            case Character.Equal:\n                if (this.m_char === Character.Equal) {\n                    this.yyinp();\n                    return Token.EqualEqual;\n                }\n                return Token.Error;\n            case Character.Less:\n                if (this.m_char === Character.Equal) {\n                    this.yyinp();\n                    return Token.LessEqual;\n                }\n                return Token.Less;\n            case Character.Greater:\n                if (this.m_char === Character.Equal) {\n                    this.yyinp();\n                    return Token.GreaterEqual;\n                }\n                return Token.Greater;\n            case Character.Bar:\n                if (this.m_char === Character.Bar) {\n                    this.yyinp();\n                    return Token.BarBar;\n                }\n                return Token.Error;\n            case Character.Amp:\n                if (this.m_char === Character.Amp) {\n                    this.yyinp();\n                    return Token.AmpAmp;\n                }\n                return Token.Error;\n            default: {\n                const start = this.m_index - 2;\n                if (isLetter(ch) ||\n                    ch === Character._ ||\n                    (ch === Character.Dollar && isIdentChar(this.m_char))) {\n                    while (isIdentChar(this.m_char)) {\n                        this.yyinp();\n                    }\n                    this.m_text = this.code.substring(start, this.m_index - 1);\n                    return Token.Identifier;\n                }\n                else if (isNumber(ch)) {\n                    while (isNumber(this.m_char)) {\n                        this.yyinp();\n                    }\n                    if (this.m_char === Character.Dot) {\n                        this.yyinp();\n                        while (isNumber(this.m_char)) {\n                            this.yyinp();\n                        }\n                    }\n                    this.m_text = this.code.substring(start, this.m_index - 1);\n                    return Token.Number;\n                }\n                else if (ch === Character.Dollar) {\n                    if (this.m_char === Character.Equal) {\n                        this.yyinp();\n                        return Token.DollarEqual;\n                    }\n                    return Token.Error;\n                }\n            }\n        }\n        return Token.Error;\n    }\n}\nfunction getEqualityOp(token) {\n    switch (token) {\n        case Token.TildeEqual:\n            return \"~=\";\n        case Token.CaretEqual:\n            return \"^=\";\n        case Token.DollarEqual:\n            return \"$=\";\n        case Token.EqualEqual:\n            return \"==\";\n        case Token.ExclaimEqual:\n            return \"!=\";\n        default:\n            return undefined;\n    } // switch\n}\nfunction getRelationalOp(token) {\n    switch (token) {\n        case Token.Less:\n            return \"<\";\n        case Token.Greater:\n            return \">\";\n        case Token.LessEqual:\n            return \"<=\";\n        case Token.GreaterEqual:\n            return \">=\";\n        default:\n            return undefined;\n    } // switch\n}\nclass Parser {\n    constructor(code) {\n        this.lex = new Lexer(code);\n        this.lex.next();\n    }\n    parse() {\n        return this.parseLogicalOr();\n    }\n    yyexpect(token) {\n        if (this.lex.token() !== token) {\n            throw new Error(`Syntax error: Expected token '${tokenSpell(token)}' but ` +\n                `found '${tokenSpell(this.lex.token())}'`);\n        }\n        this.lex.next();\n    }\n    parsePrimary() {\n        switch (this.lex.token()) {\n            case Token.Identifier: {\n                const text = this.lex.text();\n                if (text !== \"has\") {\n                    const expr = new VarExpr(text);\n                    this.lex.next();\n                    return expr;\n                }\n                this.lex.next(); // skip has\n                this.yyexpect(Token.LParen);\n                const attribute = this.lex.text();\n                this.yyexpect(Token.Identifier);\n                this.yyexpect(Token.RParen);\n                return new HasAttributeExpr(attribute);\n            }\n            case Token.Number: {\n                const expr = new NumberLiteralExpr(parseFloat(this.lex.text()));\n                this.lex.next();\n                return expr;\n            }\n            case Token.String: {\n                const expr = new StringLiteralExpr(this.lex.text());\n                this.lex.next();\n                return expr;\n            }\n            case Token.LParen: {\n                this.lex.next();\n                const expr = this.parseLogicalOr();\n                this.yyexpect(Token.RParen);\n                return expr;\n            }\n        }\n        throw new Error(\"Syntax error\");\n    }\n    parseUnary() {\n        if (this.lex.token() === Token.Exclaim) {\n            this.lex.next();\n            return new NotExpr(this.parseUnary());\n        }\n        return this.parsePrimary();\n    }\n    parseRelational() {\n        let expr = this.parseUnary();\n        while (true) {\n            if (this.lex.token() === Token.Identifier && this.lex.text() === \"in\") {\n                this.lex.next();\n                this.yyexpect(Token.LBracket);\n                const elements = [this.parsePrimary()];\n                while (this.lex.token() === Token.Comma) {\n                    this.lex.next();\n                    elements.push(this.parsePrimary());\n                }\n                this.yyexpect(Token.RBracket);\n                expr = new ContainsExpr(expr, elements);\n            }\n            else {\n                const op = getRelationalOp(this.lex.token());\n                if (op === undefined) {\n                    break;\n                }\n                this.lex.next();\n                const right = this.parseUnary();\n                expr = new BinaryExpr(op, expr, right);\n            }\n        }\n        return expr;\n    }\n    parseEquality() {\n        let expr = this.parseRelational();\n        while (true) {\n            const op = getEqualityOp(this.lex.token());\n            if (op === undefined) {\n                break;\n            }\n            this.lex.next();\n            const right = this.parseRelational();\n            expr = new BinaryExpr(op, expr, right);\n        }\n        return expr;\n    }\n    parseLogicalAnd() {\n        let expr = this.parseEquality();\n        while (this.lex.token() === Token.AmpAmp) {\n            this.lex.next();\n            const right = this.parseEquality();\n            expr = new LogicalExpr(\"&&\", expr, right);\n        }\n        return expr;\n    }\n    parseLogicalOr() {\n        let expr = this.parseLogicalAnd();\n        while (this.lex.token() === Token.BarBar) {\n            this.lex.next();\n            const right = this.parseLogicalAnd();\n            expr = new LogicalExpr(\"||\", expr, right);\n        }\n        return expr;\n    }\n}\nexports.Parser = Parser;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_geoutils_1 = require(\"@here/harp-geoutils\");\nconst three_1 = require(\"three\");\nconst interpolants = [three_1.DiscreteInterpolant, three_1.LinearInterpolant, three_1.CubicInterpolant];\n/**\n * Get the value of the specified property at the given zoom level. Handles [[InterpolatedProperty]]\n * instances as well as future interpolated values.\n *\n * @param property Property of a technique.\n * @param level Display level the property should be rendered at.\n */\nfunction getPropertyValue(property, level) {\n    if (!isInterpolatedProperty(property)) {\n        if (isInterpolatedPropertyDefinition(property)) {\n            throw new Error(\"Invalid property definition\");\n        }\n        return property;\n    }\n    else {\n        const nChannels = property.values.length / property.zoomLevels.length;\n        const isMultiChannel = nChannels > 1;\n        const interpolant = new interpolants[property.interpolationMode](property.zoomLevels, property.values, nChannels);\n        interpolant.evaluate(level);\n        let result = isMultiChannel ? \"#\" : 0;\n        for (const value of interpolant.resultBuffer) {\n            // tslint:disable:no-bitwise\n            const val = isMultiChannel\n                ? (\"0\" + ((harp_geoutils_1.MathUtils.clamp(value, 0, 1) * 255) | 0).toString(16)).slice(-2)\n                : value;\n            result += val;\n        }\n        return result;\n    }\n}\nexports.getPropertyValue = getPropertyValue;\n/**\n * Checks if a property is interpolated.\n * @param p property to be checked\n */\nfunction isInterpolatedPropertyDefinition(p) {\n    if (p !== undefined &&\n        p.values instanceof Array &&\n        p.values.length > 0 &&\n        p.values[0] !== undefined &&\n        p.zoomLevels instanceof Array &&\n        p.zoomLevels.length > 0 &&\n        p.zoomLevels[0] !== undefined &&\n        p.values.length === p.zoomLevels.length) {\n        return true;\n    }\n    return false;\n}\nexports.isInterpolatedPropertyDefinition = isInterpolatedPropertyDefinition;\n/**\n * Type guard to check if an object is an instance of `InterpolatedProperty`.\n */\nfunction isInterpolatedProperty(p) {\n    if (p !== undefined &&\n        p.interpolationMode !== undefined &&\n        p.zoomLevels !== undefined &&\n        p.values !== undefined &&\n        p.values.length > 0 &&\n        (p.zoomLevels.length === p.values.length / 3 || p.zoomLevels.length === p.values.length)) {\n        return true;\n    }\n    return false;\n}\nexports.isInterpolatedProperty = isInterpolatedProperty;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GeoBox_1 = require(\"../coordinates/GeoBox\");\nconst GeoCoordinates_1 = require(\"../coordinates/GeoCoordinates\");\nconst Box3Like_1 = require(\"../math/Box3Like\");\nconst MathUtils_1 = require(\"../math/MathUtils\");\nconst OrientedBox3Like_1 = require(\"../math/OrientedBox3Like\");\nconst Projection_1 = require(\"./Projection\");\nconst DEG2RAD = Math.PI / 180;\nclass EquirectangularProjection {\n    constructor() {\n        this.type = Projection_1.ProjectionType.Planar;\n    }\n    getScaleFactor(_worldPoint) {\n        return 1;\n    }\n    worldExtent(minAltitude, maxAltitude, result) {\n        if (!result) {\n            result = MathUtils_1.MathUtils.newEmptyBox3();\n        }\n        result.min.x = 0.0;\n        result.min.y = 0.0;\n        result.min.z = minAltitude;\n        result.max.x = 1.0;\n        result.max.y = 0.5;\n        result.max.z = maxAltitude;\n        return result;\n    }\n    projectPoint(geoPoint, result) {\n        if (result === undefined) {\n            /*\n             * The following tslint:disable is due to the fact that the [[WorldCoordinates]]\n             * might be a concrete class which is not available at runtime.\n             * Consider the following example:\n             *\n             *  const x: THREE.Vector3 = new THREE.Vector3(0,0,0);\n             *  const result = EquirectangularProjection.projectPoint<THREE.Vector3>(x);\n             *\n             * Note: type of `result` is Vector3Like and not as expected: THREE.Vector3!\n             */\n            // tslint:disable-next-line:no-object-literal-type-assertion\n            result = { x: 0, y: 0, z: 0 };\n        }\n        result.x =\n            (geoPoint.longitude * DEG2RAD + Math.PI) * EquirectangularProjection.geoToWorldScale;\n        result.y =\n            (geoPoint.latitude * DEG2RAD + Math.PI * 0.5) *\n                EquirectangularProjection.geoToWorldScale;\n        result.z = geoPoint.altitude || 0;\n        return result;\n    }\n    unprojectPoint(worldPoint) {\n        const geoPoint = GeoCoordinates_1.GeoCoordinates.fromRadians(worldPoint.y * EquirectangularProjection.worldToGeoScale - Math.PI * 0.5, worldPoint.x * EquirectangularProjection.worldToGeoScale - Math.PI, worldPoint.z);\n        return geoPoint;\n    }\n    projectBox(geoBox, result) {\n        const worldCenter = this.projectPoint(new GeoCoordinates_1.GeoCoordinates(geoBox.center.latitude, geoBox.center.longitude, 0));\n        const { latitudeSpanInRadians, longitudeSpanInRadians, altitudeSpan } = geoBox;\n        const sizeX = longitudeSpanInRadians * EquirectangularProjection.geoToWorldScale;\n        const sizeY = latitudeSpanInRadians * EquirectangularProjection.geoToWorldScale;\n        if (!result) {\n            result = MathUtils_1.MathUtils.newEmptyBox3();\n        }\n        if (Box3Like_1.isBox3Like(result)) {\n            result.min.x = worldCenter.x - sizeX * 0.5;\n            result.min.y = worldCenter.y - sizeY * 0.5;\n            result.max.x = worldCenter.x + sizeX * 0.5;\n            result.max.y = worldCenter.y + sizeY * 0.5;\n            if (altitudeSpan !== undefined) {\n                result.min.z = worldCenter.z - altitudeSpan * 0.5;\n                result.max.z = worldCenter.z + altitudeSpan * 0.5;\n            }\n            else {\n                result.min.z = 0;\n                result.max.z = 0;\n            }\n        }\n        else if (OrientedBox3Like_1.isOrientedBox3Like(result)) {\n            MathUtils_1.MathUtils.newVector3(1, 0, 0, result.xAxis);\n            MathUtils_1.MathUtils.newVector3(0, 1, 0, result.yAxis);\n            MathUtils_1.MathUtils.newVector3(0, 0, 1, result.zAxis);\n            result.position.x = worldCenter.x;\n            result.position.y = worldCenter.y;\n            result.position.z = worldCenter.z;\n            result.extents.x = sizeX * 0.5;\n            result.extents.y = sizeY * 0.5;\n            result.extents.z = Math.max(Number.EPSILON, (altitudeSpan || 0) * 0.5);\n        }\n        return result;\n    }\n    unprojectBox(worldBox) {\n        const minGeo = this.unprojectPoint(worldBox.min);\n        const maxGeo = this.unprojectPoint(worldBox.max);\n        return GeoBox_1.GeoBox.fromCoordinates(minGeo, maxGeo);\n    }\n    groundDistance(worldPoint) {\n        return worldPoint.z;\n    }\n    scalePointToSurface(worldPoint) {\n        worldPoint.z = 0;\n        return worldPoint;\n    }\n}\nEquirectangularProjection.geoToWorldScale = 1.0 / (2.0 * Math.PI);\nEquirectangularProjection.worldToGeoScale = (2.0 * Math.PI) / 1.0;\n/**\n * Equirectangular [[Projection]] used to convert geo coordinates to world coordinates and vice\n * versa.\n */\nexports.equirectangularProjection = new EquirectangularProjection();\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GeoBox_1 = require(\"../coordinates/GeoBox\");\nconst GeoCoordinates_1 = require(\"../coordinates/GeoCoordinates\");\nconst MathUtils_1 = require(\"../math/MathUtils\");\nconst OrientedBox3Like_1 = require(\"../math/OrientedBox3Like\");\nconst EarthConstants_1 = require(\"./EarthConstants\");\nconst MercatorProjection_1 = require(\"./MercatorProjection\");\nclass WebMercatorProjection extends MercatorProjection_1.MercatorProjection {\n    projectPoint(geoPointLike, result) {\n        let geoPoint;\n        if (geoPointLike instanceof GeoCoordinates_1.GeoCoordinates) {\n            geoPoint = geoPointLike;\n        }\n        else {\n            geoPoint = new GeoCoordinates_1.GeoCoordinates(geoPointLike.latitude, geoPointLike.longitude, geoPointLike.altitude);\n        }\n        /*\n         * The following tslint:disable is due to the fact that the [[WorldCoordinates]]\n         * might be a concrete class which is not available at runtime.\n         * Consider the following example:\n         *\n         *  const x: THREE.Vector3 = new THREE.Vector3(0,0,0);\n         *  const result = EquirectangularProjection.projectPoint<THREE.Vector3>(x);\n         *\n         * Note: type of `result` is Vector3Like and not as expected: THREE.Vector3!\n         */\n        if (!result) {\n            // tslint:disable-next-line:no-object-literal-type-assertion\n            result = { x: 0, y: 0, z: 0 };\n        }\n        result.x = ((geoPoint.longitude + 180) / 360) * EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        const sy = Math.sin(MercatorProjection_1.MercatorProjection.latitudeClamp(geoPoint.latitudeInRadians));\n        result.y =\n            (0.5 - Math.log((1 + sy) / (1 - sy)) / (4 * Math.PI)) *\n                EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        result.z = geoPoint.altitude || 0;\n        return result;\n    }\n    unprojectPoint(worldPoint) {\n        const x = worldPoint.x / EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE - 0.5;\n        const y = 0.5 - worldPoint.y / EarthConstants_1.EarthConstants.EQUATORIAL_CIRCUMFERENCE;\n        const longitude = 360 * x;\n        const latitude = 90 - (360 * Math.atan(Math.exp(-y * 2 * Math.PI))) / Math.PI;\n        return new GeoCoordinates_1.GeoCoordinates(latitude, longitude, worldPoint.z);\n    }\n    projectBox(geoBox, result) {\n        const r = super.projectBox(geoBox, result);\n        if (OrientedBox3Like_1.isOrientedBox3Like(r)) {\n            MathUtils_1.MathUtils.newVector3(1, 0, 0, r.xAxis);\n            MathUtils_1.MathUtils.newVector3(0, -1, 0, r.yAxis);\n            MathUtils_1.MathUtils.newVector3(0, 0, -1, r.zAxis);\n        }\n        return r;\n    }\n    unprojectBox(worldBox) {\n        const minGeo = this.unprojectPoint(worldBox.min);\n        const maxGeo = this.unprojectPoint(worldBox.max);\n        const geoBox = new GeoBox_1.GeoBox(new GeoCoordinates_1.GeoCoordinates(maxGeo.latitude, minGeo.longitude, minGeo.altitude), new GeoCoordinates_1.GeoCoordinates(minGeo.latitude, maxGeo.longitude, maxGeo.altitude));\n        return geoBox;\n    }\n}\nWebMercatorProjection.MAXIMUM_LATITUDE = 1.4844222297453323;\n/**\n * Web Mercator [[Projection]] used to convert geo coordinates to world coordinates and vice versa.\n */\nexports.webMercatorProjection = new WebMercatorProjection();\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst MathUtils_1 = require(\"../math/MathUtils\");\n/**\n * `FlatTileBoundingBoxGenerator` generates bounding boxes in world and geo coordinates for a given\n * TilingScheme.\n */\nclass FlatTileBoundingBoxGenerator {\n    /**\n     * Creates a new `FlatTileBoundingBoxGenerator` that can generate bounding boxes for the given\n     * TilingScheme.\n     *\n     * @param tilingScheme The [[TilingScheme]] used to compute bounding boxes.\n     * @param minElevation The minimum elevation in meters.\n     * @param maxElevation The maximum elevation in meters.\n     */\n    constructor(tilingScheme, minElevation = 0, maxElevation = 0) {\n        this.tilingScheme = tilingScheme;\n        this.minElevation = minElevation;\n        this.maxElevation = maxElevation;\n        this.m_tilingScheme = tilingScheme;\n        this.m_worldBox = tilingScheme.projection.worldExtent(minElevation, maxElevation);\n        const { min, max } = this.m_worldBox;\n        this.m_worldDimensions = { x: max.x - min.x, y: max.y - min.y, z: max.z - min.z };\n    }\n    /**\n     * Returns the [[Projection]] of the [[TilingScheme]].\n     */\n    get projection() {\n        return this.m_tilingScheme.projection;\n    }\n    /**\n     * Returns the [[SubdivisionScheme]] of the [[TilingScheme]].\n     */\n    get subdivisionScheme() {\n        return this.m_tilingScheme.subdivisionScheme;\n    }\n    /**\n     * Returns the bounding box in world coordinates of the given [[TileKey]].\n     *\n     * Example:\n     * ```typescript\n     * const worldBounds = new THREE.Box3();\n     * generator.getWorldBox(geoBox, worldBounds);\n     * console.log(worldBounds.getCenter());\n     * ```\n     *\n     * @param tileKey The TileKey.\n     * @param result The optional object used to store the resulting bounding box in world\n     * coordinates.\n     */\n    getWorldBox(tileKey, result) {\n        const level = tileKey.level;\n        const levelDimensionX = this.subdivisionScheme.getLevelDimensionX(level);\n        const levelDimensionY = this.subdivisionScheme.getLevelDimensionY(level);\n        const sizeX = this.m_worldDimensions.x / levelDimensionX;\n        const sizeY = this.m_worldDimensions.y / levelDimensionY;\n        const originX = this.m_worldBox.min.x + sizeX * tileKey.column;\n        const originY = this.m_worldBox.min.y + sizeY * tileKey.row;\n        if (!result) {\n            result = MathUtils_1.MathUtils.newEmptyBox3();\n        }\n        result.min.x = originX;\n        result.min.y = originY;\n        result.min.z = this.m_worldBox.min.z;\n        result.max.x = originX + sizeX;\n        result.max.y = originY + sizeY;\n        result.max.z = this.m_worldBox.max.z;\n        return result;\n    }\n    /**\n     * Returns the bounding box in geo coordinates for the given [[TileKey]].\n     *\n     * Example:\n     * ```typescript\n     * const geoBox = generator.getGeoBox(worldBounds);\n     * console.log(geoBox.center);\n     * ```\n     *\n     * @param tileKey The [[TileKey]].\n     */\n    getGeoBox(tileKey) {\n        const worldBox = this.getWorldBox(tileKey);\n        return this.projection.unprojectBox(worldBox);\n    }\n}\nexports.FlatTileBoundingBoxGenerator = FlatTileBoundingBoxGenerator;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass HalfQuadTreeSubdivisionScheme {\n    getSubdivisionX() {\n        return 2;\n    }\n    getSubdivisionY(level) {\n        return level === 0 ? 1 : 2;\n    }\n    getLevelDimensionX(level) {\n        // tslint:disable-next-line:no-bitwise\n        return 1 << level;\n    }\n    getLevelDimensionY(level) {\n        // tslint:disable-next-line:no-bitwise\n        return level !== 0 ? 1 << (level - 1) : 1;\n    }\n}\n/**\n * A [[SubdivisionScheme]] used to represent half quadtrees. This particular subdivision scheme is\n * used by the HERE tiling scheme.\n */\nexports.halfQuadTreeSubdivisionScheme = new HalfQuadTreeSubdivisionScheme();\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst TileKey_1 = require(\"./TileKey\");\nclass SubTiles {\n    constructor(tileKey, level, mask) {\n        this.m_tileKey = tileKey;\n        this.m_level = level;\n        // tslint:disable:no-bitwise\n        this.m_count = 1 << (level << 1);\n        this.m_mask = mask;\n        this.m_shift = level > 2 ? (level - 2) << 1 : 0;\n        // tslint:enable:no-bitwise\n    }\n    get length() {\n        return this.m_count;\n    }\n    get level() {\n        return this.m_level;\n    }\n    get tileKey() {\n        return this.m_tileKey;\n    }\n    iterator() {\n        return new SubTiles.Iterator(this);\n    }\n    skip(index) {\n        // tslint:disable:no-bitwise\n        if (this.m_mask !== ~0) {\n            while (index < this.m_count && (this.m_mask & (1 << (index >> this.m_shift))) === 0) {\n                ++index;\n            }\n        }\n        // tslint:enable:no-bitwise\n        return index;\n    }\n}\nexports.SubTiles = SubTiles;\n(function (SubTiles) {\n    class Iterator {\n        constructor(parent, index = 0) {\n            this.m_parent = parent;\n            this.m_index = parent.skip(index);\n        }\n        get value() {\n            const parentKey = this.m_parent.tileKey;\n            const subLevel = this.m_parent.level;\n            return TileKey_1.TileKey.fromRowColumnLevel(\n            // tslint:disable:no-bitwise\n            (parentKey.row << subLevel) | (this.m_index >> subLevel), (parentKey.column << subLevel) | (this.m_index & ((1 << subLevel) - 1)), parentKey.level + subLevel\n            // tslint:enableno-bitwise\n            );\n        }\n        next() {\n            this.m_index = this.m_parent.skip(++this.m_index);\n        }\n    }\n    SubTiles.Iterator = Iterator;\n})(SubTiles = exports.SubTiles || (exports.SubTiles = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GeoCoordinates_1 = require(\"../coordinates/GeoCoordinates\");\nconst TileKey_1 = require(\"./TileKey\");\nclass TileKeyUtils {\n    static geoCoordinatesToTileKey(tilingScheme, geoPoint, level) {\n        const projection = tilingScheme.projection;\n        const subdivisionScheme = tilingScheme.subdivisionScheme;\n        const worldPoint = projection.projectPoint(geoPoint);\n        const cx = subdivisionScheme.getLevelDimensionX(level);\n        const cy = subdivisionScheme.getLevelDimensionY(level);\n        const { min, max } = projection.worldExtent(0, 0);\n        const worldSizeX = max.x - min.x;\n        const worldSizeY = max.y - min.y;\n        if (worldPoint.x < min.x || worldPoint.x > max.x) {\n            return null;\n        }\n        if (worldPoint.y < min.y || worldPoint.y > max.y) {\n            return null;\n        }\n        const column = Math.min(cx - 1, Math.floor((cx * (worldPoint.x - min.x)) / worldSizeX));\n        const row = Math.min(cy - 1, Math.floor((cy * (worldPoint.y - min.y)) / worldSizeY));\n        return TileKey_1.TileKey.fromRowColumnLevel(row, column, level);\n    }\n    static geoRectangleToTileKeys(tilingScheme, geoBox, level) {\n        const wrap = (value, lower, upper) => {\n            if (value < lower) {\n                return upper - ((lower - value) % (upper - lower));\n            }\n            return lower + ((value - lower) % (upper - lower));\n        };\n        const clamp = (x, minVal, maxVal) => {\n            return Math.min(Math.max(x, minVal), maxVal);\n        };\n        // Clamp at the poles and wrap around the international date line.\n        const southWestLongitude = wrap(geoBox.southWest.longitudeInRadians, -Math.PI, Math.PI);\n        const southWestLatitude = clamp(geoBox.southWest.latitudeInRadians, -(Math.PI * 0.5), Math.PI * 0.5);\n        const northEastLongitude = wrap(geoBox.northEast.longitudeInRadians, -Math.PI, Math.PI);\n        const northEastLatitude = clamp(geoBox.northEast.latitudeInRadians, -(Math.PI * 0.5), Math.PI * 0.5);\n        const minTileKey = TileKeyUtils.geoCoordinatesToTileKey(tilingScheme, GeoCoordinates_1.GeoCoordinates.fromRadians(southWestLatitude, southWestLongitude), level);\n        const maxTileKey = TileKeyUtils.geoCoordinatesToTileKey(tilingScheme, GeoCoordinates_1.GeoCoordinates.fromRadians(northEastLatitude, northEastLongitude), level);\n        const columnCount = tilingScheme.subdivisionScheme.getLevelDimensionX(level);\n        if (!minTileKey || !maxTileKey) {\n            throw new Error(\"Invalid coordinates\");\n        }\n        const minColumn = minTileKey.column;\n        let maxColumn = maxTileKey.column;\n        // wrap around case\n        if (southWestLongitude > northEastLongitude) {\n            if (maxColumn !== minColumn) {\n                maxColumn += columnCount;\n            }\n            else {\n                // do not duplicate\n                maxColumn += columnCount - 1;\n            }\n        }\n        const minRow = Math.min(minTileKey.row, maxTileKey.row);\n        const maxRow = Math.max(minTileKey.row, maxTileKey.row);\n        const keys = new Array();\n        for (let row = minRow; row <= maxRow; ++row) {\n            for (let column = minColumn; column <= maxColumn; ++column) {\n                keys.push(TileKey_1.TileKey.fromRowColumnLevel(row, column % columnCount, level));\n            }\n        }\n        return keys;\n    }\n}\nexports.TileKeyUtils = TileKeyUtils;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst SubTiles_1 = require(\"./SubTiles\");\nclass TileTreeTraverse {\n    constructor(subdivisionScheme) {\n        this.m_subdivisionScheme = subdivisionScheme;\n    }\n    subTiles(tileKey) {\n        const subTileCount = this.m_subdivisionScheme.getSubdivisionX(tileKey.level) *\n            this.m_subdivisionScheme.getSubdivisionY(tileKey.level);\n        // tslint:disable-next-line:no-bitwise\n        const subTileMask = ~(~0 << subTileCount);\n        const subTiles = new SubTiles_1.SubTiles(tileKey, 1, subTileMask);\n        const it = subTiles.iterator();\n        const result = new Array();\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < subTiles.length; ++i) {\n            result.push(it.value);\n            it.next();\n        }\n        return result;\n    }\n}\nexports.TileTreeTraverse = TileTreeTraverse;\n","module.exports = THREE;","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Interpolation mode used when computing a [[InterpolatedProperty]] value for a given zoom level.\n */\nvar InterpolationMode;\n(function (InterpolationMode) {\n    InterpolationMode[InterpolationMode[\"Discrete\"] = 0] = \"Discrete\";\n    InterpolationMode[InterpolationMode[\"Linear\"] = 1] = \"Linear\";\n    InterpolationMode[InterpolationMode[\"Cubic\"] = 2] = \"Cubic\";\n})(InterpolationMode = exports.InterpolationMode || (exports.InterpolationMode = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextureCoordinateType;\n(function (TextureCoordinateType) {\n    /**\n     * Texture coordinates are in tile space.\n     * SW of the tile will have (0,0) and NE will have (1,1).\n     */\n    TextureCoordinateType[\"TileSpace\"] = \"tile-space\";\n    /**\n     * Texture coordinates are in equirectangular space.\n     * (u, v) = ( (longitude+180) / 360, (latitude+90) / 180).\n     */\n    TextureCoordinateType[\"EquirectangularSpace\"] = \"equirectangular-space\";\n})(TextureCoordinateType = exports.TextureCoordinateType || (exports.TextureCoordinateType = {}));\n/**\n * Define the stacking option. Enum values for theme file are in \"kebab-case\".\n */\nvar PoiStackMode;\n(function (PoiStackMode) {\n    /**\n     * Show in a stack.\n     */\n    PoiStackMode[\"Show\"] = \"show-in-stack\";\n    /**\n     * Do not show in a stack.\n     */\n    PoiStackMode[\"Hide\"] = \"hide-in-stack\";\n    /**\n     * Show category parent in the stack.\n     */\n    PoiStackMode[\"ShowParent\"] = \"show-parent\";\n})(PoiStackMode = exports.PoiStackMode || (exports.PoiStackMode = {}));\n/**\n * Type guard to check if an object is an instance of `TextureBuffer`.\n */\nfunction isTextureBuffer(object) {\n    return object && object.buffer && typeof object.type === \"string\";\n}\nexports.isTextureBuffer = isTextureBuffer;\n","const QUANTIZED_MESH_HEADER = new Map([\n  ['centerX', Float64Array.BYTES_PER_ELEMENT],\n  ['centerY', Float64Array.BYTES_PER_ELEMENT],\n  ['centerZ', Float64Array.BYTES_PER_ELEMENT],\n\n  ['minHeight', Float32Array.BYTES_PER_ELEMENT],\n  ['maxHeight', Float32Array.BYTES_PER_ELEMENT],\n\n  ['boundingSphereCenterX', Float64Array.BYTES_PER_ELEMENT],\n  ['boundingSphereCenterY', Float64Array.BYTES_PER_ELEMENT],\n  ['boundingSphereCenterZ', Float64Array.BYTES_PER_ELEMENT],\n  ['boundingSphereRadius', Float64Array.BYTES_PER_ELEMENT],\n\n  ['horizonOcclusionPointX', Float64Array.BYTES_PER_ELEMENT],\n  ['horizonOcclusionPointY', Float64Array.BYTES_PER_ELEMENT],\n  ['horizonOcclusionPointZ', Float64Array.BYTES_PER_ELEMENT]\n])\n\nfunction decodeZigZag (value) {\n  return (value >> 1) ^ (-(value & 1))\n}\n\nfunction decodeHeader (dataView) {\n  let position = 0\n  const header = {}\n\n  for (let [key, bytesCount] of QUANTIZED_MESH_HEADER) {\n    const getter = bytesCount === 8 ? dataView.getFloat64 : dataView.getFloat32\n\n    header[key] = getter.call(dataView, position, true)\n    position += bytesCount\n  }\n\n  return { header, headerEndPosition: position }\n}\n\nfunction decodeVertexData (dataView, headerEndPosition) {\n  let position = headerEndPosition\n  const elementsPerVertex = 3\n  const vertexCount = dataView.getUint32(position, true)\n  const vertexData = new Uint16Array(vertexCount * elementsPerVertex)\n\n  position += Uint32Array.BYTES_PER_ELEMENT\n\n  const bytesPerArrayElement = Uint16Array.BYTES_PER_ELEMENT\n  const elementArrayLength = vertexCount * bytesPerArrayElement\n  const uArrayStartPosition = position\n  const vArrayStartPosition = uArrayStartPosition + elementArrayLength\n  const heightArrayStartPosition = vArrayStartPosition + elementArrayLength\n\n  let u = 0\n  let v = 0\n  let height = 0\n\n  for (let i = 0; i < vertexCount; i++) {\n    u += decodeZigZag(dataView.getUint16(uArrayStartPosition + bytesPerArrayElement * i, true))\n    v += decodeZigZag(dataView.getUint16(vArrayStartPosition + bytesPerArrayElement * i, true))\n    height += decodeZigZag(dataView.getUint16(heightArrayStartPosition + bytesPerArrayElement * i, true))\n\n    vertexData[i] = u\n    vertexData[i + vertexCount] = v\n    vertexData[i + vertexCount * 2] = height\n  }\n\n  position += elementArrayLength * 3\n\n  return { vertexData, vertexDataEndPosition: position }\n}\n\nfunction decodeIndex (buffer, position, indicesCount, bytesPerIndex, encoded = true) {\n  let indices\n\n  if (bytesPerIndex === 2) {\n    indices = new Uint16Array(buffer, position, indicesCount)\n  } else {\n    indices = new Uint32Array(buffer, position, indicesCount)\n  }\n\n  if (!encoded) {\n    return indices\n  }\n\n  let highest = 0\n\n  for (let i = 0; i < indices.length; ++i) {\n    let code = indices[i]\n\n    indices[i] = highest - code\n\n    if (code === 0) {\n      ++highest\n    }\n  }\n\n  return indices\n}\n\nfunction decodeTriangleIndices (dataView, vertexData, vertexDataEndPosition) {\n  let position = vertexDataEndPosition\n  const elementsPerVertex = 3\n  const vertexCount = vertexData.length / elementsPerVertex\n  const bytesPerIndex = vertexCount > 65536\n    ? Uint32Array.BYTES_PER_ELEMENT\n    : Uint16Array.BYTES_PER_ELEMENT\n\n  if (position % bytesPerIndex !== 0) {\n    position += bytesPerIndex - (position % bytesPerIndex)\n  }\n\n  const triangleCount = dataView.getUint32(position, true)\n  position += Uint32Array.BYTES_PER_ELEMENT\n\n  const triangleIndicesCount = triangleCount * 3\n  const triangleIndices = decodeIndex(\n    dataView.buffer,\n    position,\n    triangleIndicesCount,\n    bytesPerIndex\n  )\n  position += triangleIndicesCount * bytesPerIndex\n\n  return {\n    triangleIndicesEndPosition: position,\n    triangleIndices\n  }\n}\n\nfunction decodeEdgeIndices (dataView, vertexData, triangleIndicesEndPosition) {\n  let position = triangleIndicesEndPosition\n  const elementsPerVertex = 3\n  const vertexCount = vertexData.length / elementsPerVertex\n  const bytesPerIndex = vertexCount > 65536\n    ? Uint32Array.BYTES_PER_ELEMENT\n    : Uint16Array.BYTES_PER_ELEMENT\n\n  const westVertexCount = dataView.getUint32(position, true)\n  position += Uint32Array.BYTES_PER_ELEMENT\n\n  const westIndices = decodeIndex(dataView.buffer, position, westVertexCount, bytesPerIndex, false)\n  position += westVertexCount * bytesPerIndex\n\n  const southVertexCount = dataView.getUint32(position, true)\n  position += Uint32Array.BYTES_PER_ELEMENT\n\n  const southIndices = decodeIndex(dataView.buffer, position, southVertexCount, bytesPerIndex, false)\n  position += southVertexCount * bytesPerIndex\n\n  const eastVertexCount = dataView.getUint32(position, true)\n  position += Uint32Array.BYTES_PER_ELEMENT\n\n  const eastIndices = decodeIndex(dataView.buffer, position, eastVertexCount, bytesPerIndex, false)\n  position += eastVertexCount * bytesPerIndex\n\n  const northVertexCount = dataView.getUint32(position, true)\n  position += Uint32Array.BYTES_PER_ELEMENT\n\n  const northIndices = decodeIndex(dataView.buffer, position, northVertexCount, bytesPerIndex, false)\n  position += northVertexCount * bytesPerIndex\n\n  return {\n    edgeIndicesEndPosition: position,\n    westIndices,\n    southIndices,\n    eastIndices,\n    northIndices\n  }\n}\n\nfunction decodeVertexNormalsExtension (extensionDataView) {\n  return new Uint8Array(\n    extensionDataView.buffer, extensionDataView.byteOffset, extensionDataView.byteLength\n  )\n}\n\nfunction decodeWaterMaskExtension (extensionDataView) {\n  return extensionDataView.buffer.slice(\n    extensionDataView.byteOffset,\n    extensionDataView.byteOffset + extensionDataView.byteLength\n  )\n}\n\nfunction decodeExtensions (dataView, indicesEndPosition) {\n  const extensions = {}\n\n  if (dataView.byteLength <= indicesEndPosition) {\n    return { extensions, extensionsEndPosition: indicesEndPosition }\n  }\n\n  let position = indicesEndPosition\n\n  while (position < dataView.byteLength) {\n    const extensionId = dataView.getUint8(position, true)\n    position += Uint8Array.BYTES_PER_ELEMENT\n\n    const extensionLength = dataView.getUint32(position, true)\n    position += Uint32Array.BYTES_PER_ELEMENT\n\n    const extensionView = new DataView(dataView.buffer, position, extensionLength)\n\n    switch (extensionId) {\n      case 1: {\n        extensions.vertexNormals = decodeVertexNormalsExtension(extensionView)\n\n        break\n      }\n      case 2: {\n        extensions.waterMask = decodeWaterMaskExtension(extensionView)\n\n        break\n      }\n      default: {\n        console.warn(`Unknown extension with id ${extensionId}`)\n      }\n    }\n\n    position += extensionLength\n  }\n\n  return { extensions, extensionsEndPosition: position }\n}\n\nexport const DECODING_STEPS = {\n  header: 0,\n  vertices: 1,\n  triangleIndices: 2,\n  edgeIndices: 3,\n  extensions: 4\n}\n\nconst DEFAULT_OPTIONS = {\n  maxDecodingStep: DECODING_STEPS.extensions\n}\n\nexport default function decode (data, userOptions) {\n  const options = Object.assign({}, DEFAULT_OPTIONS, userOptions)\n  const view = new DataView(data)\n  const { header, headerEndPosition } = decodeHeader(view)\n\n  if (options.maxDecodingStep < DECODING_STEPS.vertices) {\n    return { header }\n  }\n\n  const { vertexData, vertexDataEndPosition } = decodeVertexData(view, headerEndPosition)\n\n  if (options.maxDecodingStep < DECODING_STEPS.triangleIndices) {\n    return { header, vertexData }\n  }\n\n  const {\n    triangleIndices,\n    triangleIndicesEndPosition\n  } = decodeTriangleIndices(view, vertexData, vertexDataEndPosition)\n\n  if (options.maxDecodingStep < DECODING_STEPS.edgeIndices) {\n    return { header, vertexData, triangleIndices }\n  }\n\n  const {\n    westIndices,\n    southIndices,\n    eastIndices,\n    northIndices,\n    edgeIndicesEndPosition\n  } = decodeEdgeIndices(view, vertexData, triangleIndicesEndPosition)\n\n  if (options.maxDecodingStep < DECODING_STEPS.extensions) {\n    return {\n      header,\n      vertexData,\n      triangleIndices,\n      westIndices,\n      northIndices,\n      eastIndices,\n      southIndices\n    }\n  }\n\n  const { extensions } = decodeExtensions(view, edgeIndicesEndPosition)\n\n  return {\n    header,\n    vertexData,\n    triangleIndices,\n    westIndices,\n    northIndices,\n    eastIndices,\n    southIndices,\n    extensions\n  }\n}\n","/*\n * Copyright © 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport decode from '@here/quantized-mesh-decoder'\n\nexport const QUANTIZED_MESH_TILE_DECODER_ID = 'quantized-mesh-tile-decoder'\n\nexport class QuantizedMeshTileDecoder {\n  connect () {\n    return Promise.resolve()\n  }\n\n  /**\n   * Rearranges vertices components in more THREE.js-friendly\n   * way [x, y, z, x, y, z, ...] instead of\n   * [x, x, x,..., y, y, y,... z, z, z, ...].\n   *\n   * Also, scales x, y, z to be in [0, 1] range.\n   *\n   * @param {Uint16Array} vertexData\n   * @returns {Float32Array}\n   */\n  constructPositionArray (vertexData) {\n    const elementsPerVertex = 3\n    const vertexCount = vertexData.length / 3\n    const positionAttributeArray = new Float32Array(vertexData.length)\n\n    const vertexMaxPosition = 32767\n\n    for (let i = 0; i < vertexCount; i++) {\n      positionAttributeArray[i * elementsPerVertex] = vertexData[i] / vertexMaxPosition\n      positionAttributeArray[i * elementsPerVertex + 1] = vertexData[i + vertexCount] / vertexMaxPosition\n      positionAttributeArray[i * elementsPerVertex + 2] = vertexData[i + vertexCount * 2] / vertexMaxPosition\n    }\n\n    return positionAttributeArray\n  }\n\n  /**\n   * Drops z-coordinate of each vertex to make a UV-map.\n   *\n   * @param {Float32Array} positionArray\n   * @returns {Float32Array}\n   */\n  constructUvArray (positionArray) {\n    return positionArray.filter((item, index) => index % 3 < 2)\n  }\n\n  decodeTile (data) {\n    const decodedTile = decode(data)\n    const positionArray = this.constructPositionArray(decodedTile.vertexData)\n    const uvArray = this.constructUvArray(positionArray)\n    const vertexAttributes = []\n\n    vertexAttributes.push(\n      {\n        name: 'position',\n        type: 'float',\n        buffer: positionArray,\n        itemCount: 3,\n        metadata: decodedTile.header\n      },\n      {\n        name: 'uv',\n        type: 'float',\n        buffer: uvArray,\n        itemCount: 2\n      }\n    )\n\n    Object.keys(decodedTile.extensions).forEach(key => {\n      if (key === 'vertexNormals' && decodedTile.extensions[key].byteLength > 0) {\n        let array = new Uint8Array(decodedTile.extensions[key])\n        vertexAttributes.push({\n          name: 'octNormal',\n          type: 'float',\n          buffer: array,\n          itemCount: 2\n        })\n      }\n    })\n\n    const verityTile = {\n      techniques: [],\n      geometries: [\n        {\n          index: {\n            name: 'index',\n            type: 'uint16',\n            buffer: decodedTile.triangleIndices,\n            itemCount: 1\n          },\n          vertexAttributes\n        }\n      ]\n    }\n\n    return Promise.resolve(verityTile)\n  }\n}\n","/*\n * Copyright © 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/* eslint-env worker */\nimportScripts('three/build/three.js')\n\n// Must be require(), not import, to be loaded after importScript()\nrequire('@here/harp-terrain-datasource/src/quantized-mesh/tile-decoder-worker')\n","/*\n * Copyright © 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nconst {WorkerServiceManager, TileDecoderService} = require('@here/harp-mapview-decoder/index-worker')\nconst {QUANTIZED_MESH_TILE_DECODER_ID} = require('./tile-decoder')\nconst {QuantizedMeshTileDecoder} = require('./tile-decoder')\n\nWorkerServiceManager.getInstance().register({\n  serviceType: QUANTIZED_MESH_TILE_DECODER_ID,\n  factory: (serviceId) => {\n    return TileDecoderService.start(serviceId, new QuantizedMeshTileDecoder())\n  }\n})\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/ThemedTileDecoder\"));\n__export(require(\"./lib/TileDecoderService\"));\n__export(require(\"./lib/TilerService\"));\n__export(require(\"./lib/WorkerService\"));\n__export(require(\"./lib/WorkerServiceManager\"));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst index_decoder_1 = require(\"@here/harp-datasource-protocol/index-decoder\");\n/**\n * `ThemedTileDecoder` implements an [[ITileDecoder]] which uses a [[Theme]] to apply styles to the\n * objects displayed in the map.\n *\n * By default, decoders are executed in web workers (using [[TileDecoderService]]) for performance\n * reasons.\n */\nclass ThemedTileDecoder {\n    constructor() {\n        this.m_storageLevelOffset = 0;\n    }\n    dispose() {\n        // implemented in subclasses\n    }\n    decodeTile(data, tileKey, projection) {\n        if (this.m_styleSetEvaluator === undefined) {\n            return Promise.reject(new Error(\"No style is defined\"));\n        }\n        return this.decodeThemedTile(data, tileKey, this.m_styleSetEvaluator, projection);\n    }\n    // tslint:disable:no-unused-variable\n    getTileInfo(data, tileKey, projection) {\n        return Promise.resolve(undefined);\n    }\n    // tslint:disable:no-unused-variable\n    configure(styleSet, languages, options) {\n        if (styleSet !== undefined) {\n            this.m_styleSetEvaluator = new index_decoder_1.StyleSetEvaluator(styleSet);\n        }\n        if (languages !== undefined) {\n            this.languages = languages;\n        }\n        if (options !== undefined && options.storageLevelOffset !== undefined) {\n            this.m_storageLevelOffset = options.storageLevelOffset;\n        }\n    }\n}\nexports.ThemedTileDecoder = ThemedTileDecoder;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/StyleSetEvaluator\"));\n__export(require(\"./lib/Extruder\"));\n__export(require(\"./lib/Outliner\"));\n__export(require(\"./lib/Expr\"));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_utils_1 = require(\"@here/harp-utils\");\nconst Expr_1 = require(\"./Expr\");\nconst InterpolatedProperty_1 = require(\"./InterpolatedProperty\");\nconst InterpolatedPropertyDefs_1 = require(\"./InterpolatedPropertyDefs\");\nexports.logger = harp_utils_1.LoggerManager.instance.create(\"StyleSetEvaluator\");\n/**\n * Combine data from datasource and apply the rules from a specified theme to show it on the map.\n */\nclass StyleSetEvaluator {\n    constructor(styleSet) {\n        this.m_renderOrderBiasGroups = new Map();\n        this.m_techniques = [];\n        let techniqueRenderOrder = 0;\n        const cloneStyle = (style) => {\n            return Object.assign({}, style, { styles: style.styles !== undefined\n                    ? style.styles.map(subStyle => cloneStyle(subStyle))\n                    : undefined });\n        };\n        this.styleSet = styleSet.map(style => cloneStyle(style));\n        const computeDefaultRenderOrder = (style) => {\n            if (style.renderOrderBiasGroup !== undefined) {\n                const renderOrderBiasGroupOrder = style.renderOrderBiasGroup\n                    ? this.m_renderOrderBiasGroups.get(style.renderOrderBiasGroup)\n                    : undefined;\n                if (style.renderOrderBiasRange !== undefined &&\n                    renderOrderBiasGroupOrder === undefined) {\n                    if (style.renderOrder !== undefined) {\n                        exports.logger.warn(\"WARN: style.renderOrder will be overridden if \" +\n                            \"renderOrderBiasGroup is set:\", style);\n                    }\n                    const [minRange, maxRange] = style.renderOrderBiasRange;\n                    style.renderOrder =\n                        minRange < 0\n                            ? techniqueRenderOrder + Math.abs(minRange)\n                            : techniqueRenderOrder;\n                    techniqueRenderOrder += Math.abs(minRange) + maxRange;\n                    if (style.renderOrderBiasGroup) {\n                        this.m_renderOrderBiasGroups.set(style.renderOrderBiasGroup, style.renderOrder);\n                    }\n                    techniqueRenderOrder++;\n                }\n                else if (renderOrderBiasGroupOrder) {\n                    if (style.renderOrder !== undefined) {\n                        exports.logger.warn(\"WARN: style.renderOrder will be overridden if \" +\n                            \"renderOrderBiasGroup is set:\", style);\n                    }\n                    style.renderOrder = renderOrderBiasGroupOrder;\n                }\n            }\n            // search through child styles\n            if (style.styles !== undefined) {\n                for (const currStyle of style.styles) {\n                    computeDefaultRenderOrder(currStyle);\n                }\n            }\n            else {\n                if (style.technique !== undefined && style.renderOrder === undefined) {\n                    style.renderOrder = techniqueRenderOrder++;\n                }\n            }\n        };\n        for (const style of this.styleSet) {\n            computeDefaultRenderOrder(style);\n        }\n    }\n    /**\n     * Find all techniques that fit the current objects' environment.\n     * *The techniques in the resulting array may not be modified* since they are being reused for\n     * identical objects.\n     *\n     * @param env The objects environment, i.e. the attributes that are relevant for its\n     * representation.\n     */\n    getMatchingTechniques(env) {\n        const result = [];\n        const styleStack = new Array();\n        for (const currStyle of this.styleSet) {\n            if (styleStack.length !== 0) {\n                throw new Error(\"Internal error: style stack cleanup failed\");\n            }\n            if (this.processStyle(env, styleStack, currStyle, result)) {\n                break;\n            }\n        }\n        return result;\n    }\n    /**\n     * Add a technique to the current array of techniques. Add its index to the style, so next time\n     * the technique can be found directly from this index.\n     *\n     * @param style Style that defines technique\n     * @param technique Technique to add\n     */\n    addTechniqueToIndex(technique) {\n        const index = this.m_techniques.length;\n        technique._index = index;\n        this.m_techniques.push(technique);\n        return index;\n    }\n    /**\n     * Get the (current) array of techniques that have been created during decoding.\n     */\n    get techniques() {\n        return this.m_techniques;\n    }\n    /**\n     * Shorten the style object for debug log. Remove special strings (starting with \"_\") as well\n     * as the sub-styles of style groups.\n     *\n     * @param key Key in object\n     * @param value value in object\n     */\n    cleanupStyle(key, value) {\n        // Filtering out properties\n        if (key === \"styles\") {\n            return \"[...]\";\n        }\n        if (key.startsWith(\"_\")) {\n            return undefined;\n        }\n        return value;\n    }\n    /**\n     * Process a style (and its sub-styles) hierarchically to look for the technique that fits the\n     * current objects' environment. The attributes of the styles are assembled to create a unique\n     * technique for every object.\n     *\n     * @param env The objects environment, i.e. the attributes that are relevant for its\n     *            representation.\n     * @param styleStack Stack of styles containing the hierarchy of styles up to this point.\n     * @param style Current style (could also be top of stack).\n     * @param result The array of resulting techniques. There may be more than one technique per\n     *               object, resulting in multiple graphical objects for representation.\n     * @returns `true` if style has been found and processing is finished. `false` if not found, or\n     *          more than one technique should be applied.\n     */\n    processStyle(env, styleStack, style, result) {\n        if (style.when !== undefined) {\n            // optimization: Lazy evaluation of when-expression\n            if (style._whenExpr === undefined) {\n                style._whenExpr = Expr_1.Expr.parse(style.when);\n            }\n            if (!style._whenExpr.evaluate(env)) {\n                return false;\n            }\n        }\n        // search through sub-styles\n        if (style.styles !== undefined) {\n            if (style.debug) {\n                exports.logger.log(\"\\n======== style group =========\\nenv:\", JSON.stringify(env.unmap(), undefined, 2), \"\\nstyle group:\", JSON.stringify(style, this.cleanupStyle, 2));\n            }\n            styleStack.push(style);\n            for (const currStyle of style.styles) {\n                if (this.processStyle(env, styleStack, currStyle, result)) {\n                    styleStack.pop();\n                    return true;\n                }\n            }\n            styleStack.pop();\n        }\n        else {\n            // we found a technique!\n            if (style.technique !== undefined) {\n                if (style.technique !== \"none\") {\n                    // Check if we already assembled the technique for exactly this style. If we\n                    // have, we return the preassembled technique object. Otherwise we assemble the\n                    // technique from all parent styles' attributes and the current stales'\n                    // attributes, and add it to the cached techniques.\n                    if (style._index === undefined) {\n                        const technique = this.createTechnique(style, styleStack);\n                        result.push(technique);\n                        if (style.debug) {\n                            exports.logger.log(\"\\n======== style w/ technique =========\\nenv:\", JSON.stringify(env.unmap(), undefined, 2), \"\\nstyle:\", JSON.stringify(style, this.cleanupStyle, 2), \"\\ntechnique:\", JSON.stringify(technique, this.cleanupStyle, 2));\n                        }\n                    }\n                    else {\n                        result.push(this.m_techniques[style._index]);\n                    }\n                }\n                // stop processing if \"final\" is set\n                return style.final === true;\n            }\n        }\n        return false;\n    }\n    createTechnique(style, styleStack) {\n        const technique = {};\n        technique.name = style.technique;\n        const addAttributes = (currStyle) => {\n            if (currStyle.renderOrder !== undefined) {\n                technique.renderOrder = currStyle.renderOrder;\n            }\n            if (currStyle.transient !== undefined) {\n                technique.transient = currStyle.transient;\n            }\n            if (currStyle.renderOrderBiasProperty !== undefined) {\n                technique.renderOrderBiasProperty = currStyle.renderOrderBiasProperty;\n            }\n            if (currStyle.labelProperty !== undefined) {\n                technique.label = currStyle.labelProperty;\n            }\n            if (currStyle.renderOrderBiasRange !== undefined) {\n                technique.renderOrderBiasRange = currStyle.renderOrderBiasRange;\n            }\n            if (currStyle.renderOrderBiasGroup !== undefined) {\n                technique.renderOrderBiasGroup = currStyle.renderOrderBiasGroup;\n            }\n            if (currStyle.secondaryRenderOrder !== undefined) {\n                technique.secondaryRenderOrder = currStyle.secondaryRenderOrder;\n            }\n            if (currStyle.attr !== undefined) {\n                Object.getOwnPropertyNames(currStyle.attr).forEach(property => {\n                    const prop = currStyle.attr[property];\n                    if (InterpolatedProperty_1.isInterpolatedPropertyDefinition(prop)) {\n                        switch (typeof prop.values[0]) {\n                            default:\n                            case \"number\":\n                                technique[property] = createInterpolatedProperty(prop);\n                                break;\n                            case \"boolean\":\n                                technique[property] = createInterpolatedProperty(prop);\n                                break;\n                            case \"string\":\n                                technique[property] = createInterpolatedProperty(prop);\n                                break;\n                        }\n                    }\n                    else {\n                        technique[property] = prop;\n                    }\n                });\n            }\n        };\n        for (const currStyle of styleStack) {\n            addAttributes(currStyle);\n        }\n        addAttributes(style);\n        style._index = this.addTechniqueToIndex(technique);\n        return technique;\n    }\n}\nexports.StyleSetEvaluator = StyleSetEvaluator;\nfunction removeDuplicatePropertyValues(p) {\n    for (let i = 0; i < p.values.length; ++i) {\n        const firstIdx = p.zoomLevels.findIndex((a) => {\n            return a === p.zoomLevels[i];\n        });\n        if (firstIdx !== i) {\n            p.zoomLevels.splice(--i, 1);\n            p.values.splice(--i, 1);\n        }\n    }\n}\nfunction createInterpolatedProperty(prop) {\n    removeDuplicatePropertyValues(prop);\n    const propKeys = new Float32Array(prop.zoomLevels);\n    let propValues;\n    switch (typeof prop.values[0]) {\n        default:\n        case \"number\":\n            propValues = new Float32Array(prop.values);\n            return {\n                interpolationMode: prop.interpolation !== undefined\n                    ? InterpolatedPropertyDefs_1.InterpolationMode[prop.interpolation]\n                    : InterpolatedPropertyDefs_1.InterpolationMode.Discrete,\n                zoomLevels: propKeys,\n                values: propValues\n            };\n        case \"boolean\":\n            propValues = new Float32Array(prop.values.length);\n            for (let i = 0; i < prop.values.length; ++i) {\n                propValues[i] = prop.values[i] ? 1 : 0;\n            }\n            return {\n                interpolationMode: InterpolatedPropertyDefs_1.InterpolationMode.Discrete,\n                zoomLevels: propKeys,\n                values: propValues\n            };\n        case \"string\":\n            propValues = new Float32Array(prop.values.length * 3);\n            for (let i = 0; i < prop.values.length; ++i) {\n                const value = +prop.values[i].replace(\"#\", \"0x\");\n                // tslint:disable:no-bitwise\n                const channels = [\n                    ((value >> 16) & 255) / 255,\n                    ((value >> 8) & 255) / 255,\n                    ((value >> 0) & 255) / 255\n                ];\n                // tslint:disable:bitwise\n                for (let j = 0; j < prop.values.length * 3; ++j) {\n                    propValues[i * 3 + j] = channels[j];\n                }\n            }\n            return {\n                interpolationMode: prop.interpolation !== undefined\n                    ? InterpolatedPropertyDefs_1.InterpolationMode[prop.interpolation]\n                    : InterpolatedPropertyDefs_1.InterpolationMode.Discrete,\n                zoomLevels: propKeys,\n                values: propValues\n            };\n    }\n}\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The `PriorityListGroup` contains a list of [[PriorityListElement]]s that all have the same\n * (integer) priority.\n */\nclass PriorityListGroup {\n    constructor(priority, elements = new Array()) {\n        this.priority = priority;\n        this.elements = elements;\n    }\n    /**\n     * Create and return a deep copy of the `PriorityListGroup<T>`.\n     *\n     * @returns A clone of the `PriorityListGroup<T>`.\n     */\n    clone() {\n        return new PriorityListGroup(this.priority, this.elements.slice());\n    }\n}\nexports.PriorityListGroup = PriorityListGroup;\n/**\n * The `GroupedPriorityList` contains a [[PriorityListGroupMap]] to manage a larger number of items\n * in priority groups.\n */\nclass GroupedPriorityList {\n    constructor() {\n        this.groups = new Map();\n    }\n    /**\n     * Add an element to the `GroupedPriorityList`. Selects group based on the elements priority.\n     *\n     * @param element Element to be added.\n     */\n    add(element) {\n        this.getGroup(element.priority).elements.push(element);\n    }\n    /**\n     * Remove an element from the `GroupedPriorityList`.\n     *\n     * Note: It is required that the priority is the same as it was when the element has been added.\n     * Otherwise, the removal will fail.\n     *\n     * @param element Element to be removed.\n     * @returns `True` if the element was removed, `false` otherwise.\n     */\n    remove(element) {\n        const group = this.getGroup(element.priority);\n        if (group !== undefined) {\n            const foundIndex = group.elements.indexOf(element);\n            if (foundIndex >= 0) {\n                group.elements.splice(foundIndex, 1);\n                if (group.elements.length === 0) {\n                    const normalizedPriority = Math.floor(element.priority);\n                    this.groups.delete(normalizedPriority);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Remove all internal [[PriorityListGroup]]s.\n     */\n    clear() {\n        this.groups.clear();\n    }\n    /**\n     * Merge another [[GroupedPriorityList]] into this one.\n     *\n     * @param other Other group to merge.\n     */\n    merge(other) {\n        for (const otherGroup of other.groups) {\n            const group = this.findGroup(otherGroup[1].priority);\n            if (group === undefined) {\n                this.groups.set(Math.floor(otherGroup[1].priority), otherGroup[1].clone());\n                continue;\n            }\n            group.elements = group.elements.concat(otherGroup[1].elements);\n        }\n        return this;\n    }\n    /**\n     * Return a sorted list of [[PriorityListGroup]]s.\n     */\n    get sortedGroups() {\n        const groups = [];\n        for (const priorityList of this.groups) {\n            groups.push(priorityList[1]);\n        }\n        groups.sort((a, b) => {\n            return b.priority - a.priority;\n        });\n        return groups;\n    }\n    /**\n     * Apply function to all elements in this `GroupedPriorityList`.\n     *\n     * @param {(element: T) => void} fun Function to apply.\n     */\n    forEach(fun) {\n        for (const group of this.groups) {\n            group[1].elements.forEach(fun);\n        }\n    }\n    /**\n     * Count the number of elements in this `GroupedPriorityList`.\n     */\n    count() {\n        let n = 0;\n        for (const group of this.groups) {\n            n += group[1].elements.length;\n        }\n        return n;\n    }\n    /**\n     * Get group of elements that have the same (integer) priority.\n     *\n     * @param priority The priority to retrieve all elements from.\n     */\n    findGroup(priority) {\n        const normalizedPriority = Math.floor(priority);\n        const group = this.groups.get(normalizedPriority);\n        return group;\n    }\n    /**\n     * Get group of elements that have the same (integer) priority.\n     *\n     * @param priority The priority to retrieve all elements from.\n     */\n    getGroup(priority) {\n        let group = this.findGroup(priority);\n        if (group === undefined) {\n            const normalizedPriority = Math.floor(priority);\n            group = new PriorityListGroup(normalizedPriority);\n            this.groups.set(normalizedPriority, group);\n        }\n        return group;\n    }\n}\nexports.GroupedPriorityList = GroupedPriorityList;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./ConsoleChannel\"));\n__export(require(\"./ILogger\"));\n__export(require(\"./Logger\"));\n__export(require(\"./LoggerManager\"));\n__export(require(\"./MultiChannel\"));\n__export(require(\"./WorkerChannel\"));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst LoggerManagerImpl_1 = require(\"./LoggerManagerImpl\");\n/**\n * The LoggerManager class implements a singleton object that handles logging.\n *\n * Example:\n *\n * ```typescript\n *\n * const logger = LoggerManager.instance.create(\"MyFontLoaderClass\");\n * if (missingFonts.length > 0) {\n *     logger.error(\"These fonts can not be loaded: \", missingFonts);\n * } else {\n *     logger.log(\"All fonts have been loaded.\");\n * }\n * ```\n */\nclass LoggerManager {\n    static get instance() {\n        return this.m_instance || (this.m_instance = new LoggerManagerImpl_1.LoggerManagerImpl());\n    }\n}\nexports.LoggerManager = LoggerManager;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ConsoleChannel_1 = require(\"./ConsoleChannel\");\nconst Logger_1 = require(\"./Logger\");\nconst WorkerChannel_1 = require(\"./WorkerChannel\");\n/**\n * LoggerManagerImpl is the class for the singleton instance of the logger manager.\n * It handles channels and loggers.\n */\nclass LoggerManagerImpl {\n    constructor() {\n        this.m_loggers = [];\n        this.channel =\n            typeof self === \"undefined\" || typeof self.document !== \"undefined\"\n                ? new ConsoleChannel_1.ConsoleChannel()\n                : new WorkerChannel_1.WorkerChannel();\n    }\n    getLoggerNames() {\n        return this.m_loggers.map(logger => logger.name);\n    }\n    getLogger(name) {\n        return this.m_loggers.find(logger => logger.name === name);\n    }\n    create(loggerName, options) {\n        const logger = new Logger_1.Logger(loggerName, this.channel, options);\n        this.m_loggers.push(logger);\n        return logger;\n    }\n    dispose(logger) {\n        const found = this.m_loggers.indexOf(logger);\n        if (found < 0) {\n            throw new Error(`Cannot unregister \"${logger}\" : no such logger registered.`);\n        }\n        this.m_loggers.splice(found, 1);\n    }\n    updateAll(options) {\n        for (const logger of this.m_loggers) {\n            logger.update(options);\n        }\n    }\n    update(loggerName, config) {\n        for (const logger of this.m_loggers) {\n            if (logger.name === loggerName) {\n                logger.update(config);\n            }\n        }\n    }\n    enableAll(enabled) {\n        for (const logger of this.m_loggers) {\n            logger.enabled = enabled;\n        }\n    }\n    enable(loggerName, value) {\n        this.update(loggerName, { enabled: value });\n    }\n    setLogLevelForAll(level) {\n        for (const logger of this.m_loggers) {\n            logger.level = level;\n        }\n    }\n    setLogLevel(loggerName, level) {\n        this.update(loggerName, { level });\n    }\n    setChannel(channel) {\n        this.channel = channel;\n    }\n}\nexports.LoggerManagerImpl = LoggerManagerImpl;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Class allowing mixing several channels.\n */\nclass MultiChannel {\n    constructor(...channels) {\n        this.channels = [];\n        this.channels = channels;\n    }\n    error(message, ...optionalParams) {\n        for (const channel of this.channels) {\n            channel.error(message, ...optionalParams);\n        }\n    }\n    debug(message, ...optionalParams) {\n        for (const channel of this.channels) {\n            channel.debug(message, ...optionalParams);\n        }\n    }\n    info(message, ...optionalParams) {\n        for (const channel of this.channels) {\n            channel.info(message, ...optionalParams);\n        }\n    }\n    log(message, ...optionalParams) {\n        for (const channel of this.channels) {\n            channel.log(message, ...optionalParams);\n        }\n    }\n    trace(message, ...optionalParams) {\n        for (const channel of this.channels) {\n            channel.trace(message, ...optionalParams);\n        }\n    }\n    warn(message, ...optionalParams) {\n        for (const channel of this.channels) {\n            channel.warn(message, ...optionalParams);\n        }\n    }\n}\nexports.MultiChannel = MultiChannel;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Math2D;\n(function (Math2D) {\n    /**\n     * Alternative 2D box object with less memory impact (four numbers instead of two min/max\n     * objects with two numbers each). Should be faster.\n     */\n    class Box {\n        /**\n         * Alternative 2D box object with less memory impact (four numbers instead of two min/max\n         * objects with two numbers each). Should be faster.\n         *\n         * @param x New X value.\n         * @param y New y value.\n         * @param w New w value.\n         * @param h New h value.\n         */\n        constructor(x = 0, y = 0, w = 0, h = 0) {\n            this.x = x;\n            this.y = y;\n            this.w = w;\n            this.h = h;\n        }\n        /**\n         * Set new values to all properties of the box.\n         *\n         * @param x New X value.\n         * @param y New y value.\n         * @param w New w value.\n         * @param h New h value.\n         */\n        set(x, y, w, h) {\n            this.x = x;\n            this.y = y;\n            this.w = w;\n            this.h = h;\n        }\n        /**\n         * Test box for inclusion of point.\n         *\n         * @param x X coordinate of point.\n         * @param y Y coordinate of point.\n         */\n        contains(x, y) {\n            return this.x <= x && this.x + this.w >= x && this.y <= y && this.y + this.h >= y;\n        }\n        /**\n         * Test two boxes for intersection.\n         *\n         * @param other Box 2 to test for intersection.\n         */\n        intersects(other) {\n            return (this.x <= other.x + other.w &&\n                this.x + this.w >= other.x &&\n                this.y <= other.y + other.h &&\n                this.y + this.h >= other.y);\n        }\n    }\n    Math2D.Box = Box;\n    /**\n     * Compute squared distance between two 2D points `a` and `b`.\n     *\n     * @param ax Point a.x\n     * @param ay Point a.y\n     * @param bx Point b.x\n     * @param by Point b.y\n     * @returns Squared distance between the two points\n     */\n    function distSquared(ax, ay, bx, by) {\n        return (ax - bx) * (ax - bx) + (ay - by) * (ay - by);\n    }\n    Math2D.distSquared = distSquared;\n    /**\n     * Computes the squared length of a line.\n     *\n     * @param line An array of that forms a line via [x,y,z,x,y,z,...] tuples.\n     */\n    function computeSquaredLineLength(line) {\n        let squaredLineLength = 0;\n        const length = line.length - 4;\n        for (let i = 0; i < length; i += 3) {\n            const xDiff = line[i + 3] - line[i];\n            const yDiff = line[i + 4] - line[i + 1];\n            squaredLineLength += xDiff * xDiff + yDiff * yDiff;\n        }\n        return squaredLineLength;\n    }\n    Math2D.computeSquaredLineLength = computeSquaredLineLength;\n    /**\n     * Compute squared distance between a 2D point and a 2D line segment.\n     *\n     * @param px Test point X\n     * @param py Test point y\n     * @param l0x Line segment start X\n     * @param l0y Line segment start Y\n     * @param l1x Line segment end X\n     * @param l1y Line segment end Y\n     * @returns Squared distance between point and line segment\n     */\n    function distToSegmentSquared(px, py, l0x, l0y, l1x, l1y) {\n        const lineLengthSuared = distSquared(l0x, l0y, l1x, l1y);\n        if (lineLengthSuared === 0) {\n            return distSquared(px, py, l0x, l0y);\n        }\n        let t = ((px - l0x) * (l1x - l0x) + (py - l0y) * (l1y - l0y)) / lineLengthSuared;\n        t = Math.max(0, Math.min(1, t));\n        return distSquared(px, py, l0x + t * (l1x - l0x), l0y + t * (l1y - l0y));\n    }\n    Math2D.distToSegmentSquared = distToSegmentSquared;\n})(Math2D = exports.Math2D || (exports.Math2D = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MathUtils;\n(function (MathUtils) {\n    /**\n     * Ensures that input value fits in a given range.\n     *\n     * @param value The value to be clamped.\n     * @param min Minimum value.\n     * @param max Maximum value.\n     *\n     * @returns Clamped value.\n     */\n    function clamp(value, min, max) {\n        return value < min ? min : value > max ? max : value;\n    }\n    MathUtils.clamp = clamp;\n    /**\n     * Returns a smooth interpolation between the values edge0 and edge1 based on the interpolation\n     * factor x. `0 <= x <= 1`.\n     * @see https://en.wikipedia.org/wiki/Smoothstep\n     *\n     * @param edge0\n     * @param edge1\n     * @param x\n     */\n    function smoothStep(edge0, edge1, x) {\n        // Scale, bias and saturate x to 0..1 range\n        x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n        // Evaluate polynomial\n        return x * x * (3 - 2 * x);\n    }\n    MathUtils.smoothStep = smoothStep;\n    /**\n     * Returns a smooth interpolation between the values edge0 and edge1 based on the interpolation\n     * factor x. `0 <= x <= 1`.\n     *\n     * Improved version by Ken Perlin, which has zero 1st- and 2nd-order derivatives at `x = 0` and\n     * `x = 1`:\n     *\n     * @see https://en.wikipedia.org/wiki/Smoothstep\n     *\n     * @param edge0\n     * @param edge1\n     * @param x\n     */\n    function smootherStep(edge0, edge1, x) {\n        // Scale, and clamp x to 0..1 range\n        x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n        // Evaluate polynomial\n        return x * x * x * (x * (x * 6 - 15) + 10);\n    }\n    MathUtils.smootherStep = smootherStep;\n    /**\n     * Maps a number from one range to another.\n     *\n     * @param val The incoming value to be converted.\n     * @param inMin Lower bound of the value's current range.\n     * @param inMax Upper bound of the value's current range.\n     * @param outMin Lower bound of the value's target range.\n     * @param outMax Upper bound of the value's target range.\n     */\n    function lerp(val, inMin, inMax, outMin, outMax) {\n        return ((val - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;\n    }\n    MathUtils.lerp = lerp;\n    /**\n     * Returns the smaller of the two given numbers. Both numbers may be undefined, in which case\n     * the result is undefined. If only one of the numbers is undefined, the other number is\n     * returned.\n     *\n     * @param a First number.\n     * @param b Second number.\n     */\n    function min2(a, b) {\n        let result;\n        if (a !== undefined) {\n            result = a;\n        }\n        if (b !== undefined) {\n            result = result === undefined ? b : Math.min(result, b);\n        }\n        return result;\n    }\n    MathUtils.min2 = min2;\n    /**\n     * Returns the larger of the two given numbers. Both numbers may be undefined, in which case\n     * the result is undefined. If only one of the numbers is undefined, the other number is\n     * returned.\n     *\n     * @param a First number.\n     * @param b Second number.\n     */\n    function max2(a, b) {\n        let result;\n        if (a !== undefined) {\n            result = a;\n        }\n        if (b !== undefined) {\n            result = result === undefined ? b : Math.max(result, b);\n        }\n        return result;\n    }\n    MathUtils.max2 = max2;\n    /**\n     * Checks if the value of a given number is inside an upper or lower bound. The bounds may be\n     * undefined, in which case their value is ignored.\n     *\n     * @param value Value to check.\n     * @param lowerBound The lower bound to check the value against.\n     * @param upperBound The upper bound to check the value against.\n     *\n     * @returns `true` if value is inside the bounds or if the bounds are `undefined`, `false`\n     *          otherwise.\n     */\n    function isClamped(value, lowerBound, upperBound) {\n        if (lowerBound !== undefined && value < lowerBound) {\n            return false;\n        }\n        if (upperBound !== undefined && value > upperBound) {\n            return false;\n        }\n        return true;\n    }\n    MathUtils.isClamped = isClamped;\n    /**\n     * Smoothly interpolates between two values using cubic formula\n     *\n     * @param startValue\n     * @param endValue\n     * @param time\n     * @returns Result of the interpolation within the range of `[startValue, endValue]`\n     */\n    function easeInOutCubic(startValue, endValue, time) {\n        const timeValue = time < 0.5 ? 4 * time * time * time : (time - 1) * (2 * time - 2) * (2 * time - 2) + 1;\n        return startValue + (endValue - startValue) * timeValue;\n    }\n    MathUtils.easeInOutCubic = easeInOutCubic;\n})(MathUtils = exports.MathUtils || (exports.MathUtils = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Copy methods and properties from one prototype into another.\n *\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n *\n * @param derivedCtor Class to mix methods and properties into.\n * @param baseCtors Class to take all methods and properties from.\n */\nfunction applyMixins(derivedCtor, baseCtors) {\n    baseCtors.forEach(baseCtor => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n            derivedCtor.prototype[name] = baseCtor.prototype[name];\n        });\n    });\n}\nexports.applyMixins = applyMixins;\n/**\n * Copy methods from one prototype into another.\n *\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n *\n * @param derivedCtor Class to mix methods into.\n * @param baseCtors Class to take all methods from.\n */\nfunction applyMixinsWithoutProperties(derivedCtor, baseCtors) {\n    baseCtors.forEach(baseCtor => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n            const descriptor = Object.getOwnPropertyDescriptor(baseCtor.prototype, name);\n            if (descriptor !== undefined && descriptor.get === undefined) {\n                derivedCtor.prototype[name] = baseCtor.prototype[name];\n            }\n        });\n    });\n}\nexports.applyMixinsWithoutProperties = applyMixinsWithoutProperties;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// cache value, because access to process.env.NODE_ENV is SLOW!\nconst isProduction = process.env.NODE_ENV === \"production\";\n//TODO: Make assertHandler configurable\n/**\n * Implementation of assert as a development help\n *\n * Note - this is deliberately a global function so that minimizers remove the\n * entire call when building for production.\n *\n * @hidden\n * @param condition Condition to match, if false, throws an Error(message)\n * @param message Optional message, defaults to \"ASSERTION failed\"\n */\nfunction assert(condition, message) {\n    if (!isProduction) {\n        if (!condition) {\n            throw new Error(message !== undefined ? message : \"ASSERTION failed\");\n        }\n    }\n}\nexports.assert = assert;\nfunction assertExists(element, message) {\n    if (!isProduction) {\n        if (element === undefined || element === null) {\n            throw new Error(message !== undefined ? message : \"ASSERTION failed: Element is undefined or null\");\n        }\n    }\n    return element;\n}\nexports.assertExists = assertExists;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* tslint:disable:max-line-length */\n/**\n * See:\n * https://developers.google.com/web/updates/2012/08/When-milliseconds-are-not-enough-performance-now\n */\n/* tslint:ensable:max-line-length */\nclass PerformanceTimer {\n    /**\n     * Returns timestamp in milliseconds since page load.\n     *\n     * If the [[DOMHighResTimeStamp]] is supported, the resolution is up to 5 microseconds,\n     * otherwise it is in milliseconds. Timespans are computed by taking the difference between two\n     * samples.\n     *\n     * Example:\n     * ```typescript\n     * const now = PerformanceTimer.now();\n     * // call some expensive function for which you want to check the duration.\n     * const end = PerformanceTimer.now();\n     * const elapsedTime = end - now;\n     * ```\n     */\n    static now() {\n        return PerformanceTimer.nowFunc();\n    }\n    static getNowFunc() {\n        if (typeof performance !== \"undefined\" && typeof performance.now !== \"undefined\") {\n            return () => performance.now();\n        }\n        // fall back to Date.getTime()\n        return () => {\n            return new Date().getTime();\n        };\n    }\n}\n// tslint:disable-next-line:no-unused-variable\nPerformanceTimer.instance = new PerformanceTimer();\nPerformanceTimer.nowFunc = PerformanceTimer.getNowFunc();\nexports.PerformanceTimer = PerformanceTimer;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getOptionValue(...values) {\n    for (const candidate of values) {\n        if (candidate !== undefined && candidate !== null) {\n            return candidate;\n        }\n    }\n    return undefined;\n}\nexports.getOptionValue = getOptionValue;\n/**\n * Merge options into existing parameters object.\n *\n * Convenience helper with _similar_ semantics as:\n *\n *     const finalParams1 = { ...defaults, ... options };\n *     const finalParams2 = Object.assign({}, defaults, options);\n *\n * This function doesn't copy _extra_ properties of `options` that doesn't exist in `defaults`.\n * `defaults` is used as _parameters_ template.\n *\n * This doc uses following notion of `option` and `parameter` terms:\n * * `parameter` is a variable, or 'almost constant' of procedure/function/algorith/object\n *    * `parameter` usually have sensible and usually used default\n *    * `parameter` is always defined (no `undefined`, `null` or `?` in type)\n *    * `parameter` can be overriden by specyfying `option` with same name\n * * `option` means value that may be passed optionally, overrides `parameter` value with same name\n *\n * Usage:\n *\n *     interface FooParams {\n *         useTextures: boolean;\n *         opacity: number;\n *     }\n *\n *     const FOO_DEFAULTS: FooParams = {\n *         useTextures: true,\n *         opacity: 0.8\n *     };\n *\n *     type FooOptions = Partial<FooParams>;\n *\n *     function doSomething(options: FooOptions) {\n *         const params = mergeWithOptions(FOO_DEFAULTS, options);\n *             // typeof params === FooParams\n *             // params.opacity = 0.5\n *             // params.useTextures = true\n *             // params.someOtherOptionFromOtherApi is not defined\n *     }\n *     const opt = {opacity: 0.5, someOtherOptionFromOtherApi: 'aaa'};\n *     doSomething(opt);\n *\n * Rationale:\n *   * both `Object.assign` and spread operator copy extra options\n *   * `Object.assign` & `spread operator` may copy `undefined` and `null`s if they really exist\n *     in options object\n *\n * @param parameters parmeters template object holding all expected parameters\n * @param options options object\n * @returns new object with `parameters` overriden by values from `options`\n */\nfunction mergeWithOptions(parameters, options) {\n    // NOTE: `as object` needed due to TypeScript bug:\n    //       https://github.com/Microsoft/TypeScript/issues/14409\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    const result = Object.assign({}, parameters);\n    if (options === undefined || options === null) {\n        return result;\n    }\n    for (const prop in parameters) {\n        if (parameters.hasOwnProperty(prop)) {\n            const optionValue = options[prop];\n            if (optionValue !== undefined && optionValue !== null) {\n                result[prop] = optionValue;\n            }\n        }\n    }\n    return result;\n}\nexports.mergeWithOptions = mergeWithOptions;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Resolves URL using default URL resolver.\n *\n * By default URL resolver is just identity function, it can be changed using\n * [[setDefaultUrlResolver].\n */\nfunction defaultUrlResolver(url) {\n    if (customDefaultUrlResolver !== undefined) {\n        return customDefaultUrlResolver(url);\n    }\n    else {\n        return url;\n    }\n}\nexports.defaultUrlResolver = defaultUrlResolver;\n/**\n * Change resolver used by [[defaultUrlResolver]].\n *\n * `undefined` resets default resolver to identity function.\n *\n * @param resolver\n */\nfunction setDefaultUrlResolver(resolver) {\n    customDefaultUrlResolver = resolver;\n}\nexports.setDefaultUrlResolver = setDefaultUrlResolver;\nlet customDefaultUrlResolver;\n/**\n * Compose URL resolvers.\n *\n * Creates new `UrlResolver` that applies resolvers in orders or arguments.\n *\n * Example:\n *\n *     const themeUrl = ...; // url of parent object\n *     const childUrlResolver = composeUrlResolvers(\n *           (childUrl: string) => resolveReferenceUrl(themeUrl, childUrl),\n *           defaultUrlResolver\n *     );\n */\nfunction composeUrlResolvers(...resolvers) {\n    return (originalUrl) => {\n        return resolvers.reduce((url, resolver) => {\n            if (resolver !== undefined) {\n                return resolver(url);\n            }\n            else {\n                return url;\n            }\n        }, originalUrl);\n    };\n}\nexports.composeUrlResolvers = composeUrlResolvers;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Resolve URL of referenced object.\n *\n * Resolves `childUrl` as it would be loaded from location specified by `parentUrl`.\n *\n * If `childUrl` is absolute, then it is returned unchanged.\n * If `childUrl` is origin-absolute path, then only origin path is taken from `parentUrl`.\n *\n * See [[baseUrl]] for reference how base URL of `parentUrl` is determined.\n *\n * Examples:\n *\n *     // normal case, child is sibling\n *     https://foo.com/themes/day.json + images/foo.png -> https://foo.com/themes/images/foo.png\n *\n *     // parent is \"folder\", so child is just located in this folder\n *     https://foo.com/themes/ + images/foo.png -> https://foo.com/themes/images/foo.png\n *\n *     // parent looks like leaf, so last component is stripped\n *     https://foo.com/themes + images/foo.png -> https://foo.com/images/foo.png\n *\n *     // origin-absolute URL, takes only origin from parent\n *     https://foo.com/themes/day.json + /fonts/foo.json -> https://foo.com/fonts/foo.json\n *\n * @param parentUrl URL of parent resource\n * @param childUrl URL of child as referenced from parent resource\n * @return `childUrl` as if anchored in location of `parentUrl`\n */\nfunction resolveReferenceUrl(parentUrl, childUrl) {\n    if (absoluteUrlWithOriginRe.test(childUrl)) {\n        return childUrl;\n    }\n    else if (childUrl.startsWith(\"/\")) {\n        const origin = getUrlOrigin(parentUrl);\n        return origin + childUrl;\n    }\n    else {\n        if (childUrl.startsWith(\"./\")) {\n            childUrl = childUrl.substr(2);\n        }\n        const parentBaseUrl = baseUrl(parentUrl);\n        return parentBaseUrl + childUrl;\n    }\n}\nexports.resolveReferenceUrl = resolveReferenceUrl;\nconst absoluteUrlWithOriginRe = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n/**\n * Returns base URL of given resource URL.\n *\n * `Url` with trailing slash are considered genuine 'locations', they are returned as is, however if\n * `url` ends with name component it is treated as \"leaf\", so last path component is removed.\n *\n * Standalone files (without any folder structure) are considered relative to `./`.\n *\n * Examples:\n * ```\n *     https://foo.com/themes/a.json -> https://foo.com/themes/\n *     https://foo.com/themes/ -> https://foo.com/themes/\n *     https://foo.com/themes -> https://foo.com/ // note, themes is treated as leaf\n *     themes/day.json -> themes/\n *     themes -> ./\n * ```\n */\nfunction baseUrl(url) {\n    if (url === undefined) {\n        return \"./\";\n    }\n    const idx = url.lastIndexOf(\"/\");\n    if (idx === -1) {\n        return \"./\";\n    }\n    else {\n        return url.substring(0, idx + 1);\n    }\n}\nexports.baseUrl = baseUrl;\n/**\n * Get `origin` part of URL.\n *\n * @example\n *    https://example.com/foo -> https://example.com\n *    //example.com:8080/ -> //example.com:8080\n *    file:///etc/hosts ->\n *\n * @param url input URL\n * @return origin of given URL\n */\nfunction getUrlOrigin(url) {\n    if (url === undefined) {\n        return \"\";\n    }\n    const parsed = getUrlHostAndProtocol(url);\n    if (parsed.protocol === \"file:\") {\n        return \"file://\";\n    }\n    else if (parsed.host && parsed.protocol) {\n        return parsed.protocol + \"//\" + parsed.host;\n    }\n    else if (parsed.host) {\n        return \"//\" + parsed.host;\n    }\n    else if (parsed.protocol) {\n        return parsed.protocol + \"//\";\n    }\n    else {\n        return \"\";\n    }\n}\nexports.getUrlOrigin = getUrlOrigin;\n/**\n * Parse `host` and `protocol` part from URL.\n */\nfunction getUrlHostAndProtocol(url) {\n    const urlOriginRe = new RegExp(/^(?:([a-z]+:))?\\/\\/([^\\/]*)/, \"i\");\n    const match = url.match(urlOriginRe);\n    if (!match) {\n        throw new Error(`getUrlHostAndProtocol: unable to parse URL '${url}'`);\n    }\n    return {\n        protocol: match[1],\n        host: match[2]\n    };\n}\nexports.getUrlHostAndProtocol = getUrlHostAndProtocol;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Chains two functions for further assigning as one wrapped callback function\n */\nfunction chainCallbacks(f1, f2) {\n    return function (...args) {\n        if (f1) {\n            f1.apply(this, args);\n        }\n        return f2.apply(this, args);\n    };\n}\nexports.chainCallbacks = chainCallbacks;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Type guard to assert that `object` conforms to [[GeoCoordinatesLike]] data interface.\n */\nfunction isGeoCoordinatesLike(object) {\n    return (object &&\n        typeof object.latitude === \"number\" &&\n        typeof object.longitude === \"number\" &&\n        (typeof object.altitude === \"number\" || typeof object.altitude === \"undefined\"));\n}\nexports.isGeoCoordinatesLike = isGeoCoordinatesLike;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GeoBox_1 = require(\"../coordinates/GeoBox\");\nconst GeoCoordinates_1 = require(\"../coordinates/GeoCoordinates\");\nconst Box3Like_1 = require(\"../math/Box3Like\");\nconst MathUtils_1 = require(\"../math/MathUtils\");\nconst OrientedBox3Like_1 = require(\"../math/OrientedBox3Like\");\nconst Projection_1 = require(\"./Projection\");\nconst DEG2RAD = Math.PI / 180;\nclass IdentityProjection {\n    constructor() {\n        this.type = Projection_1.ProjectionType.Planar;\n    }\n    getScaleFactor(_worldPoint) {\n        return 1;\n    }\n    worldExtent(minAltitude, maxAltitude, result) {\n        if (!result) {\n            result = MathUtils_1.MathUtils.newEmptyBox3();\n        }\n        result.min.x = -Math.PI;\n        result.min.y = -Math.PI * 0.5;\n        result.min.z = minAltitude;\n        result.max.x = Math.PI;\n        result.max.y = Math.PI * 0.5;\n        result.max.z = maxAltitude;\n        return result;\n    }\n    projectPoint(geoPoint, result) {\n        if (!result) {\n            // tslint:disable-next-line:no-object-literal-type-assertion\n            result = { x: 0, y: 0, z: 0 };\n        }\n        result.x = geoPoint.longitude * DEG2RAD;\n        result.y = geoPoint.latitude * DEG2RAD;\n        result.z = geoPoint.altitude || 0;\n        return result;\n    }\n    unprojectPoint(worldPoint) {\n        const geoPoint = GeoCoordinates_1.GeoCoordinates.fromRadians(worldPoint.y, worldPoint.x, worldPoint.z);\n        return geoPoint;\n    }\n    projectBox(geoBox, result) {\n        if (!result) {\n            result = MathUtils_1.MathUtils.newEmptyBox3();\n        }\n        const min = this.projectPoint(new GeoCoordinates_1.GeoCoordinates(geoBox.south, geoBox.west, geoBox.minAltitude));\n        const max = this.projectPoint(new GeoCoordinates_1.GeoCoordinates(geoBox.north, geoBox.east, geoBox.maxAltitude));\n        if (Box3Like_1.isBox3Like(result)) {\n            result.min.x = min.x;\n            result.min.y = min.y;\n            result.min.z = min.z;\n            result.max.x = max.x;\n            result.max.y = max.y;\n            result.max.z = max.z;\n        }\n        else if (OrientedBox3Like_1.isOrientedBox3Like(result)) {\n            MathUtils_1.MathUtils.newVector3(1, 0, 0, result.xAxis);\n            MathUtils_1.MathUtils.newVector3(0, 1, 0, result.yAxis);\n            MathUtils_1.MathUtils.newVector3(0, 0, 1, result.zAxis);\n            result.position.x = (min.x + max.x) * 0.5;\n            result.position.y = (min.y + max.y) * 0.5;\n            result.position.z = (min.z + max.z) * 0.5;\n            result.extents.x = (max.x - min.x) * 0.5;\n            result.extents.y = (max.y - min.y) * 0.5;\n            result.extents.z = Math.max(Number.EPSILON, (max.z - min.z) * 0.5);\n        }\n        return result;\n    }\n    unprojectBox(worldBox) {\n        const minGeo = this.unprojectPoint(worldBox.min);\n        const maxGeo = this.unprojectPoint(worldBox.max);\n        return GeoBox_1.GeoBox.fromCoordinates(minGeo, maxGeo);\n    }\n    groundDistance(worldPoint) {\n        return worldPoint.z;\n    }\n    scalePointToSurface(worldPoint) {\n        worldPoint.z = 0;\n        return worldPoint;\n    }\n}\n/**\n * Identity [[Projection]] used to convert geo coordinates to world coordinates and vice versa.\n */\nexports.identityProjection = new IdentityProjection();\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GeoCoordinates_1 = require(\"../coordinates/GeoCoordinates\");\nconst Box3Like_1 = require(\"../math/Box3Like\");\nconst MathUtils_1 = require(\"../math/MathUtils\");\nconst OrientedBox3Like_1 = require(\"../math/OrientedBox3Like\");\nconst EarthConstants_1 = require(\"./EarthConstants\");\nconst Projection_1 = require(\"./Projection\");\n/**\n * Transforms the given vector using the provided basis.\n */\nfunction apply(xAxis, yAxis, zAxis, v) {\n    const x = xAxis.x * v.x + yAxis.x * v.y + zAxis.x * v.z;\n    const y = xAxis.y * v.x + yAxis.y * v.y + zAxis.y * v.z;\n    const z = xAxis.z * v.x + yAxis.z * v.y + zAxis.z * v.z;\n    v.x = x;\n    v.y = y;\n    v.z = z;\n    return v;\n}\n/**\n * Returns the quadrants for the given longitude. The quadrant is defined as:\n *  - quadrant(+Math.PI * -1.0) = 0\n *  - quadrant(+Math.PI * -0.5) = 1\n *  - quadrant(+Math.PI *  0.0) = 2\n *  - quadrant(+Math.PI *  0.5) = 3\n *  - quadrant(+Math.PI *  1.0) = 4\n *\n * @param longitude The longitude in radians.\n */\nfunction getLongitudeQuadrant(longitude) {\n    const oneOverPI = 1 / Math.PI;\n    const quadrantIndex = Math.floor(2 * (longitude * oneOverPI + 1));\n    return MathUtils_1.MathUtils.clamp(quadrantIndex, 0, 4);\n}\nfunction lengthOfVector3(worldPoint) {\n    const d = Math.sqrt(worldPoint.x * worldPoint.x + worldPoint.y * worldPoint.y + worldPoint.z * worldPoint.z);\n    return d;\n}\n/**\n * Creates a Box3 enclosing the geobox.\n *\n * @param geoBox Ghe given geobox\n * @param worldBox The resulting axis aligned bounding box.\n */\nfunction makeBox3(geoBox, worldBox) {\n    const halfEquatorialRadius = (EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS + (geoBox.maxAltitude || 0)) * 0.5;\n    const minLongitude = MathUtils_1.MathUtils.degToRad(geoBox.west);\n    const maxLongitude = MathUtils_1.MathUtils.degToRad(geoBox.east);\n    const minLongitudeQuadrant = getLongitudeQuadrant(minLongitude);\n    const maxLongitudeQuadrant = getLongitudeQuadrant(maxLongitude);\n    let xMin = Math.cos(minLongitude);\n    let xMax = xMin;\n    let yMin = Math.sin(minLongitude);\n    let yMax = yMin;\n    for (let quadrantIndex = minLongitudeQuadrant + 1; quadrantIndex <= maxLongitudeQuadrant; quadrantIndex++) {\n        // tslint:disable-next-line: no-bitwise\n        const x = ((quadrantIndex + 1) & 1) * ((quadrantIndex & 2) - 1);\n        xMin = Math.min(x, xMin);\n        xMax = Math.max(x, xMax);\n        // tslint:disable-next-line: no-bitwise\n        const y = (quadrantIndex & 1) * ((quadrantIndex & 2) - 1);\n        yMin = Math.min(y, yMin);\n        yMax = Math.max(y, yMax);\n    }\n    const cosMaxLongitude = Math.cos(maxLongitude);\n    xMin = Math.min(cosMaxLongitude, xMin);\n    xMax = Math.max(cosMaxLongitude, xMax);\n    const sinMaxLongitude = Math.sin(maxLongitude);\n    yMin = Math.min(sinMaxLongitude, yMin);\n    yMax = Math.max(sinMaxLongitude, yMax);\n    const xCenter = (xMax + xMin) * halfEquatorialRadius;\n    const xExtent = (xMax - xMin) * halfEquatorialRadius;\n    const yCenter = (yMax + yMin) * halfEquatorialRadius;\n    const yExtent = (yMax - yMin) * halfEquatorialRadius;\n    // Calculate Z boundaries.\n    const minLatitude = MathUtils_1.MathUtils.degToRad(geoBox.south);\n    const maxLatutide = MathUtils_1.MathUtils.degToRad(geoBox.north);\n    const zMax = Math.sin(maxLatutide);\n    const zMin = Math.sin(minLatitude);\n    const zCenter = (zMax + zMin) * halfEquatorialRadius;\n    const zExtent = (zMax - zMin) * halfEquatorialRadius;\n    worldBox.min.x = xCenter - xExtent;\n    worldBox.min.y = yCenter - yExtent;\n    worldBox.min.z = zCenter - zExtent;\n    worldBox.max.x = xCenter + xExtent;\n    worldBox.max.y = yCenter + yExtent;\n    worldBox.max.z = zCenter + zExtent;\n    return worldBox;\n}\n/**\n * Computes the spherical projection of the given geo coordinates.\n *\n * @param geoPoint The geo coordinates.\n * @param worldpoint The resulting world coordinates.\n */\nfunction project(geoPoint, worldpoint) {\n    const radius = EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS + (geoPoint.altitude || 0);\n    const latitude = MathUtils_1.MathUtils.degToRad(geoPoint.latitude);\n    const longitude = MathUtils_1.MathUtils.degToRad(geoPoint.longitude);\n    const cosLatitude = Math.cos(latitude);\n    worldpoint.x = radius * cosLatitude * Math.cos(longitude);\n    worldpoint.y = radius * cosLatitude * Math.sin(longitude);\n    worldpoint.z = radius * Math.sin(latitude);\n    return worldpoint;\n}\nclass SphereProjection {\n    constructor() {\n        this.type = Projection_1.ProjectionType.Spherical;\n    }\n    worldExtent(_minElevation, maxElevation, result = MathUtils_1.MathUtils.newEmptyBox3()) {\n        const radius = EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS + maxElevation;\n        result.min.x = -radius;\n        result.min.y = -radius;\n        result.min.z = -radius;\n        result.max.x = radius;\n        result.max.y = radius;\n        result.max.z = radius;\n        return result;\n    }\n    projectPoint(geoPoint, result = MathUtils_1.MathUtils.newVector3(0, 0, 0)) {\n        return project(geoPoint, result);\n    }\n    unprojectPoint(point) {\n        const parallelRadiusSq = point.x * point.x + point.y * point.y;\n        const parallelRadius = Math.sqrt(parallelRadiusSq);\n        const v = point.z / parallelRadius;\n        if (isNaN(v)) {\n            return GeoCoordinates_1.GeoCoordinates.fromRadians(0, 0, -EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS);\n        }\n        const radius = Math.sqrt(parallelRadiusSq + point.z * point.z);\n        return GeoCoordinates_1.GeoCoordinates.fromRadians(Math.atan(v), Math.atan2(point.y, point.x), radius - EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS);\n    }\n    projectBox(geoBox, result = MathUtils_1.MathUtils.newEmptyBox3()) {\n        if (Box3Like_1.isBox3Like(result)) {\n            return makeBox3(geoBox, result);\n        }\n        else if (OrientedBox3Like_1.isOrientedBox3Like(result)) {\n            if (geoBox.longitudeSpan >= 90) {\n                const bounds = makeBox3(geoBox, MathUtils_1.MathUtils.newEmptyBox3());\n                MathUtils_1.MathUtils.newVector3(1, 0, 0, result.xAxis);\n                MathUtils_1.MathUtils.newVector3(0, 1, 0, result.yAxis);\n                MathUtils_1.MathUtils.newVector3(0, 0, 1, result.zAxis);\n                result.position.x = (bounds.max.x + bounds.min.x) * 0.5;\n                result.position.y = (bounds.max.y + bounds.min.y) * 0.5;\n                result.position.z = (bounds.max.z + bounds.min.z) * 0.5;\n                result.extents.x = (bounds.max.x - bounds.min.x) * 0.5;\n                result.extents.y = (bounds.max.y - bounds.min.y) * 0.5;\n                result.extents.z = (bounds.max.z - bounds.min.z) * 0.5;\n                return result;\n            }\n            const { south, west, north, east, center: mid } = geoBox;\n            const midX = mid.longitude;\n            const midY = mid.latitude;\n            const cosSouth = Math.cos(MathUtils_1.MathUtils.degToRad(south));\n            const sinSouth = Math.sin(MathUtils_1.MathUtils.degToRad(south));\n            const cosWest = Math.cos(MathUtils_1.MathUtils.degToRad(west));\n            const sinWest = Math.sin(MathUtils_1.MathUtils.degToRad(west));\n            const cosNorth = Math.cos(MathUtils_1.MathUtils.degToRad(north));\n            const sinNorth = Math.sin(MathUtils_1.MathUtils.degToRad(north));\n            const cosEast = Math.cos(MathUtils_1.MathUtils.degToRad(east));\n            const sinEast = Math.sin(MathUtils_1.MathUtils.degToRad(east));\n            const cosMidX = Math.cos(MathUtils_1.MathUtils.degToRad(midX));\n            const sinMidX = Math.sin(MathUtils_1.MathUtils.degToRad(midX));\n            const cosMidY = Math.cos(MathUtils_1.MathUtils.degToRad(midY));\n            const sinMidY = Math.sin(MathUtils_1.MathUtils.degToRad(midY));\n            // Build the orientation of the OBB using the normal vector and its partial derivates.\n            // the sperical coordinates of the mid point of the geobox.\n            MathUtils_1.MathUtils.newVector3(cosMidX * cosMidY, sinMidX * cosMidY, sinMidY, result.zAxis);\n            // the partial derivates of the normal vector.\n            MathUtils_1.MathUtils.newVector3(-sinMidX, cosMidX, 0, result.xAxis);\n            MathUtils_1.MathUtils.newVector3(-cosMidX * sinMidY, -sinMidX * sinMidY, cosMidY, result.yAxis);\n            let width;\n            let minY;\n            let maxY;\n            if (south >= 0) {\n                // abs(dot(southWest - southEast, xAxis))\n                width = Math.abs(cosSouth * (cosMidX * (sinWest - sinEast) + sinMidX * (cosEast - cosWest)));\n                // dot(south, yAxis)\n                minY = cosMidY * sinSouth - sinMidY * cosSouth;\n                // dot(northEast, zAxis)\n                maxY =\n                    cosMidY * sinNorth -\n                        sinMidY * cosNorth * (cosMidX * cosEast + sinMidX * sinEast);\n            }\n            else {\n                if (north <= 0) {\n                    // abs(dot(northWest - northEast, xAxis))\n                    width = Math.abs(cosNorth * (cosMidX * (sinWest - sinEast) + sinMidX * (cosEast - cosWest)));\n                    // dot(north, yAxis)\n                    maxY = cosMidY * sinNorth - sinMidY * cosNorth;\n                }\n                else {\n                    // abs(dot(west - east, xAxis))\n                    width = Math.abs(cosMidX * (sinWest - sinEast) + sinMidX * (cosEast - cosWest));\n                    // dot(northEast, yAxis)\n                    maxY =\n                        cosMidY * sinNorth -\n                            sinMidY * cosNorth * (sinMidX * sinEast + cosMidX * cosEast);\n                }\n                // dot(southEast, yAxis)\n                minY =\n                    cosMidY * sinSouth -\n                        sinMidY * cosSouth * (cosMidX * cosEast + sinMidX * sinEast);\n            }\n            const rMax = (EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS + (geoBox.maxAltitude || 0)) * 0.5;\n            const rMin = (EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS + (geoBox.minAltitude || 0)) * 0.5;\n            // min(dot(southEast, zAxis), dot(northEast, zAxis))\n            const d = cosMidY * (cosMidX * cosEast + sinMidX * sinEast);\n            const minZ = Math.min(cosNorth * d + sinNorth * sinMidY, cosSouth * d + sinSouth * sinMidY);\n            MathUtils_1.MathUtils.newVector3(width * rMax, (maxY - minY) * rMax, rMax - minZ * rMin, result.extents);\n            MathUtils_1.MathUtils.newVector3(0, (minY + maxY) * rMax, rMax + rMax, result.position);\n            apply(result.xAxis, result.yAxis, result.zAxis, result.position);\n            result.position.x = result.position.x - result.zAxis.x * result.extents.z;\n            result.position.y = result.position.y - result.zAxis.y * result.extents.z;\n            result.position.z = result.position.z - result.zAxis.z * result.extents.z;\n            return result;\n        }\n        throw new Error(\"Invalid bounding box\");\n    }\n    unprojectBox(_worldBox) {\n        throw new Error(\"Method not implemented.\");\n    }\n    getScaleFactor(_worldPoint) {\n        return 1;\n    }\n    groundDistance(worldPoint) {\n        return lengthOfVector3(worldPoint) - EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS;\n    }\n    scalePointToSurface(worldPoint) {\n        const scale = EarthConstants_1.EarthConstants.EQUATORIAL_RADIUS / (lengthOfVector3(worldPoint) || 1);\n        worldPoint.x *= scale;\n        worldPoint.y *= scale;\n        worldPoint.z *= scale;\n        return worldPoint;\n    }\n}\nexports.sphereProjection = new SphereProjection();\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst TileKey_1 = require(\"./TileKey\");\n/**\n * A class used to represent a quadtree.\n */\nclass QuadTree {\n    /**\n     * Constructs a new `QuadTree` for the given [[TilingScheme]].\n     *\n     * Example:\n     * ```typescript\n     * const quadTree = new QuadTree(hereTilingScheme);\n     * const geoBox = quadTree.getGeoBox(tileKey);\n     * console.log(geoBox.center);\n     * ```\n     *\n     * @param tilingScheme The TilingScheme used by this `QuadTree`.\n     */\n    constructor(tilingScheme) {\n        this.tilingScheme = tilingScheme;\n    }\n    /**\n     * Visits this `QuadTree` and invoke the given accept method with the current [[TileKey]] and\n     * its bounding box in geo coordinates.\n     *\n     * Example:\n     * ```typescript\n     * const geoPos = new GeoCoordinates(latitude, longitude);\n     * const quadTree = new QuadTree(hereTilingScheme);\n     * quadTree.visit((tileKey, geoBox) => {\n     *     if (geoBox.contains(geoPos)) {\n     *         console.log(\"tile\", tileKey, \"contains\", geoPos);\n     *         return tileKey.level < 14; // stop visiting the quadtree if the level is >= 14.\n     *     }\n     *     return false; // stop visiting the quadtree,\n     *                   // the tile's geoBox doesn't contain the given coordinates.\n     * });\n     * ```\n     *\n     * @param accept A function that takes a [[TileKey]] and its bounding box in geo coordinates and\n     * returns `true` if the visit of the `QuadTree` should continue; otherwise `false`.\n     */\n    visit(accept) {\n        this.visitTileKey(TileKey_1.TileKey.fromRowColumnLevel(0, 0, 0), accept);\n    }\n    /**\n     * Visits the subtree starting from the given tile.\n     *\n     * @param tileKey The root of the subtree that should be visited.\n     * @param accept A function that takes a [[TileKey]] and its bounding box in geo coordinates and\n     * returns `true` if the visit of the `QuadTree` should continue; otherwise `false`.\n     */\n    visitTileKey(tileKey, accept) {\n        const geoBox = this.tilingScheme.getGeoBox(tileKey);\n        if (!accept(tileKey, geoBox)) {\n            return;\n        }\n        for (const subTileKey of this.tilingScheme.getSubTileKeys(tileKey)) {\n            this.visitTileKey(subTileKey, accept);\n        }\n    }\n}\nexports.QuadTree = QuadTree;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EquirectangularProjection_1 = require(\"../projection/EquirectangularProjection\");\nconst HalfQuadTreeSubdivisionScheme_1 = require(\"./HalfQuadTreeSubdivisionScheme\");\nconst TilingScheme_1 = require(\"./TilingScheme\");\n/**\n * [[TilingScheme]] used by most of the data published by HERE.\n *\n * The `hereTilingScheme` features a half quadtree subdivision scheme and an equirectangular\n * projection.\n */\nexports.hereTilingScheme = new TilingScheme_1.TilingScheme(HalfQuadTreeSubdivisionScheme_1.halfQuadTreeSubdivisionScheme, EquirectangularProjection_1.equirectangularProjection);\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst WebMercatorProjection_1 = require(\"../projection/WebMercatorProjection\");\nconst QuadTreeSubdivisionScheme_1 = require(\"./QuadTreeSubdivisionScheme\");\nconst TilingScheme_1 = require(\"./TilingScheme\");\n/**\n * A [[TilingScheme]] featuring quadtree subdivision scheme and web Mercator projection.\n */\nexports.webMercatorTilingScheme = new TilingScheme_1.TilingScheme(QuadTreeSubdivisionScheme_1.quadTreeSubdivisionScheme, WebMercatorProjection_1.webMercatorProjection);\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst MercatorProjection_1 = require(\"../projection/MercatorProjection\");\nconst QuadTreeSubdivisionScheme_1 = require(\"./QuadTreeSubdivisionScheme\");\nconst TilingScheme_1 = require(\"./TilingScheme\");\n/**\n * The [[TilingScheme]] used by the HERE web tiles.\n *\n * The `mercatorTilingScheme` features a quadtree subdivision scheme and a Mercator projection.\n */\nexports.mercatorTilingScheme = new TilingScheme_1.TilingScheme(QuadTreeSubdivisionScheme_1.quadTreeSubdivisionScheme, MercatorProjection_1.mercatorProjection);\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isVector3Like(v) {\n    return v && typeof v.x === \"number\" && typeof v.y === \"number\" && typeof v.z === \"number\";\n}\nexports.isVector3Like = isVector3Like;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Fills an index buffer with the indices for the extruded walls for a polygon contour.\n *\n * @param indexBuffer Index buffer to be filled.\n * @param vertexOffset Starting offset of the vertices composing the contour.\n * @param vertexStride Number of elements per contour vertex.\n * @param contour Vertices that compose the contour.\n * @param contourEdges Collection of booleans indicating if contour edges should be added.\n * @param boundaryWalls If `false`, walls in tile boundaries will not be created.\n *\n */\nfunction addExtrudedWalls(indexBuffer, vertexOffset, vertexStride, contour, contourEdges, boundaryWalls) {\n    // Infer the index buffer's position of the vertices that form the extruded-polygons' walls\n    // by stepping through the contour segment by segment.\n    const nSegments = contour.length / vertexStride;\n    for (let i = 0; i < nSegments; ++i) {\n        const vFootprint0 = vertexOffset + i * 2;\n        const vRoof0 = vFootprint0 + 1;\n        const vFootprint1 = vertexOffset + ((i + 1) % nSegments) * 2;\n        const vRoof1 = vFootprint1 + 1;\n        if (boundaryWalls !== false || contourEdges === undefined) {\n            indexBuffer.push(vFootprint0, vRoof0, vRoof1, vRoof1, vFootprint1, vFootprint0);\n        }\n        else if (contourEdges[i]) {\n            indexBuffer.push(vFootprint0, vRoof0, vRoof1, vRoof1, vFootprint1, vFootprint0);\n        }\n    }\n}\nexports.addExtrudedWalls = addExtrudedWalls;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst THREE = require(\"three\");\nconst currEdgeStart = new THREE.Vector2();\nconst currEdgeGoal = new THREE.Vector2();\nconst prevEdgeStart = new THREE.Vector2();\nconst prevEdgeGoal = new THREE.Vector2();\n/**\n * Fills an index buffer with the indices for the edges of a polygon contour.\n *\n * @param indexBuffer Edge index buffer to be filled.\n * @param vertexOffset Starting offset of the vertices composing the contour.\n * @param vertexStride Number of elements per contour vertex.\n * @param polygonContour Vertices that compose the contour.\n * @param polygonContourEdges Collection of booleans indicating if contour edges should be added.\n */\nfunction addPolygonEdges(indexBuffer, vertexOffset, vertexStride, polygonContour, polygonContourEdges, isExtruded, addFootprintEdges, wallEdgeSlope) {\n    for (let i = 0; i < polygonContourEdges.length; ++i) {\n        if (polygonContourEdges[i]) {\n            if (isExtruded === true) {\n                const vFootprint0 = vertexOffset + i * 2;\n                const vRoof0 = vFootprint0 + 1;\n                const vFootprint1 = vertexOffset + ((i + 1) % polygonContourEdges.length) * 2;\n                const vRoof1 = vFootprint1 + 1;\n                if (addFootprintEdges === true) {\n                    indexBuffer.push(vFootprint0, vFootprint1);\n                }\n                indexBuffer.push(vRoof0, vRoof1);\n                const prevEdgeIdx = (i === 0 ? polygonContourEdges.length : i) - 1;\n                if (polygonContourEdges[prevEdgeIdx]) {\n                    if (wallEdgeSlope !== undefined) {\n                        const v0x = polygonContour[i * vertexStride];\n                        const v0y = polygonContour[i * vertexStride + 1];\n                        const v1x = polygonContour[((i + 1) % polygonContourEdges.length) * vertexStride];\n                        const v1y = polygonContour[((i + 1) % polygonContourEdges.length) * vertexStride + 1];\n                        currEdgeStart.set(v0x, v0y);\n                        currEdgeGoal.set(v1x, v1y);\n                        prevEdgeStart.set(polygonContour[prevEdgeIdx * vertexStride], polygonContour[prevEdgeIdx * vertexStride + 1]);\n                        prevEdgeGoal.set(currEdgeStart.x, currEdgeStart.y);\n                        if (prevEdgeGoal\n                            .sub(prevEdgeStart)\n                            .normalize()\n                            .dot(currEdgeGoal.sub(currEdgeStart).normalize()) <= wallEdgeSlope) {\n                            indexBuffer.push(vFootprint0, vRoof0);\n                        }\n                    }\n                    else {\n                        indexBuffer.push(vFootprint0, vRoof0);\n                    }\n                }\n            }\n            else {\n                const vFoot0 = vertexOffset + i;\n                const vRoof0 = vertexOffset + ((i + 1) % polygonContourEdges.length);\n                indexBuffer.push(vFoot0, vRoof0);\n            }\n        }\n    }\n}\nexports.addPolygonEdges = addPolygonEdges;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_datasource_protocol_1 = require(\"@here/harp-datasource-protocol\");\nconst harp_geoutils_1 = require(\"@here/harp-geoutils\");\nconst harp_utils_1 = require(\"@here/harp-utils\");\nconst WorkerService_1 = require(\"./WorkerService\");\nconst logger = harp_utils_1.LoggerManager.instance.create(\"TileDecoderService\");\n/**\n * An extension to [[WorkerService]], the `TileDecoderService` implements an asynchronous\n * (message based) service to decode tile content in web workers. The `TileDecoderService` itself\n * lives in the web worker, and communicates with messages by means of a [[ConcurrentWorkerSet]]\n * with the application.\n *\n * The `TileDecoderService` handles a [[DecodeTileRequest]], which contains a tile and its freshly\n * loaded binary data, decodes the content with the [[ITileDecoder]] that the service is configured\n * to use, and sends the data back in form of a [[WorkerServiceResponse]].\n */\nclass TileDecoderService extends WorkerService_1.WorkerService {\n    /**\n     * Set up the `TileDecoderService`. The name of the service must be unique\n     *\n     * @param serviceId Service id. Must be unique.\n     * @param m_decoder Decoder to handle the decoding and info requests.\n     */\n    constructor(serviceId, m_decoder) {\n        super(serviceId);\n        this.serviceId = serviceId;\n        this.m_decoder = m_decoder;\n        this.m_decoder.connect();\n    }\n    /**\n     * Start a [[TileDecoderService]] with a given decoder.\n     *\n     * @param serviceId Service id. Must be unique.\n     * @param decoder   [[TileDecoder]] instance.\n     */\n    static start(serviceId, decoder) {\n        return new TileDecoderService(serviceId, decoder);\n    }\n    /**\n     * Handle incoming request messages. Identifies message type and processes the request.\n     *\n     * @param request Message that is either a DecodeTileRequest or a TileInfoRequest.\n     * @returns A promise which resolves to a [[WorkerServiceResponse]].\n     */\n    handleRequest(request) {\n        if (harp_datasource_protocol_1.WorkerDecoderProtocol.isDecodeTileRequest(request)) {\n            return this.handleDecodeTileRequest(request);\n        }\n        else if (harp_datasource_protocol_1.WorkerDecoderProtocol.isTileInfoRequest(request)) {\n            return this.handleTileInfoRequest(request);\n        }\n        else {\n            return super.handleRequest(request);\n        }\n    }\n    /**\n     * Handle incoming configuration message. Configuration message is passed on to decoder.\n     *\n     * @param request Message of type [[ConfigurationMessage]].\n     */\n    handleMessage(message) {\n        if (harp_datasource_protocol_1.WorkerDecoderProtocol.isConfigurationMessage(message)) {\n            this.handleConfigurationMessage(message);\n        }\n        else {\n            logger.error(`[${this.serviceId}]: invalid message ${message.type}`);\n        }\n    }\n    handleDecodeTileRequest(request) {\n        const tileKey = harp_geoutils_1.TileKey.fromMortonCode(request.tileKey);\n        const projection = harp_datasource_protocol_1.getProjection(request.projection);\n        return this.m_decoder.decodeTile(request.data, tileKey, projection).then(decodedTile => {\n            const transferList = [];\n            decodedTile.geometries.forEach(geom => {\n                geom.vertexAttributes.forEach(attr => {\n                    if (attr.buffer instanceof ArrayBuffer) {\n                        transferList.push(attr.buffer);\n                    }\n                });\n                if (geom.index && geom.index.buffer instanceof ArrayBuffer) {\n                    transferList.push(geom.index.buffer);\n                }\n            });\n            decodedTile.techniques.forEach(technique => {\n                harp_datasource_protocol_1.addBuffersToTransferList(technique, transferList);\n            });\n            return {\n                response: decodedTile,\n                transferList\n            };\n        });\n    }\n    handleTileInfoRequest(request) {\n        const tileKey = harp_geoutils_1.TileKey.fromMortonCode(request.tileKey);\n        const projection = harp_datasource_protocol_1.getProjection(request.projection);\n        return this.m_decoder.getTileInfo(request.data, tileKey, projection).then(tileInfo => {\n            const transferList = tileInfo !== undefined && tileInfo.transferList !== undefined\n                ? tileInfo.transferList\n                : [];\n            return {\n                response: tileInfo,\n                transferList\n            };\n        });\n    }\n    handleConfigurationMessage(message) {\n        this.m_decoder.configure(message.styleSet, message.languages, message.options);\n    }\n}\nexports.TileDecoderService = TileDecoderService;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst TechniqueParams_1 = require(\"./TechniqueParams\");\n/**\n * Names of the supported texure properties.\n */\nexports.TEXTURE_PROPERTY_KEYS = [\n    \"map\",\n    \"normalMap\",\n    \"displacementMap\",\n    \"roughnessMap\",\n    \"emissiveMap\",\n    \"alphaMap\",\n    \"metalnessMap\",\n    \"bumpMap\"\n];\n/**\n * Type guard to check if an object is an instance of [[CirclesTechnique]].\n */\nfunction isCirclesTechnique(technique) {\n    return technique.name === \"circles\";\n}\nexports.isCirclesTechnique = isCirclesTechnique;\n/**\n * Type guard to check if an object is an instance of [[SquaresTechnique]].\n */\nfunction isSquaresTechnique(technique) {\n    return technique.name === \"squares\";\n}\nexports.isSquaresTechnique = isSquaresTechnique;\n/**\n * Type guard to check if an object is an instance of [[PoiTechnique]].\n */\nfunction isPoiTechnique(technique) {\n    return technique.name === \"labeled-icon\";\n}\nexports.isPoiTechnique = isPoiTechnique;\n/**\n * Type guard to check if an object is an instance of [[LineMarkerTechnique]].\n */\nfunction isLineMarkerTechnique(technique) {\n    return technique.name === \"line-marker\";\n}\nexports.isLineMarkerTechnique = isLineMarkerTechnique;\n/**\n * Type guard to check if an object is an instance of [[DashedLineTechnique]].\n */\nfunction isDashedLineTechnique(technique) {\n    return technique.name === \"dashed-line\";\n}\nexports.isDashedLineTechnique = isDashedLineTechnique;\n/**\n * Type guard to check if an object is an instance of [[LineTechnique]].\n */\nfunction isLineTechnique(technique) {\n    return technique.name === \"line\";\n}\nexports.isLineTechnique = isLineTechnique;\n/**\n * Type guard to check if an object is an instance of [[SolidLineTechnique]].\n */\nfunction isSolidLineTechnique(technique) {\n    return technique.name === \"solid-line\";\n}\nexports.isSolidLineTechnique = isSolidLineTechnique;\n/**\n * Type guard to check if an object is an instance of [[SegmentsTechnique]].\n */\nfunction isSegmentsTechnique(technique) {\n    return technique.name === \"segments\";\n}\nexports.isSegmentsTechnique = isSegmentsTechnique;\n/**\n * Type guard to check if an object is an instance of [[BasicExtrudedLineTechnique]]\n * or [[StandardExtrudedLineTechnique]].\n */\nfunction isExtrudedLineTechnique(technique) {\n    return technique.name === \"extruded-line\";\n}\nexports.isExtrudedLineTechnique = isExtrudedLineTechnique;\n/**\n * Type guard to check if an object is an instance of [[BasicExtrudedLineTechnique]].\n */\nfunction isBasicExtrudedLineTechnique(technique) {\n    return isExtrudedLineTechnique(technique) && technique.shading === \"basic\";\n}\nexports.isBasicExtrudedLineTechnique = isBasicExtrudedLineTechnique;\n/**\n * Type guard to check if an object is an instance of [[StandardExtrudedLineTechnique]].\n */\nfunction isStandardExtrudedLineTechnique(technique) {\n    return isExtrudedLineTechnique(technique) && technique.shading === \"standard\";\n}\nexports.isStandardExtrudedLineTechnique = isStandardExtrudedLineTechnique;\n/**\n * Type guard to check if an object is an instance of [[FillTechnique]].\n */\nfunction isFillTechnique(technique) {\n    return technique.name === \"fill\";\n}\nexports.isFillTechnique = isFillTechnique;\n/**\n * Type guard to check if an object is an instance of [[ExtrudedPolygonTechnique]].\n */\nfunction isExtrudedPolygonTechnique(technique) {\n    return technique.name === \"extruded-polygon\";\n}\nexports.isExtrudedPolygonTechnique = isExtrudedPolygonTechnique;\n/**\n * Type guard to check if an object is an instance of [[StandardTechnique]].\n */\nfunction isStandardTechnique(technique) {\n    return technique.name === \"standard\";\n}\nexports.isStandardTechnique = isStandardTechnique;\n/**\n * Type guard to check if an object is an instance of [[TerrainTechnique]].\n */\nfunction isTerrainTechnique(technique) {\n    return technique.name === \"terrain\";\n}\nexports.isTerrainTechnique = isTerrainTechnique;\n/**\n * Type guard to check if an object is an instance of [[TextTechnique]].\n */\nfunction isTextTechnique(technique) {\n    return technique.name === \"text\";\n}\nexports.isTextTechnique = isTextTechnique;\n/**\n * Type guard to check if an object is an instance of [[ShaderTechnique]].\n */\nfunction isShaderTechnique(technique) {\n    return technique.name === \"shader\";\n}\nexports.isShaderTechnique = isShaderTechnique;\n/**\n * Check if vertex normals should be generated for this technique (if no normals are in the data).\n * @param technique Technique to check.\n */\nfunction needsVertexNormals(technique) {\n    return (isStandardTechnique(technique) ||\n        isTerrainTechnique(technique) ||\n        isStandardExtrudedLineTechnique(technique));\n}\nexports.needsVertexNormals = needsVertexNormals;\n/**\n * Get the texture coordinate type if the technique supports it.\n */\nfunction textureCoordinateType(technique) {\n    if (isStandardTechnique(technique)) {\n        return technique.textureCoordinateType;\n    }\n    else if (isExtrudedPolygonTechnique(technique)) {\n        return technique.textureCoordinateType;\n    }\n    else if (isTerrainTechnique(technique)) {\n        return technique.textureCoordinateType;\n    }\n    else {\n        return undefined;\n    }\n}\nexports.textureCoordinateType = textureCoordinateType;\n/**\n * Add all the buffers of the technique to the transfer list.\n */\nfunction addBuffersToTransferList(technique, transferList = []) {\n    if (isStandardTechnique(technique) ||\n        isExtrudedPolygonTechnique(technique) ||\n        isTerrainTechnique(technique)) {\n        for (const texturePropertyKey of exports.TEXTURE_PROPERTY_KEYS) {\n            const textureProperty = technique[texturePropertyKey];\n            if (TechniqueParams_1.isTextureBuffer(textureProperty)) {\n                transferList.push(textureProperty.buffer);\n            }\n        }\n    }\n}\nexports.addBuffersToTransferList = addBuffersToTransferList;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Common communication protocol for [[WorkerService]].\n */\nvar WorkerServiceProtocol;\n(function (WorkerServiceProtocol) {\n    /**\n     * Service id of worker manager ([[WorkerServiceManager]]) used to create/destroy service\n     * instances in workers.\n     */\n    WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID = \"worker-service-manager\";\n    /**\n     * Define possible names of messages exchanged with services within `WebWorker`.\n     */\n    let ServiceMessageName;\n    (function (ServiceMessageName) {\n        ServiceMessageName[\"Initialized\"] = \"initialized\";\n        ServiceMessageName[\"Request\"] = \"request\";\n        ServiceMessageName[\"Response\"] = \"response\";\n    })(ServiceMessageName = WorkerServiceProtocol.ServiceMessageName || (WorkerServiceProtocol.ServiceMessageName = {}));\n    /**\n     * Type guard to check if an object is a signal message from worker.\n     */\n    function isInitializedMessage(message) {\n        return (message &&\n            typeof message.service === \"string\" &&\n            typeof message.type === \"string\" &&\n            message.type === ServiceMessageName.Initialized);\n    }\n    WorkerServiceProtocol.isInitializedMessage = isInitializedMessage;\n    /**\n     * Define possible names of requests called on services within `WebWorker`.\n     */\n    let Requests;\n    (function (Requests) {\n        Requests[\"CreateService\"] = \"create-service\";\n        Requests[\"DestroyService\"] = \"destroy-service\";\n    })(Requests = WorkerServiceProtocol.Requests || (WorkerServiceProtocol.Requests = {}));\n    /**\n     * Type guard to check if an object is a request message sent to a worker.\n     */\n    function isRequestMessage(message) {\n        return (message &&\n            typeof message.service === \"string\" &&\n            typeof message.type === \"string\" &&\n            message.type === ServiceMessageName.Request);\n    }\n    WorkerServiceProtocol.isRequestMessage = isRequestMessage;\n    /**\n     * Type guard to check if an object is a request message sent to a worker.\n     */\n    function isResponseMessage(message) {\n        return (message &&\n            typeof message.service === \"string\" &&\n            typeof message.type === \"string\" &&\n            message.type === ServiceMessageName.Response);\n    }\n    WorkerServiceProtocol.isResponseMessage = isResponseMessage;\n})(WorkerServiceProtocol = exports.WorkerServiceProtocol || (exports.WorkerServiceProtocol = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Communication protocol with [[ITiler]].\n */\nvar WorkerTilerProtocol;\n(function (WorkerTilerProtocol) {\n    /**\n     * Define possible names of requests called on tiler services within `WebWorker`.\n     */\n    let Requests;\n    (function (Requests) {\n        Requests[\"RegisterIndex\"] = \"register-index\";\n        Requests[\"TileRequest\"] = \"tile-request\";\n    })(Requests = WorkerTilerProtocol.Requests || (WorkerTilerProtocol.Requests = {}));\n    /**\n     * Type guard to check if an object is an index registration request sent to a worker.\n     */\n    function isRegisterIndexRequest(message) {\n        return (message && typeof message.type === \"string\" && message.type === Requests.RegisterIndex);\n    }\n    WorkerTilerProtocol.isRegisterIndexRequest = isRegisterIndexRequest;\n    /**\n     * Type guard to check if an object is a tile request sent to a worker.\n     */\n    function isTileRequest(message) {\n        return message && typeof message.type === \"string\" && message.type === Requests.TileRequest;\n    }\n    WorkerTilerProtocol.isTileRequest = isTileRequest;\n})(WorkerTilerProtocol = exports.WorkerTilerProtocol || (exports.WorkerTilerProtocol = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Allows to cancel and prioritize requests inside the requestQueue. Useful to optimize the order of\n * decoding tiles during animations and camera movements.\n *\n * `RequestController` is not extending [[AbortController]], because this is not supported in ES5.\n */\nclass RequestController {\n    /**\n     * Creates an instance of `RequestController`.\n     *\n     * @param {number} priority\n     * @param {AbortController} abortController Optional [[AbortController]] used internally, since\n     *      [[AbortController]]s should not be subclassed.\n     */\n    constructor(priority = 0, abortController = new AbortController()) {\n        this.priority = priority;\n        this.abortController = abortController;\n    }\n    get signal() {\n        return this.abortController.signal;\n    }\n    /**\n     * Invoking this method will set this object's AbortSignal's aborted flag and\n     * signal to any observers that the associated activity is to be aborted.\n     */\n    abort() {\n        this.abortController.abort();\n    }\n}\nexports.RequestController = RequestController;\n/**\n * Communication protocol with [[ITileDecoder]].\n */\nvar WorkerDecoderProtocol;\n(function (WorkerDecoderProtocol) {\n    /**\n     * Define possible names of messages exchanged with decoder services within `WebWorker`.\n     */\n    let DecoderMessageName;\n    (function (DecoderMessageName) {\n        DecoderMessageName[\"Configuration\"] = \"configuration\";\n    })(DecoderMessageName = WorkerDecoderProtocol.DecoderMessageName || (WorkerDecoderProtocol.DecoderMessageName = {}));\n    /**\n     * Type guard to check if an object is an instance of `ConfigurationMessage`.\n     */\n    function isConfigurationMessage(message) {\n        return (message &&\n            typeof message.service === \"string\" &&\n            typeof message.type === \"string\" &&\n            message.type === DecoderMessageName.Configuration);\n    }\n    WorkerDecoderProtocol.isConfigurationMessage = isConfigurationMessage;\n    /**\n     * Define possible names of requests called on decoder services within `WebWorker`.\n     */\n    let Requests;\n    (function (Requests) {\n        Requests[\"DecodeTileRequest\"] = \"decode-tile-request\";\n        Requests[\"TileInfoRequest\"] = \"tile-info-request\";\n    })(Requests = WorkerDecoderProtocol.Requests || (WorkerDecoderProtocol.Requests = {}));\n    /**\n     * Type guard to check if an object is a decoded tile object sent to a worker.\n     */\n    function isDecodeTileRequest(message) {\n        return (message &&\n            typeof message.type === \"string\" &&\n            message.type === Requests.DecodeTileRequest);\n    }\n    WorkerDecoderProtocol.isDecodeTileRequest = isDecodeTileRequest;\n    /**\n     * Type guard to check if an object is an info tile object sent to a worker.\n     */\n    function isTileInfoRequest(message) {\n        return (message && typeof message.type === \"string\" && message.type === Requests.TileInfoRequest);\n    }\n    WorkerDecoderProtocol.isTileInfoRequest = isTileInfoRequest;\n})(WorkerDecoderProtocol = exports.WorkerDecoderProtocol || (exports.WorkerDecoderProtocol = {}));\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_geoutils_1 = require(\"@here/harp-geoutils\");\n/**\n * Returns an array with the data type specified as parameter.\n *\n * @param attr specifies which type of data is being stored in the array\n */\nfunction getArrayConstructor(attr) {\n    switch (attr) {\n        case \"float\":\n            return Float32Array;\n        case \"uint16\":\n            return Uint16Array;\n        case \"uint32\":\n            return Uint32Array;\n    }\n}\nexports.getArrayConstructor = getArrayConstructor;\n/**\n * Geometry types supported by [[Geometry]] objects.\n */\nvar GeometryType;\n(function (GeometryType) {\n    GeometryType[GeometryType[\"Unspecified\"] = 0] = \"Unspecified\";\n    GeometryType[GeometryType[\"Point\"] = 1] = \"Point\";\n    GeometryType[GeometryType[\"Line\"] = 2] = \"Line\";\n    GeometryType[GeometryType[\"SolidLine\"] = 3] = \"SolidLine\";\n    GeometryType[GeometryType[\"Text\"] = 4] = \"Text\";\n    GeometryType[GeometryType[\"TextPath\"] = 5] = \"TextPath\";\n    GeometryType[GeometryType[\"ExtrudedLine\"] = 6] = \"ExtrudedLine\";\n    GeometryType[GeometryType[\"Polygon\"] = 7] = \"Polygon\";\n    GeometryType[GeometryType[\"ExtrudedPolygon\"] = 8] = \"ExtrudedPolygon\";\n    GeometryType[GeometryType[\"Object3D\"] = 9] = \"Object3D\";\n    GeometryType[GeometryType[\"Other\"] = 1000] = \"Other\";\n})(GeometryType = exports.GeometryType || (exports.GeometryType = {}));\n/**\n * Returns the projection object specified in the parameter.\n *\n * @param projectionName string describing projection to be used\n */\nfunction getProjection(projectionName) {\n    switch (projectionName) {\n        case \"mercator\":\n            return harp_geoutils_1.mercatorProjection;\n        case \"webMercator\":\n            return harp_geoutils_1.webMercatorProjection;\n        case \"sphere\":\n            return harp_geoutils_1.sphereProjection;\n        default:\n            throw new Error(`Unknown projection ${projectionName}`);\n    } // switch\n}\nexports.getProjection = getProjection;\n/**\n * String with the projection's name.\n *\n * @param projection `Projection` object containing the name of the projection to retrieve\n */\nfunction getProjectionName(projection) {\n    if (projection === harp_geoutils_1.mercatorProjection) {\n        return \"mercator\";\n    }\n    else if (projection === harp_geoutils_1.webMercatorProjection) {\n        return \"webMercator\";\n    }\n    else if (projection === harp_geoutils_1.sphereProjection) {\n        return \"sphere\";\n    }\n    throw new Error(\"Unknown projection\");\n}\nexports.getProjectionName = getProjectionName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_utils_1 = require(\"@here/harp-utils\");\n/**\n * Minimum estimated size of a JS object.\n */\nconst MINIMUM_OBJECT_SIZE_ESTIMATION = 100;\n/**\n * Structure of arrays containing data for all features of this group. No methods, since the object\n * is being passed as part of ExtendedTileInfo across \"process boundaries\" to the web worker.\n *\n * Supporting methods in namespace [[ExtendedTileInfo]].\n */\nclass FeatureGroup {\n    /**\n     * Construct featureGroup.\n     *\n     * @param storeExtendedTags Pass `true` to create fields for more OMV tags (`layer`, `class`\n     * and `type`).\n     */\n    constructor(storeExtendedTags, startSize = 5000) {\n        /** featureIds */\n        this.featureIds = new Array();\n        /** number of features */\n        this.numFeatures = 0;\n        /** number of positions of elements (2 per point) */\n        this.numPositions = 0;\n        this.featureIds = new Array(startSize);\n        this.featureIds.length = startSize;\n        this.techniqueIndex = new Array(startSize);\n        this.techniqueIndex.length = startSize;\n        this.textIndex = new Array(startSize);\n        this.textIndex.length = startSize;\n        this.positionIndex = new Array(startSize);\n        this.positionIndex.length = startSize;\n        this.positions = new Array(10 * startSize);\n        this.positions.length = 10 * startSize;\n        if (storeExtendedTags) {\n            this.layerIndex = new Array(startSize);\n            this.layerIndex.length = startSize;\n            this.classIndex = new Array(startSize);\n            this.classIndex.length = startSize;\n            this.typeIndex = new Array(startSize);\n            this.typeIndex.length = startSize;\n        }\n    }\n    /**\n     * Compute size in bytes.\n     */\n    getNumBytes() {\n        return ((this.featureIds.length +\n            this.techniqueIndex.length +\n            this.textIndex.length +\n            this.positionIndex.length +\n            this.positions.length +\n            (this.layerIndex !== undefined ? this.layerIndex.length : 0) +\n            (this.classIndex !== undefined ? this.classIndex.length : 0) +\n            (this.typeIndex !== undefined ? this.typeIndex.length : 0)) *\n            8);\n    }\n}\nexports.FeatureGroup = FeatureGroup;\n/**\n * Structure of arrays containing data for roads. No methods, since the object is being passed as\n * part of [[ExtendedTileInfo]] across \"process boundaries\" to the web worker.\n */\nclass LineFeatureGroup extends FeatureGroup {\n    constructor() {\n        super(...arguments);\n        /**\n         * An array of object defined by the user. Certain elements may be `undefined` (if this line\n         * feature is not a road, or if the object for that feature is undefined).\n         */\n        this.userData = [];\n    }\n    getNumBytes() {\n        return (super.getNumBytes() +\n            ((this.segmentIds !== undefined ? this.segmentIds.length : 0) +\n                (this.segmentStartOffsets !== undefined ? this.segmentStartOffsets.length : 0) +\n                (this.segmentEndOffsets !== undefined ? this.segmentEndOffsets.length : 0)) *\n                8);\n    }\n}\nexports.LineFeatureGroup = LineFeatureGroup;\n/**\n * Structure of arrays containing data for polygons. No methods, since the object is being passed as\n * part of ExtendedTileInfo across \"process boundaries\" to the web worker.\n *\n * Supporting methods in namespace [[ExtendedTileInfo]].\n *\n * Due to the complexity of the access, there are supporting classes to store and access data in\n * the feature groups. See [[ExtendedTileInfoWriter]] and [[ExtendedTileInfoPolygonAccessor]].\n */\nclass PolygonFeatureGroup extends FeatureGroup {\n    constructor(storeExtendedTags, startSize = 5000) {\n        super(storeExtendedTags, startSize);\n        /**\n         * Number of rings stored in all polygons in tis group. Used to keep size of the\n         * arrays.\n         */\n        this.groupNumRings = 0;\n        this.outerRingStartIndex = new Array(startSize);\n        this.outerRingStartIndex.length = startSize;\n        this.innerRingIsOuterContour = new Array(startSize);\n        this.innerRingIsOuterContour.length = startSize;\n        this.innerRingStartIndex = new Array(startSize);\n        this.innerRingStartIndex.length = startSize;\n    }\n    getNumBytes() {\n        return (super.getNumBytes() +\n            ((this.outerRingStartIndex !== undefined ? this.outerRingStartIndex.length : 0) +\n                (this.innerRingIsOuterContour !== undefined\n                    ? this.innerRingIsOuterContour.length\n                    : 0) +\n                (this.innerRingStartIndex !== undefined ? this.innerRingStartIndex.length : 0)) *\n                8);\n    }\n}\nexports.PolygonFeatureGroup = PolygonFeatureGroup;\n/**\n * Class to hold infos from [[OmvTile]]s. Optimized for fast serialization when being passed from\n * webworker to main thread. No methods, since the object is being passed across \"process\n * boundaries\" to the web worker.\n *\n * Supporting methods in namespace [[ExtendedTileInfo]].\n *\n * Due to the complexity of the access, there are supporting classes to store and access data in\n * the feature groups. See [[ExtendedTileInfoWriter]] and [[ExtendedTileInfoPolygonAccessor]].\n */\nclass ExtendedTileInfo {\n    constructor(tileKey, storeExtendedTags) {\n        this.tileKey = tileKey;\n        /**\n         * Catalog of strings. Addressed by every features stringIndex.\n         */\n        this.textCatalog = new Array();\n        /**\n         * Catalog of techniques. Addressed by every features featureIndex.\n         */\n        this.techniqueCatalog = new Array();\n        /**\n         * Used for performance diagnostics.\n         */\n        this.setupTime = 0;\n        /**\n         * Size in bytes.\n         */\n        this.numBytes = 0;\n        this.pointGroup = new FeatureGroup(storeExtendedTags);\n        this.lineGroup = new LineFeatureGroup(storeExtendedTags);\n        this.polygonGroup = new PolygonFeatureGroup(storeExtendedTags);\n        if (storeExtendedTags) {\n            this.layerCatalog = new Array();\n            this.classCatalog = new Array();\n            this.typeCatalog = new Array();\n        }\n    }\n    /**\n     * Compute the memory footprint caused by objects owned by the `ExtendedTileInfo`.\n     */\n    getNumBytes() {\n        let numBytes = MINIMUM_OBJECT_SIZE_ESTIMATION;\n        for (const str of this.textCatalog) {\n            numBytes += 2 * str.length;\n        }\n        numBytes += this.techniqueCatalog.length * MINIMUM_OBJECT_SIZE_ESTIMATION;\n        numBytes += this.pointGroup.getNumBytes();\n        numBytes += this.lineGroup.getNumBytes();\n        numBytes += this.polygonGroup.getNumBytes();\n        if (this.layerCatalog !== undefined) {\n            for (const str of this.layerCatalog) {\n                numBytes += 2 * str.length;\n            }\n            for (const str of this.classCatalog) {\n                numBytes += 2 * str.length;\n            }\n            for (const str of this.typeCatalog) {\n                numBytes += 2 * str.length;\n            }\n        }\n        return numBytes;\n    }\n}\nexports.ExtendedTileInfo = ExtendedTileInfo;\n(function (ExtendedTileInfo) {\n    function finishFeatureGroup(featureGroup) {\n        featureGroup.featureIds.length = featureGroup.numFeatures;\n        featureGroup.techniqueIndex.length = featureGroup.numFeatures;\n        featureGroup.textIndex.length = featureGroup.numFeatures;\n        featureGroup.positionIndex.length = featureGroup.numFeatures;\n        featureGroup.positions.length = featureGroup.numPositions;\n        if (featureGroup.layerIndex !== undefined) {\n            featureGroup.layerIndex.length = featureGroup.numFeatures;\n        }\n        if (featureGroup.classIndex !== undefined) {\n            featureGroup.classIndex.length = featureGroup.numFeatures;\n        }\n        if (featureGroup.typeIndex !== undefined) {\n            featureGroup.typeIndex.length = featureGroup.numFeatures;\n        }\n    }\n    function finishPolygonFeatureGroup(polygonGroup) {\n        finishFeatureGroup(polygonGroup);\n        polygonGroup.outerRingStartIndex.length = polygonGroup.numFeatures;\n        polygonGroup.innerRingIsOuterContour.length = polygonGroup.groupNumRings;\n        polygonGroup.innerRingStartIndex.length = polygonGroup.groupNumRings;\n    }\n    function finishLineFeatureGroup(lineGroup) {\n        finishFeatureGroup(lineGroup);\n        if (lineGroup.segmentIds !== undefined) {\n            lineGroup.segmentIds.length = lineGroup.numFeatures;\n            lineGroup.segmentStartOffsets.length = lineGroup.numFeatures;\n            lineGroup.segmentEndOffsets.length = lineGroup.numFeatures;\n        }\n    }\n    /**\n     * Finalize the tile's features groups.\n     */\n    function finish(tileInfo) {\n        finishFeatureGroup(tileInfo.pointGroup);\n        finishLineFeatureGroup(tileInfo.lineGroup);\n        finishPolygonFeatureGroup(tileInfo.polygonGroup);\n        tileInfo.numBytes = tileInfo.getNumBytes();\n    }\n    ExtendedTileInfo.finish = finish;\n    /**\n     * Returns the number of features in this feature group.\n     */\n    function featureGroupSize(featureGroup) {\n        return featureGroup.numFeatures;\n    }\n    ExtendedTileInfo.featureGroupSize = featureGroupSize;\n    /**\n     * Check if the feature group is finalized.\n     */\n    function featureGroupFinished(featureGroup) {\n        return featureGroup.numPositions === featureGroup.positions.length;\n    }\n    ExtendedTileInfo.featureGroupFinished = featureGroupFinished;\n    /**\n     * Check if the tileInfo is finalized.\n     */\n    function tileInfoFinished(tileInfo) {\n        return (featureGroupFinished(tileInfo.pointGroup) &&\n            featureGroupFinished(tileInfo.lineGroup) &&\n            featureGroupFinished(tileInfo.polygonGroup));\n    }\n    ExtendedTileInfo.tileInfoFinished = tileInfoFinished;\n    /**\n     * Determine the text string of the (OMV) feature. It implements the special handling required\n     * to determine the text content of a feature from its tags, which are passed in as the `env`.\n     *\n     * @param env Environment containing the tags from the (OMV) feature.\n     * @param useAbbreviation `true` to use the abbreviation if available.\n     * @param useIsoCode `true` to use the tag \"iso_code\".\n     * @param languages List of languages to use, for example: Specify \"en\" to use the tag \"name_en\"\n     *                  as the text of the string. Order reflects priority.\n     */\n    function getFeatureName(env, useAbbreviation, useIsoCode, languages) {\n        let name;\n        if (useAbbreviation) {\n            const abbreviation = env.lookup(`name:short`);\n            if (typeof abbreviation === \"string\" && abbreviation.length > 0) {\n                return abbreviation;\n            }\n        }\n        if (useIsoCode) {\n            const isoCode = env.lookup(`iso_code`);\n            if (typeof isoCode === \"string\" && isoCode.length > 0) {\n                return isoCode;\n            }\n        }\n        if (languages !== undefined) {\n            for (const lang of languages) {\n                name = env.lookup(`name:${lang}`) || env.lookup(`name_${lang}`);\n                if (typeof name === \"string\" && name.length > 0) {\n                    return name;\n                }\n            }\n        }\n        name = env.lookup(\"name\");\n        if (typeof name === \"string\") {\n            return name;\n        }\n        return undefined;\n    }\n    ExtendedTileInfo.getFeatureName = getFeatureName;\n})(ExtendedTileInfo = exports.ExtendedTileInfo || (exports.ExtendedTileInfo = {}));\n/**\n * Support class for [[ExtendedTileInfo]]. Assist in filling it with data.\n */\nclass ExtendedTileInfoWriter {\n    /**\n     * Create an [[ExtendedTileInfoWriter]] for an [[ExtendedTileInfo]]. Assist in filling the\n     * [[ExtendedTileInfo]] with data.\n     *\n     * @param tileInfo [[ExtendedTileInfo]] to write data to.\n     * @param storeExtendedTags Pass `true` if feature data like `layer`, `class`or `type` should\n     *          be stored for every feature.\n     */\n    constructor(tileInfo, storeExtendedTags, languages) {\n        this.tileInfo = tileInfo;\n        this.storeExtendedTags = storeExtendedTags;\n        this.languages = languages;\n        /** Map to identify which techniques already have been added to the [[ExtendedTileInfo]]. */\n        this.techniqueIndexMap = new Map();\n        /** Map to identify which strings already have been added to the [[ExtendedTileInfo]]. */\n        this.stringMap = new Map();\n        /** Map to identify which `layer` names already have been added to the [[ExtendedTileInfo]]. */\n        this.layerMap = new Map();\n        /** Map to identify which `class` names already have been added to the [[ExtendedTileInfo]]. */\n        this.classMap = new Map();\n        /** Map to identify which `type` names already have been added to the [[ExtendedTileInfo]]. */\n        this.typeMap = new Map();\n    }\n    /**\n     * Adds a [[Technique]] to the catalog of techniques. Individual techniques have a `_index` file\n     * which has been created in the [[StyleSetEvaluator]]. This index is required to identify a\n     * technique. The `Map` is used to map techniques to already added techniques, or store the\n     * technique as new, and add it to the map.\n     *\n     * @param technique The [[Technique]] to add.\n     */\n    addTechnique(technique) {\n        let infoTileTechniqueIndex = this.techniqueIndexMap.get(technique._index);\n        if (infoTileTechniqueIndex !== undefined) {\n            return infoTileTechniqueIndex;\n        }\n        infoTileTechniqueIndex = this.tileInfo.techniqueCatalog.length;\n        // add a new technique. Select the subset of features that should be stored (e.g., _index is\n        // not)\n        const storedTechnique = {};\n        Object.getOwnPropertyNames(technique).forEach(property => {\n            if (!property.startsWith(\"_\")) {\n                storedTechnique[property] = technique[property];\n            }\n        });\n        // Keep the index to identify the original technique later.\n        storedTechnique._index = technique._index;\n        this.techniqueIndexMap.set(technique._index, infoTileTechniqueIndex);\n        this.tileInfo.techniqueCatalog.push(storedTechnique);\n        return infoTileTechniqueIndex;\n    }\n    /**\n     * Add a feature.\n     *\n     * @param featureGroup The feature group to add to.\n     * @param technique The technique to add.\n     * @param env The `env` which is a mix of original OMV feature tags and fields added by the\n     *      [[StyleSetEvaluator]]\n     * @param featureId The featureId, a number unique for many features (but not all).\n     * @param infoTileTechniqueIndex The previously computed index of the technique. Must have been\n     *      computed by `addTechnique(technique)`.\n     * @param isPolygonGroup `true`for polygons.\n     */\n    addFeature(featureGroup, technique, env, featureId, infoTileTechniqueIndex, isPolygonGroup) {\n        // compute name/label of feature\n        const textTechnique = technique;\n        const textLabel = textTechnique.label;\n        const useAbbreviation = textTechnique.useAbbreviation;\n        const useIsoCode = textTechnique.useIsoCode;\n        const name = typeof textLabel === \"string\"\n            ? env.lookup(textLabel)\n            : ExtendedTileInfo.getFeatureName(env, useAbbreviation, useIsoCode, this.languages);\n        let stringIndex = -1;\n        if (name && typeof name === \"string\") {\n            stringIndex = this.addText(name);\n        }\n        // add indices into the arrays.\n        featureGroup.featureIds[featureGroup.numFeatures] = featureId;\n        featureGroup.techniqueIndex[featureGroup.numFeatures] = infoTileTechniqueIndex;\n        featureGroup.textIndex[featureGroup.numFeatures] = stringIndex;\n        featureGroup.positionIndex[featureGroup.numFeatures] = featureGroup.numPositions;\n        // polygons need the extra fields for polygon rings\n        if (isPolygonGroup) {\n            const polygonGroup = featureGroup;\n            harp_utils_1.assert(polygonGroup.outerRingStartIndex !== undefined);\n            harp_utils_1.assert(polygonGroup.innerRingStartIndex !== undefined);\n            harp_utils_1.assert(polygonGroup.innerRingIsOuterContour !== undefined);\n            polygonGroup.outerRingStartIndex[featureGroup.numFeatures] = polygonGroup.groupNumRings;\n        }\n        // store the extra feature fields\n        if (this.storeExtendedTags) {\n            featureGroup.layerIndex[featureGroup.numFeatures] = this.addLayer(env.lookup(\"$layer\"));\n            featureGroup.classIndex[featureGroup.numFeatures] = this.addClass(env.lookup(\"class\"));\n            featureGroup.typeIndex[featureGroup.numFeatures] = this.addType(env.lookup(\"type\"));\n        }\n        featureGroup.numFeatures++;\n    }\n    /**\n     * Add the X/Y coordinate of the point. Only for point feature groups.\n     *\n     * @param featureGroup The feature group to add it to.\n     * @param x X Position of point.\n     * @param y Y Position of point.\n     */\n    addFeaturePoint(featureGroup, x, y) {\n        featureGroup.positions[featureGroup.numPositions++] = x;\n        featureGroup.positions[featureGroup.numPositions++] = y;\n    }\n    /**\n     * Add the line points as X/Y coordinates to the line feature.\n     *\n     * If a line feature has more than one line (rare for HERE data), it should define multiple\n     * line features for it.\n     *\n     * @param featureGroup The feature group to add to. Must be line feature group.\n     * @param points The X/Y coordinates of the points.\n     */\n    addFeaturePoints(featureGroup, points) {\n        const n = featureGroup.numPositions;\n        const l = points.length;\n        const p = featureGroup.positions;\n        for (let i = 0; i < l; i++) {\n            p[n + i] = points[i];\n        }\n        featureGroup.numPositions += points.length;\n    }\n    /**\n     * Add the information about road segments to the line feature. Performs lazy initialization of\n     * `segmentIds`, `segmentStartOffsets`, and `segmentEndOffsets` members of a\n     * [[LineFeatureGroup]] instance.\n     *\n     * @param featureGroup The line feature group to add information to.\n     * @param segmentId Segment id of a feature.\n     * @param startOffset Start offset of a feature.\n     * @param endOffset End offset of a feature.\n     */\n    addRoadSegments(featureGroup, segmentId, startOffset, endOffset) {\n        if (featureGroup.segmentIds === undefined) {\n            featureGroup.segmentIds = new Array();\n            featureGroup.segmentStartOffsets = new Array();\n            featureGroup.segmentEndOffsets = new Array();\n        }\n        featureGroup.segmentIds[featureGroup.numFeatures - 1] = segmentId;\n        featureGroup.segmentStartOffsets[featureGroup.numFeatures - 1] = startOffset;\n        featureGroup.segmentEndOffsets[featureGroup.numFeatures - 1] = endOffset;\n    }\n    /**\n     * Add a single ring to the polygon. Can be called multiple times to add multiple rings to the\n     * polygon.\n     *\n     * @param featureGroup Polygon feature group to add polygon ring to.\n     * @param contour The X/Y coordinates of the ring.\n     * @param isOuterRing Pass `true`if it is a outer ring, otherwise `false`.\n     */\n    addRingPoints(featureGroup, contour, isOuterRing) {\n        featureGroup.innerRingStartIndex[featureGroup.groupNumRings] = featureGroup.numPositions;\n        featureGroup.innerRingIsOuterContour[featureGroup.groupNumRings] = isOuterRing ? 1 : 0;\n        featureGroup.groupNumRings++;\n        const n = featureGroup.numPositions;\n        const l = contour.length;\n        const p = featureGroup.positions;\n        for (let i = 0; i < l; i++) {\n            p[n + i] = contour[i];\n        }\n        featureGroup.numPositions += contour.length;\n    }\n    /**\n     * Finalize the tile info's feature group.\n     */\n    finish() {\n        ExtendedTileInfo.finish(this.tileInfo);\n    }\n    addText(name) {\n        return this.addStringValue(name, this.tileInfo.textCatalog, this.stringMap);\n    }\n    addLayer(name) {\n        return this.addStringValue(name, this.tileInfo.layerCatalog, this.layerMap);\n    }\n    addClass(name) {\n        return this.addStringValue(name, this.tileInfo.classCatalog, this.classMap);\n    }\n    addType(name) {\n        return this.addStringValue(name, this.tileInfo.typeCatalog, this.typeMap);\n    }\n    // Add a string to the strings catalog. Returns index into the catalog.\n    addStringValue(str, catalog, map) {\n        if (str === undefined) {\n            return -1;\n        }\n        const name = str.toString();\n        let i = map.get(name);\n        if (i !== undefined) {\n            return i;\n        }\n        i = catalog.length;\n        catalog.push(name);\n        map.set(name, i);\n        return i;\n    }\n}\nexports.ExtendedTileInfoWriter = ExtendedTileInfoWriter;\n/**\n * Implementation of [[ExtendedTileInfoPolygonAccessor]].\n */\nclass ExtendedTileInfoPolygonAccessorImpl {\n    constructor() {\n        /**\n         * Feature's index in the group.\n         */\n        this.featureIndex = 0;\n        /**\n         * Indicates where the ring starts.\n         */\n        this.ringStart = 0;\n        /**\n         * Number of rings.\n         */\n        this.numRings = 0;\n    }\n    /**\n     * Setup the accessor for extended [[TileInfo]].\n     *\n     * @param polygons polygons feature group.\n     * @param featureIndex feature's index in the group.\n     * @param ringStart where the ring starts.\n     * @param numRings number of rings.\n     */\n    setup(polygons, featureIndex, ringStart, numRings) {\n        this.polygons = polygons;\n        this.featureIndex = featureIndex;\n        this.ringStart = ringStart;\n        this.numRings = numRings;\n    }\n    /**\n     * Shut down the accessor and free all references.\n     */\n    reset() {\n        this.polygons = undefined;\n        this.featureIndex = 0;\n        this.ringStart = 0;\n        this.numRings = 0;\n    }\n    isOuterRing(ringIndex) {\n        harp_utils_1.assert(ringIndex >= 0);\n        harp_utils_1.assert(ringIndex < this.numRings);\n        harp_utils_1.assert(this.polygons !== undefined);\n        if (ringIndex < 0 || ringIndex >= this.numRings || this.polygons === undefined) {\n            throw new Error(\"ExtendedTileInfoPolygonAccessor: Invalid ring index\");\n        }\n        return this.polygons.innerRingIsOuterContour[this.ringStart + ringIndex] !== 0;\n    }\n    getPoints(ringIndex) {\n        harp_utils_1.assert(ringIndex >= 0);\n        harp_utils_1.assert(ringIndex < this.numRings);\n        harp_utils_1.assert(this.polygons !== undefined);\n        if (ringIndex < 0 || ringIndex >= this.numRings || this.polygons === undefined) {\n            throw new Error(\"ExtendedTileInfoPolygonAccessor: Invalid ring index\");\n        }\n        // compute the start/size of the points in this ring. All `points` are actually just the\n        // indices of a single X/Y coordinate.\n        const pointsStart = this.polygons.innerRingStartIndex[this.ringStart + ringIndex];\n        let numPointValues;\n        if (ringIndex < this.numRings - 1) {\n            numPointValues =\n                this.polygons.innerRingStartIndex[this.ringStart + ringIndex + 1] - pointsStart;\n        }\n        else {\n            if (this.ringStart + ringIndex < this.polygons.innerRingStartIndex.length - 1) {\n                numPointValues =\n                    this.polygons.innerRingStartIndex[this.ringStart + ringIndex + 1] - pointsStart;\n            }\n            else {\n                numPointValues = this.polygons.positions.length - pointsStart;\n            }\n        }\n        return {\n            points: this.polygons.positions,\n            pointsStart,\n            numPointValues\n        };\n    }\n}\n/**\n * Supporting class for [[ExtendedTileInfo]]. Takes an [[ExtendedTileInfoHandler]] and calls an\n * `accept` for every feature of the [[ExtendedTileInfo]], or just all features of a specified\n * `featureId`.\n */\nclass ExtendedTileInfoVisitor {\n    constructor(tileInfo) {\n        this.tileInfo = tileInfo;\n    }\n    /**\n     * Visit all feature in the [[ExtendedTileInfo]]\n     *\n     * @param handler Let the `handler` visit all features.\n     */\n    visitAll(handler) {\n        this.visitAllPointFeatures(handler);\n        this.visitAllLineFeatures(handler);\n        this.visitAllPolygonFeatures(handler);\n    }\n    /**\n     * Visit all features of a specified featureId.\n     *\n     * @param featureId The featureId to visit.\n     * @param handler The `handler` to use.\n     */\n    visitFeature(featureId, handler) {\n        let numFeaturesFound = 0;\n        const numPointFeatures = this.tileInfo.pointGroup.numFeatures;\n        const pointFeatures = this.tileInfo.pointGroup.featureIds;\n        for (let i = 0; i < numPointFeatures; i++) {\n            if (pointFeatures[i] === featureId) {\n                numFeaturesFound++;\n                this.visitPointFeature(i, handler);\n            }\n        }\n        const numLineFeatures = this.tileInfo.lineGroup.numFeatures;\n        const lineFeatures = this.tileInfo.lineGroup.featureIds;\n        for (let i = 0; i < numLineFeatures; i++) {\n            if (lineFeatures[i] === featureId) {\n                numFeaturesFound++;\n                this.visitLineFeature(i, handler);\n            }\n        }\n        const numPolygonFeatures = this.tileInfo.polygonGroup.numFeatures;\n        const polygonsFeatures = this.tileInfo.polygonGroup.featureIds;\n        for (let i = 0; i < numPolygonFeatures; i++) {\n            if (polygonsFeatures[i] === featureId) {\n                numFeaturesFound++;\n                this.visitPolygonFeature(i, handler);\n            }\n        }\n        return numFeaturesFound;\n    }\n    /**\n     * Visit all `POINT` features.\n     *\n     * @param handler The `handler` to use.\n     */\n    visitAllPointFeatures(handler) {\n        const numFeatures = this.tileInfo.pointGroup.numFeatures;\n        for (let i = 0; i < numFeatures; i++) {\n            this.visitPointFeature(i, handler);\n        }\n    }\n    /**\n     * Visit all `LINESTRING` features.\n     *\n     * @param handler The handler to use.\n     */\n    visitAllLineFeatures(handler) {\n        const numFeatures = this.tileInfo.lineGroup.numFeatures;\n        for (let i = 0; i < numFeatures; i++) {\n            this.visitLineFeature(i, handler);\n        }\n    }\n    /**\n     * Visit all `POLYGON` features.\n     *\n     * @param handler The `handler` to use.\n     */\n    visitAllPolygonFeatures(handler) {\n        const numFeatures = this.tileInfo.polygonGroup.numFeatures;\n        for (let i = 0; i < numFeatures; i++) {\n            this.visitPolygonFeature(i, handler);\n        }\n    }\n    getTag(featureIndex, index) {\n        return index !== undefined && index[featureIndex] >= 0 ? index[featureIndex] : -1;\n    }\n    /**\n     * Call the `handler` on a point feature.\n     *\n     * @param featureIndex The index of the feature into the feature table.\n     * @param handler The `handler` to use.\n     */\n    visitPointFeature(featureIndex, handler) {\n        const tileInfo = this.tileInfo;\n        const points = tileInfo.pointGroup;\n        const start = points.positionIndex[featureIndex];\n        const x = points.positions[start];\n        const y = points.positions[start + 1];\n        if (!!handler.acceptPoint) {\n            handler.acceptPoint(points.featureIds[featureIndex], points.techniqueIndex[featureIndex], x, y, points.textIndex[featureIndex], this.getTag(featureIndex, points.layerIndex), this.getTag(featureIndex, points.classIndex), this.getTag(featureIndex, points.typeIndex));\n        }\n    }\n    /**\n     * Call the `handler` on a line feature.\n     *\n     * @param featureIndex The index of the feature into the feature table.\n     * @param handler The `handler` to use.\n     */\n    visitLineFeature(featureIndex, handler) {\n        const tileInfo = this.tileInfo;\n        const lines = tileInfo.lineGroup;\n        const numFeatures = lines.numFeatures;\n        const positionsStart = lines.positionIndex[featureIndex];\n        const numPointValues = featureIndex === numFeatures - 1\n            ? lines.positions.length - positionsStart\n            : lines.positionIndex[featureIndex + 1] - positionsStart;\n        let segmentId;\n        let startOffset;\n        let endOffset;\n        if (lines.segmentIds !== undefined) {\n            segmentId = lines.segmentIds[featureIndex];\n            startOffset = lines.segmentStartOffsets[featureIndex];\n            endOffset = lines.segmentEndOffsets[featureIndex];\n        }\n        if (!!handler.acceptLine) {\n            handler.acceptLine(lines.featureIds[featureIndex], lines.techniqueIndex[featureIndex], lines.textIndex[featureIndex], this.getTag(featureIndex, lines.layerIndex), this.getTag(featureIndex, lines.classIndex), this.getTag(featureIndex, lines.typeIndex), tileInfo.lineGroup.positions, positionsStart, numPointValues, segmentId, startOffset, endOffset);\n        }\n    }\n    /**\n     * Call the `handler` on a polygon feature.\n     *\n     * @param featureIndex The index of the feature into the feature table.\n     * @param handler The `handler` to use.\n     */\n    visitPolygonFeature(featureIndex, handler) {\n        if (handler.acceptPolygon === undefined) {\n            return;\n        }\n        const tileInfo = this.tileInfo;\n        const polygons = tileInfo.polygonGroup;\n        const numFeatures = polygons.numFeatures;\n        const ringStart = polygons.outerRingStartIndex[featureIndex];\n        const numRings = featureIndex === numFeatures - 1\n            ? polygons.innerRingStartIndex.length - ringStart\n            : polygons.outerRingStartIndex[featureIndex + 1] - ringStart;\n        // Use a static instance, so we do not allocate anything here\n        ExtendedTileInfoVisitor.polygonAccessor.setup(polygons, featureIndex, ringStart, numRings);\n        handler.acceptPolygon(polygons.featureIds[featureIndex], polygons.techniqueIndex[featureIndex], polygons.textIndex[featureIndex], this.getTag(featureIndex, polygons.layerIndex), this.getTag(featureIndex, polygons.classIndex), this.getTag(featureIndex, polygons.typeIndex), ExtendedTileInfoVisitor.polygonAccessor);\n        // Free all data references.\n        ExtendedTileInfoVisitor.polygonAccessor.reset();\n    }\n}\n// static instance to work without allocations.\nExtendedTileInfoVisitor.polygonAccessor = new ExtendedTileInfoPolygonAccessorImpl();\nexports.ExtendedTileInfoVisitor = ExtendedTileInfoVisitor;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The ThemeVisitor visits every style in the theme in a depth-first fashion.\n */\nclass ThemeVisitor {\n    constructor(theme) {\n        this.theme = theme;\n    }\n    /**\n     * Applies a function to every style in the theme.\n     *\n     * @param visitFunc Function to be called with `style` as an argument. Function should return\n     *                  `true` to cancel visitation.\n     * @returns `true` if function has finished prematurely.\n     */\n    visitStyles(visitFunc) {\n        const visit = (style) => {\n            if (visitFunc(style)) {\n                return true;\n            }\n            if (style.styles !== undefined) {\n                for (const currStyle of style.styles) {\n                    if (visit(currStyle)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        if (this.theme.styles !== undefined) {\n            for (const styleSetName in this.theme.styles) {\n                if (this.theme.styles[styleSetName] !== undefined) {\n                    for (const style of this.theme.styles[styleSetName]) {\n                        if (visit(style)) {\n                            return true;\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n}\nexports.ThemeVisitor = ThemeVisitor;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_datasource_protocol_1 = require(\"@here/harp-datasource-protocol\");\nconst harp_geoutils_1 = require(\"@here/harp-geoutils\");\nconst harp_utils_1 = require(\"@here/harp-utils\");\nconst WorkerService_1 = require(\"./WorkerService\");\n// tslint:disable-next-line:no-var-requires\nconst geojsonvt = require(\"geojson-vt\");\nconst logger = harp_utils_1.LoggerManager.instance.create(\"TilerService\");\n/**\n * An extension to [[WorkerService]], the `TilerService` implements an asynchronous (message based)\n * service to tile untiled payloads in web workers. The `TilerService` itself lives in the web\n * worker, and communicates with messages by means of a [[ConcurrentWorkerSet]] with the\n * application.\n *\n * The `TilerService` registers tile indices (parent tile to be subdivided) by handling a\n * [[RegisterIndexRequest]], and can later retrieve tiled payloads from through the [[TileRequest]].\n * The data is sent back in form of a [[WorkerServiceResponse]].\n */\nclass TilerService extends WorkerService_1.WorkerService {\n    /**\n     * Set up the `TilerService`. The name of the service must be unique\n     *\n     * @param serviceId Service id. Must be unique.\n     */\n    constructor(serviceId) {\n        super(serviceId);\n        this.serviceId = serviceId;\n        this.m_tileIndexMap = new Map();\n    }\n    /**\n     * Start a [[TilerService]].\n     *\n     * @param serviceId Service id. Must be unique.\n     */\n    static start(serviceId) {\n        return new TilerService(serviceId);\n    }\n    /**\n     * Handle incoming request messages. Identifies message type and processes the request.\n     *\n     * @param request [[WorkerTilerProtocol]] request.\n     * @returns A promise which resolves to a [[WorkerServiceResponse]].\n     */\n    handleRequest(request) {\n        if (harp_datasource_protocol_1.WorkerTilerProtocol.isRegisterIndexRequest(request)) {\n            return this.handleRegisterIndexRequest(request);\n        }\n        else if (harp_datasource_protocol_1.WorkerTilerProtocol.isTileRequest(request)) {\n            return this.handleTileRequest(request);\n        }\n        else {\n            return super.handleRequest(request);\n        }\n    }\n    handleTileRequest(request) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tileIndex = this.m_tileIndexMap.get(request.index);\n            if (tileIndex === undefined) {\n                return { response: {} };\n            }\n            const tileKey = harp_geoutils_1.TileKey.fromMortonCode(request.tileKey);\n            const tile = tileIndex.getTile(tileKey.level, tileKey.column, tileKey.row);\n            return { response: tile || {} };\n        });\n    }\n    handleRegisterIndexRequest(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let tileIndex = this.m_tileIndexMap.get(message.id);\n            if (tileIndex === undefined) {\n                let json = message.input;\n                if (typeof message.input === \"string\") {\n                    const response = yield fetch(message.input);\n                    if (!response.ok) {\n                        logger.error(`${message.input} Status Text:  ${response.statusText}`);\n                        return { response: {} };\n                    }\n                    json = yield response.json();\n                }\n                tileIndex = geojsonvt.default(json, {\n                    maxZoom: 20,\n                    indexMaxZoom: 5,\n                    indexMaxPoints: 100000,\n                    tolerance: 3,\n                    extent: 4096,\n                    buffer: 0,\n                    lineMetrics: false,\n                    promoteId: null,\n                    generateId: false,\n                    debug: 0 // logging level (0, 1 or 2)\n                });\n                this.m_tileIndexMap.set(message.id, tileIndex);\n            }\n            return { response: {} };\n        });\n    }\n}\nexports.TilerService = TilerService;\n","\"use strict\";\n/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst harp_datasource_protocol_1 = require(\"@here/harp-datasource-protocol\");\nconst WorkerService_1 = require(\"./WorkerService\");\n/**\n * Manages dynamic worker services in Web Worker context.\n *\n * Handles `CreateService` and `DestroyService` messages sent to Web Worker. Singleton (in scope of\n * one worker runtime!), starts automatically with first [[getInstance]] call.\n */\nclass WorkerServiceManager extends WorkerService_1.WorkerService {\n    constructor(serviceId = harp_datasource_protocol_1.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID) {\n        super(serviceId);\n        /**\n         * Contains all registered service factories indexed by `serviceType`.\n         */\n        this.m_factories = new Map();\n        /**\n         * Contains all managed worker services indexed by their `serviceId`.\n         */\n        this.m_services = new Map();\n    }\n    /**\n     * Gets the default instance of `WorkerServiceManager`. Starts the service when first called.\n     */\n    static getInstance() {\n        if (this.m_service === undefined) {\n            this.m_service = new WorkerServiceManager(harp_datasource_protocol_1.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID);\n        }\n        return this.m_service;\n    }\n    /**\n     * Register [[WorkerService]] class to this manager.\n     *\n     * @param workerServiceDescriptor service type and factory\n     */\n    register(workerServiceDescriptor) {\n        this.m_factories.set(workerServiceDescriptor.serviceType, workerServiceDescriptor.factory);\n    }\n    handleRequest(request) {\n        if (request.type === harp_datasource_protocol_1.WorkerServiceProtocol.Requests.CreateService) {\n            const existingService = this.m_services.get(request.targetServiceId);\n            if (existingService !== undefined) {\n                throw Error(`error - service with targetServiceId='${request.targetServiceId}' already running, ignoring CreateService request`);\n            }\n            const factory = this.m_factories.get(request.targetServiceType);\n            if (factory === undefined) {\n                throw Error(`unknown targetServiceType requested: '${request.targetServiceType}'`);\n            }\n            const service = factory(request.targetServiceId);\n            this.m_services.set(request.targetServiceId, service);\n        }\n        if (request.type === harp_datasource_protocol_1.WorkerServiceProtocol.Requests.DestroyService) {\n            const service = this.m_services.get(request.targetServiceId);\n            if (service === undefined) {\n                throw Error(`unknown targetServiceId '${request.targetServiceId}'`);\n            }\n            service.destroy();\n            this.m_services.delete(request.targetServiceId);\n        }\n        return Promise.resolve({\n            response: {}\n        });\n    }\n}\nexports.WorkerServiceManager = WorkerServiceManager;\n","\n// calculate simplification data using optimized Douglas-Peucker algorithm\n\nexport default function simplify(coords, first, last, sqTolerance) {\n    var maxSqDist = sqTolerance;\n    var mid = (last - first) >> 1;\n    var minPosToMid = last - first;\n    var index;\n\n    var ax = coords[first];\n    var ay = coords[first + 1];\n    var bx = coords[last];\n    var by = coords[last + 1];\n\n    for (var i = first + 3; i < last; i += 3) {\n        var d = getSqSegDist(coords[i], coords[i + 1], ax, ay, bx, by);\n\n        if (d > maxSqDist) {\n            index = i;\n            maxSqDist = d;\n\n        } else if (d === maxSqDist) {\n            // a workaround to ensure we choose a pivot close to the middle of the list,\n            // reducing recursion depth, for certain degenerate inputs\n            // https://github.com/mapbox/geojson-vt/issues/104\n            var posToMid = Math.abs(i - mid);\n            if (posToMid < minPosToMid) {\n                index = i;\n                minPosToMid = posToMid;\n            }\n        }\n    }\n\n    if (maxSqDist > sqTolerance) {\n        if (index - first > 3) simplify(coords, first, index, sqTolerance);\n        coords[index + 2] = maxSqDist;\n        if (last - index > 3) simplify(coords, index, last, sqTolerance);\n    }\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(px, py, x, y, bx, by) {\n\n    var dx = bx - x;\n    var dy = by - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = bx;\n            y = by;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = px - x;\n    dy = py - y;\n\n    return dx * dx + dy * dy;\n}\n","\nexport default function createFeature(id, type, geom, tags) {\n    var feature = {\n        id: typeof id === 'undefined' ? null : id,\n        type: type,\n        geometry: geom,\n        tags: tags,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n    calcBBox(feature);\n    return feature;\n}\n\nfunction calcBBox(feature) {\n    var geom = feature.geometry;\n    var type = feature.type;\n\n    if (type === 'Point' || type === 'MultiPoint' || type === 'LineString') {\n        calcLineBBox(feature, geom);\n\n    } else if (type === 'Polygon' || type === 'MultiLineString') {\n        for (var i = 0; i < geom.length; i++) {\n            calcLineBBox(feature, geom[i]);\n        }\n\n    } else if (type === 'MultiPolygon') {\n        for (i = 0; i < geom.length; i++) {\n            for (var j = 0; j < geom[i].length; j++) {\n                calcLineBBox(feature, geom[i][j]);\n            }\n        }\n    }\n}\n\nfunction calcLineBBox(feature, geom) {\n    for (var i = 0; i < geom.length; i += 3) {\n        feature.minX = Math.min(feature.minX, geom[i]);\n        feature.minY = Math.min(feature.minY, geom[i + 1]);\n        feature.maxX = Math.max(feature.maxX, geom[i]);\n        feature.maxY = Math.max(feature.maxY, geom[i + 1]);\n    }\n}\n","\nimport simplify from './simplify';\nimport createFeature from './feature';\n\n// converts GeoJSON feature into an intermediate projected JSON vector format with simplification data\n\nexport default function convert(data, options) {\n    var features = [];\n    if (data.type === 'FeatureCollection') {\n        for (var i = 0; i < data.features.length; i++) {\n            convertFeature(features, data.features[i], options, i);\n        }\n\n    } else if (data.type === 'Feature') {\n        convertFeature(features, data, options);\n\n    } else {\n        // single geometry or a geometry collection\n        convertFeature(features, {geometry: data}, options);\n    }\n\n    return features;\n}\n\nfunction convertFeature(features, geojson, options, index) {\n    if (!geojson.geometry) return;\n\n    var coords = geojson.geometry.coordinates;\n    var type = geojson.geometry.type;\n    var tolerance = Math.pow(options.tolerance / ((1 << options.maxZoom) * options.extent), 2);\n    var geometry = [];\n    var id = geojson.id;\n    if (options.promoteId) {\n        id = geojson.properties[options.promoteId];\n    } else if (options.generateId) {\n        id = index || 0;\n    }\n    if (type === 'Point') {\n        convertPoint(coords, geometry);\n\n    } else if (type === 'MultiPoint') {\n        for (var i = 0; i < coords.length; i++) {\n            convertPoint(coords[i], geometry);\n        }\n\n    } else if (type === 'LineString') {\n        convertLine(coords, geometry, tolerance, false);\n\n    } else if (type === 'MultiLineString') {\n        if (options.lineMetrics) {\n            // explode into linestrings to be able to track metrics\n            for (i = 0; i < coords.length; i++) {\n                geometry = [];\n                convertLine(coords[i], geometry, tolerance, false);\n                features.push(createFeature(id, 'LineString', geometry, geojson.properties));\n            }\n            return;\n        } else {\n            convertLines(coords, geometry, tolerance, false);\n        }\n\n    } else if (type === 'Polygon') {\n        convertLines(coords, geometry, tolerance, true);\n\n    } else if (type === 'MultiPolygon') {\n        for (i = 0; i < coords.length; i++) {\n            var polygon = [];\n            convertLines(coords[i], polygon, tolerance, true);\n            geometry.push(polygon);\n        }\n    } else if (type === 'GeometryCollection') {\n        for (i = 0; i < geojson.geometry.geometries.length; i++) {\n            convertFeature(features, {\n                id: id,\n                geometry: geojson.geometry.geometries[i],\n                properties: geojson.properties\n            }, options, index);\n        }\n        return;\n    } else {\n        throw new Error('Input data is not a valid GeoJSON object.');\n    }\n\n    features.push(createFeature(id, type, geometry, geojson.properties));\n}\n\nfunction convertPoint(coords, out) {\n    out.push(projectX(coords[0]));\n    out.push(projectY(coords[1]));\n    out.push(0);\n}\n\nfunction convertLine(ring, out, tolerance, isPolygon) {\n    var x0, y0;\n    var size = 0;\n\n    for (var j = 0; j < ring.length; j++) {\n        var x = projectX(ring[j][0]);\n        var y = projectY(ring[j][1]);\n\n        out.push(x);\n        out.push(y);\n        out.push(0);\n\n        if (j > 0) {\n            if (isPolygon) {\n                size += (x0 * y - x * y0) / 2; // area\n            } else {\n                size += Math.sqrt(Math.pow(x - x0, 2) + Math.pow(y - y0, 2)); // length\n            }\n        }\n        x0 = x;\n        y0 = y;\n    }\n\n    var last = out.length - 3;\n    out[2] = 1;\n    simplify(out, 0, last, tolerance);\n    out[last + 2] = 1;\n\n    out.size = Math.abs(size);\n    out.start = 0;\n    out.end = out.size;\n}\n\nfunction convertLines(rings, out, tolerance, isPolygon) {\n    for (var i = 0; i < rings.length; i++) {\n        var geom = [];\n        convertLine(rings[i], geom, tolerance, isPolygon);\n        out.push(geom);\n    }\n}\n\nfunction projectX(x) {\n    return x / 360 + 0.5;\n}\n\nfunction projectY(y) {\n    var sin = Math.sin(y * Math.PI / 180);\n    var y2 = 0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI;\n    return y2 < 0 ? 0 : y2 > 1 ? 1 : y2;\n}\n","\nimport createFeature from './feature';\n\n/* clip features between two axis-parallel lines:\n *     |        |\n *  ___|___     |     /\n * /   |   \\____|____/\n *     |        |\n */\n\nexport default function clip(features, scale, k1, k2, axis, minAll, maxAll, options) {\n\n    k1 /= scale;\n    k2 /= scale;\n\n    if (minAll >= k1 && maxAll < k2) return features; // trivial accept\n    else if (maxAll < k1 || minAll >= k2) return null; // trivial reject\n\n    var clipped = [];\n\n    for (var i = 0; i < features.length; i++) {\n\n        var feature = features[i];\n        var geometry = feature.geometry;\n        var type = feature.type;\n\n        var min = axis === 0 ? feature.minX : feature.minY;\n        var max = axis === 0 ? feature.maxX : feature.maxY;\n\n        if (min >= k1 && max < k2) { // trivial accept\n            clipped.push(feature);\n            continue;\n        } else if (max < k1 || min >= k2) { // trivial reject\n            continue;\n        }\n\n        var newGeometry = [];\n\n        if (type === 'Point' || type === 'MultiPoint') {\n            clipPoints(geometry, newGeometry, k1, k2, axis);\n\n        } else if (type === 'LineString') {\n            clipLine(geometry, newGeometry, k1, k2, axis, false, options.lineMetrics);\n\n        } else if (type === 'MultiLineString') {\n            clipLines(geometry, newGeometry, k1, k2, axis, false);\n\n        } else if (type === 'Polygon') {\n            clipLines(geometry, newGeometry, k1, k2, axis, true);\n\n        } else if (type === 'MultiPolygon') {\n            for (var j = 0; j < geometry.length; j++) {\n                var polygon = [];\n                clipLines(geometry[j], polygon, k1, k2, axis, true);\n                if (polygon.length) {\n                    newGeometry.push(polygon);\n                }\n            }\n        }\n\n        if (newGeometry.length) {\n            if (options.lineMetrics && type === 'LineString') {\n                for (j = 0; j < newGeometry.length; j++) {\n                    clipped.push(createFeature(feature.id, type, newGeometry[j], feature.tags));\n                }\n                continue;\n            }\n\n            if (type === 'LineString' || type === 'MultiLineString') {\n                if (newGeometry.length === 1) {\n                    type = 'LineString';\n                    newGeometry = newGeometry[0];\n                } else {\n                    type = 'MultiLineString';\n                }\n            }\n            if (type === 'Point' || type === 'MultiPoint') {\n                type = newGeometry.length === 3 ? 'Point' : 'MultiPoint';\n            }\n\n            clipped.push(createFeature(feature.id, type, newGeometry, feature.tags));\n        }\n    }\n\n    return clipped.length ? clipped : null;\n}\n\nfunction clipPoints(geom, newGeom, k1, k2, axis) {\n    for (var i = 0; i < geom.length; i += 3) {\n        var a = geom[i + axis];\n\n        if (a >= k1 && a <= k2) {\n            newGeom.push(geom[i]);\n            newGeom.push(geom[i + 1]);\n            newGeom.push(geom[i + 2]);\n        }\n    }\n}\n\nfunction clipLine(geom, newGeom, k1, k2, axis, isPolygon, trackMetrics) {\n\n    var slice = newSlice(geom);\n    var intersect = axis === 0 ? intersectX : intersectY;\n    var len = geom.start;\n    var segLen, t;\n\n    for (var i = 0; i < geom.length - 3; i += 3) {\n        var ax = geom[i];\n        var ay = geom[i + 1];\n        var az = geom[i + 2];\n        var bx = geom[i + 3];\n        var by = geom[i + 4];\n        var a = axis === 0 ? ax : ay;\n        var b = axis === 0 ? bx : by;\n        var exited = false;\n\n        if (trackMetrics) segLen = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\n        if (a < k1) {\n            // ---|-->  | (line enters the clip region from the left)\n            if (b > k1) {\n                t = intersect(slice, ax, ay, bx, by, k1);\n                if (trackMetrics) slice.start = len + segLen * t;\n            }\n        } else if (a > k2) {\n            // |  <--|--- (line enters the clip region from the right)\n            if (b < k2) {\n                t = intersect(slice, ax, ay, bx, by, k2);\n                if (trackMetrics) slice.start = len + segLen * t;\n            }\n        } else {\n            addPoint(slice, ax, ay, az);\n        }\n        if (b < k1 && a >= k1) {\n            // <--|---  | or <--|-----|--- (line exits the clip region on the left)\n            t = intersect(slice, ax, ay, bx, by, k1);\n            exited = true;\n        }\n        if (b > k2 && a <= k2) {\n            // |  ---|--> or ---|-----|--> (line exits the clip region on the right)\n            t = intersect(slice, ax, ay, bx, by, k2);\n            exited = true;\n        }\n\n        if (!isPolygon && exited) {\n            if (trackMetrics) slice.end = len + segLen * t;\n            newGeom.push(slice);\n            slice = newSlice(geom);\n        }\n\n        if (trackMetrics) len += segLen;\n    }\n\n    // add the last point\n    var last = geom.length - 3;\n    ax = geom[last];\n    ay = geom[last + 1];\n    az = geom[last + 2];\n    a = axis === 0 ? ax : ay;\n    if (a >= k1 && a <= k2) addPoint(slice, ax, ay, az);\n\n    // close the polygon if its endpoints are not the same after clipping\n    last = slice.length - 3;\n    if (isPolygon && last >= 3 && (slice[last] !== slice[0] || slice[last + 1] !== slice[1])) {\n        addPoint(slice, slice[0], slice[1], slice[2]);\n    }\n\n    // add the final slice\n    if (slice.length) {\n        newGeom.push(slice);\n    }\n}\n\nfunction newSlice(line) {\n    var slice = [];\n    slice.size = line.size;\n    slice.start = line.start;\n    slice.end = line.end;\n    return slice;\n}\n\nfunction clipLines(geom, newGeom, k1, k2, axis, isPolygon) {\n    for (var i = 0; i < geom.length; i++) {\n        clipLine(geom[i], newGeom, k1, k2, axis, isPolygon, false);\n    }\n}\n\nfunction addPoint(out, x, y, z) {\n    out.push(x);\n    out.push(y);\n    out.push(z);\n}\n\nfunction intersectX(out, ax, ay, bx, by, x) {\n    var t = (x - ax) / (bx - ax);\n    out.push(x);\n    out.push(ay + (by - ay) * t);\n    out.push(1);\n    return t;\n}\n\nfunction intersectY(out, ax, ay, bx, by, y) {\n    var t = (y - ay) / (by - ay);\n    out.push(ax + (bx - ax) * t);\n    out.push(y);\n    out.push(1);\n    return t;\n}\n","\nimport clip from './clip';\nimport createFeature from './feature';\n\nexport default function wrap(features, options) {\n    var buffer = options.buffer / options.extent;\n    var merged = features;\n    var left  = clip(features, 1, -1 - buffer, buffer,     0, -1, 2, options); // left world copy\n    var right = clip(features, 1,  1 - buffer, 2 + buffer, 0, -1, 2, options); // right world copy\n\n    if (left || right) {\n        merged = clip(features, 1, -buffer, 1 + buffer, 0, -1, 2, options) || []; // center world copy\n\n        if (left) merged = shiftFeatureCoords(left, 1).concat(merged); // merge left into center\n        if (right) merged = merged.concat(shiftFeatureCoords(right, -1)); // merge right into center\n    }\n\n    return merged;\n}\n\nfunction shiftFeatureCoords(features, offset) {\n    var newFeatures = [];\n\n    for (var i = 0; i < features.length; i++) {\n        var feature = features[i],\n            type = feature.type;\n\n        var newGeometry;\n\n        if (type === 'Point' || type === 'MultiPoint' || type === 'LineString') {\n            newGeometry = shiftCoords(feature.geometry, offset);\n\n        } else if (type === 'MultiLineString' || type === 'Polygon') {\n            newGeometry = [];\n            for (var j = 0; j < feature.geometry.length; j++) {\n                newGeometry.push(shiftCoords(feature.geometry[j], offset));\n            }\n        } else if (type === 'MultiPolygon') {\n            newGeometry = [];\n            for (j = 0; j < feature.geometry.length; j++) {\n                var newPolygon = [];\n                for (var k = 0; k < feature.geometry[j].length; k++) {\n                    newPolygon.push(shiftCoords(feature.geometry[j][k], offset));\n                }\n                newGeometry.push(newPolygon);\n            }\n        }\n\n        newFeatures.push(createFeature(feature.id, type, newGeometry, feature.tags));\n    }\n\n    return newFeatures;\n}\n\nfunction shiftCoords(points, offset) {\n    var newPoints = [];\n    newPoints.size = points.size;\n\n    if (points.start !== undefined) {\n        newPoints.start = points.start;\n        newPoints.end = points.end;\n    }\n\n    for (var i = 0; i < points.length; i += 3) {\n        newPoints.push(points[i] + offset, points[i + 1], points[i + 2]);\n    }\n    return newPoints;\n}\n","\n// Transforms the coordinates of each feature in the given tile from\n// mercator-projected space into (extent x extent) tile space.\nexport default function transformTile(tile, extent) {\n    if (tile.transformed) return tile;\n\n    var z2 = 1 << tile.z,\n        tx = tile.x,\n        ty = tile.y,\n        i, j, k;\n\n    for (i = 0; i < tile.features.length; i++) {\n        var feature = tile.features[i],\n            geom = feature.geometry,\n            type = feature.type;\n\n        feature.geometry = [];\n\n        if (type === 1) {\n            for (j = 0; j < geom.length; j += 2) {\n                feature.geometry.push(transformPoint(geom[j], geom[j + 1], extent, z2, tx, ty));\n            }\n        } else {\n            for (j = 0; j < geom.length; j++) {\n                var ring = [];\n                for (k = 0; k < geom[j].length; k += 2) {\n                    ring.push(transformPoint(geom[j][k], geom[j][k + 1], extent, z2, tx, ty));\n                }\n                feature.geometry.push(ring);\n            }\n        }\n    }\n\n    tile.transformed = true;\n\n    return tile;\n}\n\nfunction transformPoint(x, y, extent, z2, tx, ty) {\n    return [\n        Math.round(extent * (x * z2 - tx)),\n        Math.round(extent * (y * z2 - ty))];\n}\n","\nexport default function createTile(features, z, tx, ty, options) {\n    var tolerance = z === options.maxZoom ? 0 : options.tolerance / ((1 << z) * options.extent);\n    var tile = {\n        features: [],\n        numPoints: 0,\n        numSimplified: 0,\n        numFeatures: 0,\n        source: null,\n        x: tx,\n        y: ty,\n        z: z,\n        transformed: false,\n        minX: 2,\n        minY: 1,\n        maxX: -1,\n        maxY: 0\n    };\n    for (var i = 0; i < features.length; i++) {\n        tile.numFeatures++;\n        addFeature(tile, features[i], tolerance, options);\n\n        var minX = features[i].minX;\n        var minY = features[i].minY;\n        var maxX = features[i].maxX;\n        var maxY = features[i].maxY;\n\n        if (minX < tile.minX) tile.minX = minX;\n        if (minY < tile.minY) tile.minY = minY;\n        if (maxX > tile.maxX) tile.maxX = maxX;\n        if (maxY > tile.maxY) tile.maxY = maxY;\n    }\n    return tile;\n}\n\nfunction addFeature(tile, feature, tolerance, options) {\n\n    var geom = feature.geometry,\n        type = feature.type,\n        simplified = [];\n\n    if (type === 'Point' || type === 'MultiPoint') {\n        for (var i = 0; i < geom.length; i += 3) {\n            simplified.push(geom[i]);\n            simplified.push(geom[i + 1]);\n            tile.numPoints++;\n            tile.numSimplified++;\n        }\n\n    } else if (type === 'LineString') {\n        addLine(simplified, geom, tile, tolerance, false, false);\n\n    } else if (type === 'MultiLineString' || type === 'Polygon') {\n        for (i = 0; i < geom.length; i++) {\n            addLine(simplified, geom[i], tile, tolerance, type === 'Polygon', i === 0);\n        }\n\n    } else if (type === 'MultiPolygon') {\n\n        for (var k = 0; k < geom.length; k++) {\n            var polygon = geom[k];\n            for (i = 0; i < polygon.length; i++) {\n                addLine(simplified, polygon[i], tile, tolerance, true, i === 0);\n            }\n        }\n    }\n\n    if (simplified.length) {\n        var tags = feature.tags || null;\n        if (type === 'LineString' && options.lineMetrics) {\n            tags = {};\n            for (var key in feature.tags) tags[key] = feature.tags[key];\n            tags['mapbox_clip_start'] = geom.start / geom.size;\n            tags['mapbox_clip_end'] = geom.end / geom.size;\n        }\n        var tileFeature = {\n            geometry: simplified,\n            type: type === 'Polygon' || type === 'MultiPolygon' ? 3 :\n                type === 'LineString' || type === 'MultiLineString' ? 2 : 1,\n            tags: tags\n        };\n        if (feature.id !== null) {\n            tileFeature.id = feature.id;\n        }\n        tile.features.push(tileFeature);\n    }\n}\n\nfunction addLine(result, geom, tile, tolerance, isPolygon, isOuter) {\n    var sqTolerance = tolerance * tolerance;\n\n    if (tolerance > 0 && (geom.size < (isPolygon ? sqTolerance : tolerance))) {\n        tile.numPoints += geom.length / 3;\n        return;\n    }\n\n    var ring = [];\n\n    for (var i = 0; i < geom.length; i += 3) {\n        if (tolerance === 0 || geom[i + 2] > sqTolerance) {\n            tile.numSimplified++;\n            ring.push(geom[i]);\n            ring.push(geom[i + 1]);\n        }\n        tile.numPoints++;\n    }\n\n    if (isPolygon) rewind(ring, isOuter);\n\n    result.push(ring);\n}\n\nfunction rewind(ring, clockwise) {\n    var area = 0;\n    for (var i = 0, len = ring.length, j = len - 2; i < len; j = i, i += 2) {\n        area += (ring[i] - ring[j]) * (ring[i + 1] + ring[j + 1]);\n    }\n    if (area > 0 === clockwise) {\n        for (i = 0, len = ring.length; i < len / 2; i += 2) {\n            var x = ring[i];\n            var y = ring[i + 1];\n            ring[i] = ring[len - 2 - i];\n            ring[i + 1] = ring[len - 1 - i];\n            ring[len - 2 - i] = x;\n            ring[len - 1 - i] = y;\n        }\n    }\n}\n","\nimport convert from './convert';     // GeoJSON conversion and preprocessing\nimport clip from './clip';           // stripe clipping algorithm\nimport wrap from './wrap';           // date line processing\nimport transform from './transform'; // coordinate transformation\nimport createTile from './tile';     // final simplified tile generation\n\nexport default function geojsonvt(data, options) {\n    return new GeoJSONVT(data, options);\n}\n\nfunction GeoJSONVT(data, options) {\n    options = this.options = extend(Object.create(this.options), options);\n\n    var debug = options.debug;\n\n    if (debug) console.time('preprocess data');\n\n    if (options.maxZoom < 0 || options.maxZoom > 24) throw new Error('maxZoom should be in the 0-24 range');\n    if (options.promoteId && options.generateId) throw new Error('promoteId and generateId cannot be used together.');\n\n    var features = convert(data, options);\n\n    this.tiles = {};\n    this.tileCoords = [];\n\n    if (debug) {\n        console.timeEnd('preprocess data');\n        console.log('index: maxZoom: %d, maxPoints: %d', options.indexMaxZoom, options.indexMaxPoints);\n        console.time('generate tiles');\n        this.stats = {};\n        this.total = 0;\n    }\n\n    features = wrap(features, options);\n\n    // start slicing from the top tile down\n    if (features.length) this.splitTile(features, 0, 0, 0);\n\n    if (debug) {\n        if (features.length) console.log('features: %d, points: %d', this.tiles[0].numFeatures, this.tiles[0].numPoints);\n        console.timeEnd('generate tiles');\n        console.log('tiles generated:', this.total, JSON.stringify(this.stats));\n    }\n}\n\nGeoJSONVT.prototype.options = {\n    maxZoom: 14,            // max zoom to preserve detail on\n    indexMaxZoom: 5,        // max zoom in the tile index\n    indexMaxPoints: 100000, // max number of points per tile in the tile index\n    tolerance: 3,           // simplification tolerance (higher means simpler)\n    extent: 4096,           // tile extent\n    buffer: 64,             // tile buffer on each side\n    lineMetrics: false,     // whether to calculate line metrics\n    promoteId: null,        // name of a feature property to be promoted to feature.id\n    generateId: false,      // whether to generate feature ids. Cannot be used with promoteId\n    debug: 0                // logging level (0, 1 or 2)\n};\n\nGeoJSONVT.prototype.splitTile = function (features, z, x, y, cz, cx, cy) {\n\n    var stack = [features, z, x, y],\n        options = this.options,\n        debug = options.debug;\n\n    // avoid recursion by using a processing queue\n    while (stack.length) {\n        y = stack.pop();\n        x = stack.pop();\n        z = stack.pop();\n        features = stack.pop();\n\n        var z2 = 1 << z,\n            id = toID(z, x, y),\n            tile = this.tiles[id];\n\n        if (!tile) {\n            if (debug > 1) console.time('creation');\n\n            tile = this.tiles[id] = createTile(features, z, x, y, options);\n            this.tileCoords.push({z: z, x: x, y: y});\n\n            if (debug) {\n                if (debug > 1) {\n                    console.log('tile z%d-%d-%d (features: %d, points: %d, simplified: %d)',\n                        z, x, y, tile.numFeatures, tile.numPoints, tile.numSimplified);\n                    console.timeEnd('creation');\n                }\n                var key = 'z' + z;\n                this.stats[key] = (this.stats[key] || 0) + 1;\n                this.total++;\n            }\n        }\n\n        // save reference to original geometry in tile so that we can drill down later if we stop now\n        tile.source = features;\n\n        // if it's the first-pass tiling\n        if (!cz) {\n            // stop tiling if we reached max zoom, or if the tile is too simple\n            if (z === options.indexMaxZoom || tile.numPoints <= options.indexMaxPoints) continue;\n\n        // if a drilldown to a specific tile\n        } else {\n            // stop tiling if we reached base zoom or our target tile zoom\n            if (z === options.maxZoom || z === cz) continue;\n\n            // stop tiling if it's not an ancestor of the target tile\n            var m = 1 << (cz - z);\n            if (x !== Math.floor(cx / m) || y !== Math.floor(cy / m)) continue;\n        }\n\n        // if we slice further down, no need to keep source geometry\n        tile.source = null;\n\n        if (features.length === 0) continue;\n\n        if (debug > 1) console.time('clipping');\n\n        // values we'll use for clipping\n        var k1 = 0.5 * options.buffer / options.extent,\n            k2 = 0.5 - k1,\n            k3 = 0.5 + k1,\n            k4 = 1 + k1,\n            tl, bl, tr, br, left, right;\n\n        tl = bl = tr = br = null;\n\n        left  = clip(features, z2, x - k1, x + k3, 0, tile.minX, tile.maxX, options);\n        right = clip(features, z2, x + k2, x + k4, 0, tile.minX, tile.maxX, options);\n        features = null;\n\n        if (left) {\n            tl = clip(left, z2, y - k1, y + k3, 1, tile.minY, tile.maxY, options);\n            bl = clip(left, z2, y + k2, y + k4, 1, tile.minY, tile.maxY, options);\n            left = null;\n        }\n\n        if (right) {\n            tr = clip(right, z2, y - k1, y + k3, 1, tile.minY, tile.maxY, options);\n            br = clip(right, z2, y + k2, y + k4, 1, tile.minY, tile.maxY, options);\n            right = null;\n        }\n\n        if (debug > 1) console.timeEnd('clipping');\n\n        stack.push(tl || [], z + 1, x * 2,     y * 2);\n        stack.push(bl || [], z + 1, x * 2,     y * 2 + 1);\n        stack.push(tr || [], z + 1, x * 2 + 1, y * 2);\n        stack.push(br || [], z + 1, x * 2 + 1, y * 2 + 1);\n    }\n};\n\nGeoJSONVT.prototype.getTile = function (z, x, y) {\n    var options = this.options,\n        extent = options.extent,\n        debug = options.debug;\n\n    if (z < 0 || z > 24) return null;\n\n    var z2 = 1 << z;\n    x = ((x % z2) + z2) % z2; // wrap tile x coordinate\n\n    var id = toID(z, x, y);\n    if (this.tiles[id]) return transform(this.tiles[id], extent);\n\n    if (debug > 1) console.log('drilling down to z%d-%d-%d', z, x, y);\n\n    var z0 = z,\n        x0 = x,\n        y0 = y,\n        parent;\n\n    while (!parent && z0 > 0) {\n        z0--;\n        x0 = Math.floor(x0 / 2);\n        y0 = Math.floor(y0 / 2);\n        parent = this.tiles[toID(z0, x0, y0)];\n    }\n\n    if (!parent || !parent.source) return null;\n\n    // if we found a parent tile containing the original geometry, we can drill down from it\n    if (debug > 1) console.log('found parent tile z%d-%d-%d', z0, x0, y0);\n\n    if (debug > 1) console.time('drilling down');\n    this.splitTile(parent.source, z0, x0, y0, z, x, y);\n    if (debug > 1) console.timeEnd('drilling down');\n\n    return this.tiles[id] ? transform(this.tiles[id], extent) : null;\n};\n\nfunction toID(z, x, y) {\n    return (((1 << z) * y + x) * 32) + z;\n}\n\nfunction extend(dest, src) {\n    for (var i in src) dest[i] = src[i];\n    return dest;\n}\n"],"sourceRoot":""}